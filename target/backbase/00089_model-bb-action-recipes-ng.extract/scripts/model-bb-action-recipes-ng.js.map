{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 67756ab2f7e9e5e0dbdf?d11b","webpack:///./model-bb-action-recipes-ng/model.xml","webpack:///./model-bb-action-recipes-ng/scripts/index.js","webpack:///external \"vendor-bb-angular\"","webpack:///external \"data-bb-action-recipes-http-ng\"","webpack:///external \"data-bb-product-summary-http-ng\"","webpack:///./model-bb-action-recipes-ng/scripts/action-recipes.js","webpack:///external \"lib-bb-model-errors\"","webpack:///./model-bb-action-recipes-ng/scripts/account-mapper.js"],"names":["moduleKey","modelActionRecipesKey","module","factory","name","actionRecipesModel","actionRecipesData","productSummaryData","$q","convertRawData","rawData","data","loadRecipes","getActionRecipes","then","res","actionRecipes","catch","httpErrorResponse","loadSpecifications","getActionRecipeSpecifications","actionRecipeSpecifications","convertToArray","Object","keys","filter","groupName","products","length","map","reduce","accumulated","arr","concat","loadAccounts","getProductsummaryDebitaccounts","load","all","specifications","accounts","recipes","save","recipe","postActionRecipesRecord","response","id","assign","update","putActionRecipesRecord","remove","deleteActionRecipesRecord","activate","postActionRecipesActivationRequestRecord","active","deactivate","postActionRecipesDeactivationRequestRecord","maskCardNumber","suffix","masked","defaultViewModelFactory","currency","viewModelFactories","currentAccounts","account","identifier","IBAN","BBAN","amount","availableBalance","savingsAccounts","bookedBalance","termDeposits","principalAmount","loans","creditCards","cardNumberSuffix","investmentAccounts","currentInvestmentValue","viewModelFactory","kind","acc","kindId"],"mappings":"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","file":"model-bb-action-recipes-ng/scripts/model-bb-action-recipes-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"data-bb-action-recipes-http-ng\"), require(\"data-bb-product-summary-http-ng\"), require(\"lib-bb-model-errors\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"model-bb-action-recipes-ng\", [\"vendor-bb-angular\", \"data-bb-action-recipes-http-ng\", \"data-bb-product-summary-http-ng\", \"lib-bb-model-errors\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"model-bb-action-recipes-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"data-bb-action-recipes-http-ng\"), require(\"data-bb-product-summary-http-ng\"), require(\"lib-bb-model-errors\"));\n\telse\n\t\troot[\"model-bb-action-recipes-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"data-bb-action-recipes-http-ng\"], root[\"data-bb-product-summary-http-ng\"], root[\"lib-bb-model-errors\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_27__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 67756ab2f7e9e5e0dbdf","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./model-bb-action-recipes-ng/model.xml\n// module id = 0\n// module chunks = 1","/**\n * @module model-bb-action-recipes-ng\n *\n * @description\n * Model for widget-bb-action-recipes-ng\n *\n * @example\n * import modelActionRecipesModuleKey, { modelActionRecipesKey } from 'model-bb-action-recipes-ng';\n *\n * angular\n *   .module('ExampleModule', [\n *     modelActionRecipesModuleKey,\n *   ])\n *   .factory('someFactory', [\n *     modelActionRecipesKey,\n *     // into\n *     function someFactory(actionRecipesModel) {\n *       // ...\n *     },\n *   ]);\n */\nimport angular from 'vendor-bb-angular';\n\nimport actionRecipesDataModuleKey, {\n  actionRecipesDataKey,\n} from 'data-bb-action-recipes-http-ng';\n\nimport productSummaryDataModuleKey, {\n  productSummaryDataKey,\n} from 'data-bb-product-summary-http-ng';\n\nimport Model from './action-recipes';\n\nexport const moduleKey = 'model-bb-action-recipes-ng';\nexport const modelActionRecipesKey = 'model-bb-action-recipes-ng:model';\n\nexport default angular\n  .module(moduleKey, [\n    actionRecipesDataModuleKey,\n    productSummaryDataModuleKey,\n  ])\n\n  .factory(modelActionRecipesKey, [\n    actionRecipesDataKey,\n    productSummaryDataKey,\n    '$q',\n    /* into */\n    Model,\n  ])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-action-recipes-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_23__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 23\n// module chunks = 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-action-recipes-http-ng\"\n// module id = 24\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-product-summary-http-ng\"\n// module id = 25\n// module chunks = 1","import { fromHttpError } from 'lib-bb-model-errors';\nimport accountModel from './account-mapper';\n\n/**\n * Model factory for model-bb-action-recipes-ng\n *\n * @inner\n * @type {function}\n * @param {Object} Promise An ES2015 compatible `Promise` object.\n *\n * @return {Object}\n */\nexport default function actionRecipesModel(actionRecipesData, productSummaryData, $q) {\n  /**\n   * @description Extracting data set from raw response\n   * @inner\n   * @param rawData - response\n   * @returns [object] data response\n   */\n  const convertRawData = (rawData) => rawData.data || [];\n\n  /**\n   * @description Load users recipe data.\n   *\n   * @name actionRecipesModel#loadRecipes\n   * @type {function}\n   * @returns {Promise.<Object>} A Promise with an array of Recipes\n   */\n  function loadRecipes() {\n    return actionRecipesData.getActionRecipes()\n      .then(convertRawData)\n      .then(res => res.actionRecipes)\n      .catch(httpErrorResponse => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n   * @description Load available Recipe Specifications\n   *\n   * @name actionRecipesModel#loadSpecifications\n   * @type {function}\n   * @returns {Promise.<Object>} A Promise with an array of specification data\n   */\n  function loadSpecifications() {\n    return actionRecipesData.getActionRecipeSpecifications()\n      .then(convertRawData)\n      .then(res => res.actionRecipeSpecifications)\n      .catch(httpErrorResponse => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n   * @description Method to normalize account data\n   *\n   * @param {object} data http response data\n   * @type {function}\n   * @returns {Array<Account>} accounts normalized account data\n   * @inner\n   */\n  function convertToArray(data) {\n    return Object.keys(data)\n      .filter(groupName => data[groupName].products && data[groupName].products.length > 0)\n      .map(groupName => data[groupName].products.map(accountModel(groupName)))\n      .reduce((accumulated, arr) => accumulated.concat(arr), []);\n  }\n\n  /**\n   * @description Load users account data\n   *\n   * @name actionRecipesModel#loadAccounts\n   * @type {function}\n   * @returns {Promise.<Object>} A Promise with an array of account data\n   */\n  function loadAccounts() {\n    return productSummaryData.getProductsummaryDebitaccounts()\n      .then(convertRawData)\n      .then(convertToArray)\n      .catch(httpErrorResponse => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n   * @description\n   * Load all necessary data to display Recipes:\n   * Recipes, Specifications and Accounts.\n   *\n   * @name actionRecipesModel#load\n   * @type {function}\n   * @returns {Promise.<Object>} A Promise with an array of account data\n   */\n  function load() {\n    return $q.all([\n      loadSpecifications(),\n      loadAccounts(),\n      loadRecipes(),\n    ]).then(res => ({\n      specifications: res[0],\n      accounts: res[1],\n      recipes: res[2],\n    })).catch((httpErrorResponse) => {\n      throw fromHttpError(httpErrorResponse);\n    });\n  }\n\n  /**\n   * @description\n   * Load all necessary data to display Recipes:\n   * Recipes, Specifications and Accounts.\n   *\n   * @name actionRecipesModel#load\n   * @type {function}\n   * @returns {Promise.<Object>} A Promise with an array of account data\n   */\n  function save(recipe) {\n    return actionRecipesData.postActionRecipesRecord(recipe)\n      .then(convertRawData)\n      .then((response) => {\n        const id = response.id;\n        return Object.assign(recipe, { id });\n      })\n      .catch((httpErrorResponse) => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n   * @description\n   * Load all necessary data to display Recipes:\n   * Recipes, Specifications and Accounts.\n   *\n   * @name actionRecipesModel#load\n   * @type {function}\n   * @returns {Promise.<Object>} A Promise with an array of account data\n   */\n  function update(recipe) {\n    return actionRecipesData.putActionRecipesRecord(recipe.id, recipe)\n      .then(convertRawData)\n      .then(() => recipe)\n      .catch((httpErrorResponse) => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n   * @description\n   * Load all necessary data to display Recipes:\n   * Recipes, Specifications and Accounts.\n   *\n   * @name actionRecipesModel#load\n   * @type {function}\n   * @returns {Promise.<Object>} A Promise with an array of account data\n   */\n  function remove(recipe) {\n    return actionRecipesData.deleteActionRecipesRecord(recipe.id, {})\n      .then(convertRawData)\n      .catch((httpErrorResponse) => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n   * @description Activates given action recipe\n   * @name actionRecipesModel#activate\n   * @type {Function}\n   * @param {Object} recipe recipe to activate\n   * @return {Promise} promise which is resolved with the activated recipe\n   */\n  function activate(recipe) {\n    return actionRecipesData.postActionRecipesActivationRequestRecord(recipe.id)\n      .then(() => Object.assign(recipe, { active: true }))\n      .catch((httpErrorResponse) => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n   * @description Deactivates given action recipe\n   * @name actionRecipesModel#deactivate\n   * @type {Function}\n   * @param {Object} recipe recipe to deactivate\n   * @return {Promise} promise which is resolved with deactivated recipe\n   */\n  function deactivate(recipe) {\n    return actionRecipesData.postActionRecipesDeactivationRequestRecord(recipe.id)\n      .then(() => Object.assign(recipe, { active: false }))\n      .catch((httpErrorResponse) => {\n        throw fromHttpError(httpErrorResponse);\n      });\n  }\n\n  /**\n  * @description\n  * Action recipes  widget model service.\n  *\n  * @name actionRecipesModel\n  * @type {object}\n  */\n  return {\n    loadRecipes,\n    loadSpecifications,\n    loadAccounts,\n    load,\n    save,\n    update,\n    remove,\n    activate,\n    deactivate,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-action-recipes-ng/scripts/action-recipes.js","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 27\n// module chunks = 1 2","const maskCardNumber = (suffix) => {\n  let masked = '';\n  if (suffix) {\n    masked = `XXXX-XXXX-XXXX-${suffix}`;\n  }\n  return masked;\n};\n\nconst defaultViewModelFactory = ({ id, name, currency }) => ({\n  id,\n  name,\n  currency,\n});\n\nconst viewModelFactories = {\n  currentAccounts: (account) => ({\n    id: account.id,\n    name: account.name,\n    identifier: account.IBAN || account.BBAN,\n    amount: account.availableBalance,\n    currency: account.currency,\n  }),\n\n  savingsAccounts: (account) => ({\n    id: account.id,\n    name: account.name,\n    identifier: account.IBAN || account.BBAN,\n    amount: account.bookedBalance,\n    currency: account.currency,\n  }),\n\n  termDeposits: (account) => ({\n    id: account.id,\n    name: account.name,\n    amount: account.principalAmount,\n    currency: account.currency,\n  }),\n\n  loans: (account) => ({\n    id: account.id,\n    name: account.name,\n    amount: account.bookedBalance,\n    currency: account.currency,\n  }),\n\n  creditCards: (account) => ({\n    id: account.id,\n    name: account.name,\n    identifier: maskCardNumber(account.cardNumberSuffix),\n    amount: account.availableBalance,\n    currency: account.currency,\n  }),\n\n  investmentAccounts: (account) => ({\n    id: account.id,\n    name: account.name,\n    amount: account.currentInvestmentValue,\n    currency: account.currency,\n  }),\n\n};\n\nconst viewModelFactory = (kind, account) => {\n  const acc = (viewModelFactories[kind] || defaultViewModelFactory)(account);\n  acc.kind = kind;\n  return acc;\n};\n\n/**\n * Prepare the fields of a account into a form ready for display to the User\n *\n * @inner\n * @param {object} account The source account from the API\n * @returns {AccountView}\n */\nexport default (kindId) => (account) =>\n  viewModelFactory(kindId, account);\n\n\n\n// WEBPACK FOOTER //\n// ./model-bb-action-recipes-ng/scripts/account-mapper.js"],"sourceRoot":""}