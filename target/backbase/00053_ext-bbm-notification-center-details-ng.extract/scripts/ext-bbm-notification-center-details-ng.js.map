{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6***","webpack:///webpack/bootstrap 779b1f71a92f6bec7e36?1313***","webpack:///./ext-bbm-notification-center-details-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01**","webpack:///external \"ui-bb-date-label-filter-ng\"?be82**","webpack:///./ext-bbm-notification-center-details-ng/scripts/index.js","webpack:///external \"ui-bb-list-ng\"","webpack:///./ext-bbm-notification-center-details-ng/scripts/events.js","webpack:///external \"lib-bbm-plugins\"","webpack:///./ext-bbm-notification-center-details-ng/scripts/helpers.js"],"names":["events","helpers","dependencyKeys","Event","NOTIFICATION_DELETE_START","NOTIFICATION_DELETE_DONE","NOTIFICATION_DELETE_FAILED","$filter","i18n","ActivityIndicator","show","hide","Snackbar","success","error","levelIconClass","ALERT","WARNING","INFO","SUCCESS","dateLabelKeys","NOW","TODAY","YESTERDAY","ToolbarButtonEvent","DELETE","CHANGE_READ","ButtonType","POSITIVE","NEGATIVE","ConfirmAction","CANCEL","CONFIRM","normalizeDate","filteredDate","dateStr","replace","getLevelIcon","level","getDateLabel","notification","date","createdOn","labelKey","resultDateLabel","isOpen","dateType","onInit","window","addEventListener","notificationId","ctrl","state","selectedNotification","id","changeNotificationRead","confirmOptions","title","message","buttons","type","text","callbackFn","AlertDialog","then","response","callback","isConfirmed","deleteNotification"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,0C;;;;;;;ACAA,gD;;;;;;;ACAA,gD;;;;;;;;;;;;;;ACYA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAEO,KAAMA,0CAAN,C,CAnBP;;;;;;;;;;;;AAoBO,KAAMC,6CAAN;;AAEA,KAAMC,0CAAiB,6EAAvB,C;;;;;;;ACtBP,iD;;;;;;;;;;;;;ACEA;;;;;;mNAFA;AACA;;;AAGA,KAAMC,QAAQ;AACZC,8BAA2B,oCADf;AAEZC,6BAA0B,mCAFd;AAGZC,+BAA4B;AAHhB,EAAd;;mBAMe,gBAAiB;AAAA;;AAAA,OAAdC,OAAc,QAAdA,OAAc;;AAC9B,OAAMC,OAAOD,QAAQ,MAAR,CAAb;;AAEA,6CACGJ,MAAMC,yBADT,EACqC,YAAM;AACvC,6BAAQK,iBAAR,GAA4BC,IAA5B,CAAiCF,KAAK,mCAAL,CAAjC;AACD,IAHH,0BAKGL,MAAME,wBALT,EAKoC,YAAM;AACtC,6BAAQI,iBAAR,GAA4BE,IAA5B;AACA,6BAAQC,QAAR,GAAmBC,OAAnB,CAA2BL,KAAK,kCAAL,CAA3B;AACD,IARH,0BAUGL,MAAMG,0BAVT,EAUsC,YAAM;AACxC,6BAAQG,iBAAR,GAA4BE,IAA5B;AACA,6BAAQC,QAAR,GAAmBE,KAAnB,CAAyBN,KAAK,oCAAL,CAAzB;AACD,IAbH;AAeD,E;;;;;;;AC5BD,iD;;;;;;;;;;;;;;;ACYA;;AACA;;;;;;mNAbA;AACA;AACA;;AAEA;;;;;;;;AAWA,KAAMO,iBAAiB;AACrBC,UAAO,uBADc;AAErBC,YAAS,yBAFY;AAGrBC,SAAM,gBAHe;AAIrBC,YAAS;AAJY,EAAvB;;AAOA,KAAMC,sEACH,kCAAWC,GADR,EACc,oBADd,mCAEH,kCAAWC,KAFR,EAEgB,sBAFhB,mCAGH,kCAAWC,SAHR,EAGoB,0BAHpB,kBAAN;;AAMA,KAAMC,qBAAqB;AACzBC,WAAQ,+BADiB;AAEzBC,gBAAa;AAFY,EAA3B;;AAKA;;;;;AAKA,KAAMC,aAAa;AACjBC,aAAU,UADO;AAEjBC,aAAU;AAFO,EAAnB;;AAKA;;;;AAIA,KAAMC,gBAAgB;AACpBC,WAAQ,QADY;AAEpBC,YAAS;AAFW,EAAtB;;mBAKe,gBAAiB;AAAA,OAAdzB,OAAc,QAAdA,OAAc;;AAC9B,OAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA;;;;;;;;;;;AAWA,OAAM0B,gBAAgB,SAAhBA,aAAgB,UAAW;AAC/B,SAAMC,eAAe3B,QAAQ,MAAR,EAAgB4B,OAAhB,EAAyB,0BAAzB,CAArB;AACA,YAAOD,aAAaE,OAAb,CAAqB,mBAArB,EAA0C,OAA1C,CAAP;AACD,IAHD;;AAKA,UAAO;AACL;;;;;;;;;;AAUAC,mBAAc;AAAA,cAAStB,eAAeuB,KAAf,CAAT;AAAA,MAXT;;AAaL;;;;;;;;;;AAUAC,mBAAc,oCAAgB;AAC5B,WAAI,CAACC,YAAL,EAAmB;AACjB,gBAAO,EAAP;AACD;;AAED,WAAMC,OAAOR,cAAcO,aAAaE,SAA3B,CAAb;;AAEA,WAAIC,iBAAJ;AACA,WAAIC,wBAAJ;;AAEA,WAAI,CAACJ,aAAaK,MAAlB,EAA0B;AACxB,aAAMC,WAAWvC,QAAQ,WAAR,EAAqBkC,IAArB,CAAjB;AACAE,oBAAWvB,cAAc0B,QAAd,CAAX;AACD;;AAEDF,yBAAkBD,WAAWpC,QAAQ,MAAR,EAAgBoC,QAAhB,CAAX,GAAuCpC,QAAQ,MAAR,EAAgBkC,IAAhB,EAAsB,aAAtB,CAAzD;;AAEA,WAAIE,aAAavB,cAAc,kCAAWC,GAAzB,CAAjB,EAAgD;AAC9CuB,4BAAmBrC,QAAQ,MAAR,EAAgB,mBAAhB,IAAuCA,QAAQ,MAAR,EAAgBkC,IAAhB,EAAsB,OAAtB,CAA1D;AACD;;AAED,cAAOG,eAAP;AACD,MA7CI;;AA+CL;;;;;;;;;;AAUAG,aAAQ,sBAAQ;AACdC,cAAOC,gBAAP,CAAwBzB,mBAAmBE,WAA3C,EAAwD,YAAM;AAC5D,aAAMwB,iBAAiBC,KAAKC,KAAL,CAAWC,oBAAX,CAAgCC,EAAvD;AACAH,cAAKI,sBAAL,CAA4BL,cAA5B;AACD,QAHD;;AAKAF,cAAOC,gBAAP,CAAwBzB,mBAAmBC,MAA3C,EAAmD,YAAM;AACvD,aAAM+B,iBAAiB;AACrBC,kBAAOjD,KAAK,2CAAL,CADc;AAErBkD,oBAASlD,KAAK,6CAAL,CAFY;AAGrBmD,oBAAS,CACP;AACEC,mBAAMjC,WAAWC,QADnB;AAEEiC,mBAAMrD,KAAK,+CAAL,CAFR;AAGEsD,yBAAYhC,cAAcE;AAH5B,YADO,EAMP;AACE4B,mBAAMjC,WAAWE,QADnB;AAEEgC,mBAAMrD,KAAK,mDAAL,CAFR;AAGEsD,yBAAYhC,cAAcC;AAH5B,YANO;AAHY,UAAvB;;AAiBA,iCAAQgC,WAAR,GAAsBrD,IAAtB,CAA2B8C,cAA3B,EACGQ,IADH,CACQ,UAACC,QAAD;AAAA,kBAAcA,SAASC,QAAT,KAAsBpC,cAAcE,OAAlD;AAAA,UADR,EAEGgC,IAFH,CAEQ,UAACG,WAAD,EAAiB;AACrB,eAAIA,WAAJ,EAAiB;AACfhB,kBAAKiB,kBAAL;AACD;AACF,UANH;AAOD,QAzBD;AA0BD;AAzFI,IAAP;AA2FD,E","file":"ext-bbm-notification-center-details-ng/scripts/ext-bbm-notification-center-details-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-date-label-filter-ng\"), require(\"ui-bb-list-ng\"), require(\"lib-bbm-plugins\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bbm-notification-center-details-ng\", [\"ui-bb-i18n-ng\", \"ui-bb-date-label-filter-ng\", \"ui-bb-list-ng\", \"lib-bbm-plugins\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bbm-notification-center-details-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-date-label-filter-ng\"), require(\"ui-bb-list-ng\"), require(\"lib-bbm-plugins\"));\n\telse\n\t\troot[\"ext-bbm-notification-center-details-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"ui-bb-date-label-filter-ng\"], root[\"ui-bb-list-ng\"], root[\"lib-bbm-plugins\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_27__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 779b1f71a92f6bec7e36","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-notification-center-details-ng/model.xml\n// module id = 0\n// module chunks = 3","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 4\n// module chunks = 0 1 2 3 4 5","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-date-label-filter-ng\"\n// module id = 5\n// module chunks = 0 1 2 3 4 5","/**\n * @module ext-bbm-notification-center-details-ng\n *\n * @description\n * Mobile extension for a notiication center details.\n *\n * @example\n * <!-- Contact widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *   <value type=\"string\">ext-bbm-notification-details-ng</value>\n * </property>\n */\nimport uiBbI18nNgKey from 'ui-bb-i18n-ng';\nimport uiBbDateLabelFilterKey from 'ui-bb-date-label-filter-ng';\nimport uiBbListKey from 'ui-bb-list-ng';\n\nimport extEvents from './events';\nimport extHelpers from './helpers';\n\nexport const events = extEvents;\nexport const helpers = extHelpers;\n\nexport const dependencyKeys = [\n  uiBbI18nNgKey,\n  uiBbDateLabelFilterKey,\n  uiBbListKey,\n];\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-notification-center-details-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-list-ng\"\n// module id = 25\n// module chunks = 3","// Temporary disable capsInNew until it fixed in lib-bbm-plugins\n/* eslint new-cap: [\"error\", { \"capIsNew\": false }] */\nimport plugins from 'lib-bbm-plugins';\n\nconst Event = {\n  NOTIFICATION_DELETE_START: 'bb.event.notification.delete.start',\n  NOTIFICATION_DELETE_DONE: 'bb.event.notification.delete.done',\n  NOTIFICATION_DELETE_FAILED: 'bb.event.notification.delete.failed',\n};\n\nexport default ({ $filter }) => {\n  const i18n = $filter('i18n');\n\n  return {\n    [Event.NOTIFICATION_DELETE_START]: () => {\n      plugins.ActivityIndicator().show(i18n('message.notification.delete.start'));\n    },\n\n    [Event.NOTIFICATION_DELETE_DONE]: () => {\n      plugins.ActivityIndicator().hide();\n      plugins.Snackbar().success(i18n('message.notification.delete.done'));\n    },\n\n    [Event.NOTIFICATION_DELETE_FAILED]: () => {\n      plugins.ActivityIndicator().hide();\n      plugins.Snackbar().error(i18n('message.notification.delete.failed'));\n    },\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-notification-center-details-ng/scripts/events.js","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bbm-plugins\"\n// module id = 27\n// module chunks = 3","// Temporary disable capsInNew until it fixed in lib-bbm-plugins\n/* eslint new-cap: [\"error\", { \"capIsNew\": false }] */\n/* global window */\n\n/**\n * @description\n * Helpers for ext-bbm-notification-center-details-ng\n *\n * @name Helpers\n * @type {Object}\n */\n\nimport { TimePeriod } from 'ui-bb-date-label-filter-ng';\nimport plugins from 'lib-bbm-plugins';\n\nconst levelIconClass = {\n  ALERT: 'fa-exclamation-circle',\n  WARNING: 'fa-exclamation-triangle',\n  INFO: 'fa-info-circle',\n  SUCCESS: 'fa-check-circle',\n};\n\nconst dateLabelKeys = {\n  [TimePeriod.NOW]: 'calendar.label.now',\n  [TimePeriod.TODAY]: 'calendar.label.today',\n  [TimePeriod.YESTERDAY]: 'calendar.label.yesterday',\n};\n\nconst ToolbarButtonEvent = {\n  DELETE: 'bb.action.notification.delete',\n  CHANGE_READ: 'bb.action.notification.read.change',\n};\n\n/**\n * Confirm dialog button types\n * TODO: Read them from the plugin\n * @type {Object}\n */\nconst ButtonType = {\n  POSITIVE: 'POSITIVE',\n  NEGATIVE: 'NEGATIVE',\n};\n\n/**\n * Confirm dialog actions\n * @type {Object}\n */\nconst ConfirmAction = {\n  CANCEL: 'cancel',\n  CONFIRM: 'confirm',\n};\n\nexport default ({ $filter }) => {\n  const i18n = $filter('i18n');\n  /**\n   * The standard ISO-8601 supports the following formats for time offsets:\n   * ±[hh]:[mm], ±[hh][mm], or ±[hh]\n   * However iOS does support only ±[hh]:[mm] format.\n   * Thus we make sure that the given date string has the following\n   * variation of the ISO-8601 standard:\n   * \"YYYY-MM-DDThh:mm:ss.SSS±hh:mm\"\n   * @name normalizeDate\n   * @inner\n   * @param dateStr\n   */\n  const normalizeDate = dateStr => {\n    const filteredDate = $filter('date')(dateStr, 'yyyy-MM-ddTHH:mm:ss.sssZ');\n    return filteredDate.replace(/(\\d{2}):?(\\d{2})$/, '$1:$2');\n  };\n\n  return {\n    /**\n     * @description\n     * Returns CSS class for icon according to the given level.\n     *\n     * @name Helpers#getLevelIcon\n     * @type {function}\n     *\n     * @param {string} level Notification level\n     * @returns {string}\n     */\n    getLevelIcon: level => levelIconClass[level],\n\n    /**\n     * @description\n     * Returns a date label for the given notification.\n     *\n     * @name Helpers#getDateLabel\n     * @type {function}\n     *\n     * @param {module:model-bb-notifications-ng.Notification} notification Notification\n     * @returns {string}\n     */\n    getDateLabel: notification => {\n      if (!notification) {\n        return '';\n      }\n\n      const date = normalizeDate(notification.createdOn);\n\n      let labelKey;\n      let resultDateLabel;\n\n      if (!notification.isOpen) {\n        const dateType = $filter('dateLabel')(date);\n        labelKey = dateLabelKeys[dateType];\n      }\n\n      resultDateLabel = labelKey ? $filter('i18n')(labelKey) : $filter('date')(date, 'd MMMM yyyy');\n\n      if (labelKey !== dateLabelKeys[TimePeriod.NOW]) {\n        resultDateLabel += $filter('i18n')('calendar.label.at') + $filter('date')(date, 'hh:mm');\n      }\n\n      return resultDateLabel;\n    },\n\n    /**\n     * @description\n     * Init lifecycle hook. Adds event listeners for native toolbar buttons.\n     *\n     * @name Helpers#onInit\n     * @type {function}\n     *\n     * @param {module:widget-bbm-notification-center-ng.DetailsController} ctrl\n     *   DetailsController instance.\n     */\n    onInit: ctrl => {\n      window.addEventListener(ToolbarButtonEvent.CHANGE_READ, () => {\n        const notificationId = ctrl.state.selectedNotification.id;\n        ctrl.changeNotificationRead(notificationId);\n      });\n\n      window.addEventListener(ToolbarButtonEvent.DELETE, () => {\n        const confirmOptions = {\n          title: i18n('message.notification.delete.confirm.title'),\n          message: i18n('message.notification.delete.confirm.message'),\n          buttons: [\n            {\n              type: ButtonType.POSITIVE,\n              text: i18n('message.notification.delete.confirm.button.ok'),\n              callbackFn: ConfirmAction.CONFIRM,\n            },\n            {\n              type: ButtonType.NEGATIVE,\n              text: i18n('message.notification.delete.confirm.button.cancel'),\n              callbackFn: ConfirmAction.CANCEL,\n            },\n          ],\n        };\n\n        plugins.AlertDialog().show(confirmOptions)\n          .then((response) => response.callback === ConfirmAction.CONFIRM)\n          .then((isConfirmed) => {\n            if (isConfirmed) {\n              ctrl.deleteNotification();\n            }\n          });\n      });\n    },\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-notification-center-details-ng/scripts/helpers.js"],"sourceRoot":""}