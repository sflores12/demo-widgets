{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*********************","webpack:///webpack/bootstrap b6e6496f5522437c4c2f?95fa*********************","webpack:///./widget-bb-product-summary-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114********","webpack:///external \"lib-bb-widget-ng\"?84ad*","webpack:///external \"lib-bb-model-errors\"?7567**","webpack:///external \"lib-bb-widget-extension-ng\"?b547*","webpack:///external \"model-bb-product-summary-ng\"?4945*","webpack:///external \"lib-bb-intent-ng\"?add1*","webpack:///external \"lib-bb-event-bus-ng\"?8215*","webpack:///./widget-bb-product-summary-ng/scripts/index.js","webpack:///./widget-bb-product-summary-ng/scripts/controller.js","webpack:///./widget-bb-product-summary-ng/scripts/constants.js","webpack:///./widget-bb-product-summary-ng/scripts/message.js","webpack:///./widget-bb-product-summary-ng/scripts/default-hooks.js"],"names":["defaultHooks","hooksKey","module","factory","controller","run","bus","widget","bbIntent","publish","id","getId","init","name","ProductSummaryController","PRODUCT_SELECTED","PRODUCTS_SELECTED","REFLOW_TRIGGERED","uiError","messageMap","modelError","message","code","model","hooks","eventBus","$ctrl","intents","selectProduct","product","setProductSelected","kind","selectProducts","products","setProductsSelected","hasValue","value","loadProductDetails","getProductDetails","then","extendedProduct","productKindName","Object","assign","productTypeName","processExtendedProduct","catch","productKindsError","error","updateProductSelected","getProductSelected","productSelected","processProductSelected","updateProductsSelected","getProductsSelected","productsSelected","processProductsSelected","loadProducts","forceLoad","isProductLoading","load","productKinds","total","processKinds","bindEvents","subscribe","viewManageProducts","initIntent","create","VIEW_MANAGE_PRODUCTS","handle","VIEW_PRODUCT_SUMMARY","$onInit","hasProducts","length","errorMessages","Intent","kinds"],"mappings":"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","file":"widget-bb-product-summary-ng/scripts/widget-bb-product-summary-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-product-summary-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-widget-extension-ng\", \"model-bb-product-summary-ng\", \"lib-bb-intent-ng\", \"lib-bb-event-bus-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-product-summary-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"));\n\telse\n\t\troot[\"widget-bb-product-summary-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-widget-extension-ng\"], root[\"model-bb-product-summary-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-event-bus-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_79__, __WEBPACK_EXTERNAL_MODULE_87__, __WEBPACK_EXTERNAL_MODULE_89__, __WEBPACK_EXTERNAL_MODULE_107__, __WEBPACK_EXTERNAL_MODULE_108__, __WEBPACK_EXTERNAL_MODULE_109__, __WEBPACK_EXTERNAL_MODULE_111__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b6e6496f5522437c4c2f","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-product-summary-ng/model.xml\n// module id = 0\n// module chunks = 22","module.exports = __WEBPACK_EXTERNAL_MODULE_79__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 79\n// module chunks = 13 14 15 16 17 18 19 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_87__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 87\n// module chunks = 14 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_89__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 89\n// module chunks = 14 20 21 22 24","module.exports = __WEBPACK_EXTERNAL_MODULE_107__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 107\n// module chunks = 20 21 22 23","module.exports = __WEBPACK_EXTERNAL_MODULE_108__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-product-summary-ng\"\n// module id = 108\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_109__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 109\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_111__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 111\n// module chunks = 20 21 22 23 24","/**\n * @module widget-bb-product-summary-ng\n *\n * @description\n * Product summary.\n *\n * @borrows module:model-bb-product-summary-ng.Product as Product\n * @borrows module:model-bb-product-summary-ng.ProductKind as ProductKind\n * @borrows module:lib-bb-model-errors.ModelError as ModelError\n *\n * @example\n *  <div ng-controller=\"ProductSummaryController as $ctrl\">\n *    <ul>\n *       <li ng-repeat=\"product in $ctrl.products\">{{product.id}}</li>\n *    </ul>\n *  </div>\n */\nimport angular from 'vendor-bb-angular';\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\n\nimport modelProductSummaryModuleKey, {\n  modelProductSummaryKey,\n} from 'model-bb-product-summary-ng';\n\nimport eventBusModuleKey, {\n  eventBusKey,\n} from 'lib-bb-event-bus-ng';\n\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\n\nimport Controller from './controller';\nimport * as defaultHooks from './default-hooks';\n\nconst hooksKey = 'widget-bb-product-summary-ng:hooks';\n\n/**\n * @name default\n * @type {string}\n * @description Angular module name\n */\nexport default angular\n  .module('widget-bb-product-summary-ng', [\n    modelProductSummaryModuleKey,\n    eventBusModuleKey,\n    widgetModuleKey,\n    bbIntentModuleKey,\n  ])\n\n  .factory(hooksKey, extendHooks(defaultHooks))\n\n  .controller('ProductSummaryController', [\n    modelProductSummaryKey,\n    hooksKey,\n    eventBusKey,\n    widgetKey,\n    bbIntentKey,\n    /* into */\n    Controller,\n  ])\n\n  .run([eventBusKey, widgetKey, bbIntentKey, (bus, widget, bbIntent) => {\n    bus.publish('cxp.item.loaded', {\n      id: widget.getId(),\n    });\n    bbIntent.init();\n  }])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/index.js","import {\n  errorMessages,\n  Intent,\n} from './constants';\n\nimport Message from './message';\n\nconst { PRODUCT_SELECTED, PRODUCTS_SELECTED, REFLOW_TRIGGERED } = Message;\n\n/**\n * @name uiError\n *\n * @description\n * Creates UI error message.\n *\n * @type {function}\n *\n * @param {object} messageMap object with error message keys\n * @param {object} modelError the error object\n *\n * @returns {{message: string}}\n */\nconst uiError = (messageMap, modelError) => ({\n  message: messageMap[modelError.code],\n});\n\n\nexport default function ProductSummaryController(model, hooks, eventBus, widget, bbIntent) {\n  /**\n   * @name ProductSummaryController\n   * @ngkey ProductSummaryController\n   * @type {object}\n   * @description\n   * Product summary controller.\n   *\n   */\n  const $ctrl = this;\n\n  /**\n   * @description\n   * A set of intents that the controller uses or handles.\n   *\n   * @name intents\n   * @type {Object}\n   * @inner\n   */\n  const intents = {};\n\n  /**\n   * @description\n   * Sets the alternate workflow when a user selects a Product from the overview.\n   *\n   * @name ProductSummaryController#selectProduct\n   * @type {function}\n   * @param {Product} product Product to select.\n   * @fires bb.event.product.selected\n   * @fires bb.event.product.selected.[product-kind]\n   */\n  const selectProduct = (product) => {\n    model.setProductSelected(product);\n    eventBus.publish(PRODUCT_SELECTED, { product });\n    // for all accounts selection, do not send per kind event\n    if (product && product.kind) {\n      eventBus.publish(`${PRODUCT_SELECTED}.${product.kind}`, { product });\n    }\n  };\n\n  /**\n   * @description\n   * Sets the alternate workflow when a user selects multiple Products from the overview or selector\n   *\n   * @name ProductSummaryController#selectProducts\n   * @type {function}\n   * @param {Product[]} products Array of Products to select\n   * @fires bb.event.products.selected\n   */\n  const selectProducts = (products) => {\n    model.setProductsSelected(products);\n    eventBus.publish(PRODUCTS_SELECTED, { products });\n  };\n\n  /**\n   * @description\n   * Check if value is defined, not null and not empty\n   * @inner\n   * @name hasValue\n   * @type {function}\n   * @param  {*} value  The value to check\n   * @return {boolean}\n   */\n  const hasValue = (value) => typeof value !== 'undefined' && value !== null && value !== '';\n\n  /**\n   * @description\n   * Loading extended parameters for a given product\n   *\n   * @inner\n   * @name ProductSummaryController#loadProductDetails\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  const loadProductDetails = (product) => {\n    model.getProductDetails(product.id)\n      .then(extendedProduct => {\n        if (!hasValue(extendedProduct.productKindName)) {\n          Object.assign(extendedProduct, {\n            productKindName: product.productKindName,\n          });\n        }\n        Object.assign(extendedProduct, {\n          productTypeName: product.productKindName,\n        });\n        $ctrl.extendedProduct = hooks.processExtendedProduct(extendedProduct);\n      })\n      .catch(error => {\n        $ctrl.productKindsError = uiError(errorMessages, error);\n      });\n  };\n\n  /**\n   * @description\n   * Handles product select\n   *\n   * @name ProductSummaryController#updateProductSelected\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  function updateProductSelected() {\n    model.getProductSelected()\n      .then(productSelected => {\n        $ctrl.productSelected = hooks.processProductSelected(productSelected);\n        if (productSelected !== null) {\n          loadProductDetails(productSelected);\n        }\n      })\n      .catch(error => {\n        $ctrl.productKindsError = uiError(errorMessages, error);\n      });\n  }\n\n  /**\n   * @description\n   * Handles multiple product selection\n   *\n   * @name ProductSummaryController#updateProductsSelected\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  function updateProductsSelected() {\n    model.getProductsSelected(false)\n      .then(productsSelected => {\n        $ctrl.productsSelected = hooks.processProductsSelected(productsSelected);\n      });\n  }\n\n  /**\n   * @description\n   * Products loading logic\n   *\n   * @name ProductSummaryController#loadProducts\n   * @type {function}\n   *\n   * @returns {Promise.<void>}\n   */\n  const loadProducts = (forceLoad = true) => {\n    $ctrl.isProductLoading = true;\n\n    return model.load(forceLoad)\n      .then(({ productKinds, total }) => {\n        $ctrl.isProductLoading = false;\n\n        $ctrl.total = total;\n        $ctrl.productKinds = hooks.processKinds(productKinds);\n      })\n      .then(updateProductSelected)\n      .then(updateProductsSelected)\n      .catch(error => {\n        $ctrl.isProductLoading = false;\n        $ctrl.productKindsError = uiError(errorMessages, error);\n      });\n  };\n\n  /**\n   * @description\n   * Adds subscriptions to bus events\n   *\n   * @name ProductSummaryController#bindEvents\n   * @type {function}\n   */\n  function bindEvents() {\n    eventBus.subscribe(PRODUCT_SELECTED, updateProductSelected);\n    eventBus.subscribe(PRODUCTS_SELECTED, updateProductsSelected);\n    eventBus.subscribe(REFLOW_TRIGGERED, loadProducts);\n  }\n\n  /**\n   * @description\n   * Handles the intent to switch the view to product summary\n   *\n   * @type {function}\n   * @name ProductSummary#viewManageProducts\n   */\n  const viewManageProducts = () => {\n    if (intents.viewManageProducts) {\n      intents.viewManageProducts();\n    }\n  };\n\n  /**\n   * @description\n   * Inits the bbIntent and adds intent handlers.\n   *\n   * @inner\n   * @name ManageProductsController#initIntent\n   * @type {function}\n   */\n  const initIntent = () => {\n    intents.viewManageProducts = bbIntent.create(Intent.VIEW_MANAGE_PRODUCTS);\n\n    bbIntent.handle(Intent.VIEW_PRODUCT_SUMMARY, () => {\n      loadProducts();\n    });\n  };\n\n\n  /*\n   * Widget initialization logic.\n   */\n  const $onInit = () => {\n    /**\n     * This event (cxp.item.loaded) is deprecated in Mobile SDK version > 3.0\n     * and will be removed with the update to widget collection 3 (WC3)\n     */\n    eventBus.publish('cxp.item.loaded', {\n      id: widget.getId(),\n    });\n\n    eventBus.publish('bb.item.loaded', {\n      id: widget.getId(),\n    });\n\n    return loadProducts()\n      .then(bindEvents)\n      .then(initIntent);\n  };\n\n  Object.assign($ctrl, {\n    /**\n     * @description\n     * The selected product.\n     * The value returned from {@link Hooks.processProductSelected} hook\n     *\n     * @name ProductSummaryController#productSelected\n     * @type {any}\n     */\n    productSelected: null,\n    /**\n     * @description\n     * Array of selected products.\n     * The value returned from {@link Hooks.processProductsSelected} hook\n     *\n     * @name ProductSummaryController#productsSelected\n     * @type {array}\n     */\n    productsSelected: [],\n    /**\n     * @description\n     * The selected product extended with arrangement details.\n     *\n     * @name ProductSummaryController#extendedProduct\n     * @type {any}\n     */\n    extendedProduct: null,\n    /**\n     * @description\n     * The value returned from {@link Hooks.processKinds} hook.\n     * null if the products aren't loaded.\n     *\n     * @name ProductSummaryController#productKinds\n     * @type {any}\n     */\n    productKinds: null,\n    /**\n     * @description\n     * Loading status of the products\n     *\n     * @name ProductSummaryController#isProductLoading\n     * @type {boolean}\n     */\n    isProductLoading: false,\n    /**\n     * @description\n     * The error encountered when attempting to fetch the products from the model\n     *\n     * @name ProductSummaryController#productKindsError\n     * @type {ModelError}\n     */\n    productKindsError: null,\n    /**\n     * @description\n     * Checks the list is empty or not\n     *\n     * @name ProductSummaryController#hasProducts\n     * @type {function}\n     * @returns {boolean} false if product list is empty\n     */\n    hasProducts: () => !!$ctrl.productKinds.length,\n    /**\n     * @description\n     * The total balance for the products\n     *\n     * @name ProductSummaryController#total\n     * @type {TotalBalance}\n     */\n    total: null,\n    selectProduct,\n    selectProducts,\n    $onInit,\n    viewManageProducts,\n  });\n}\n\n/**\n * @typedef {Object} TotalBalance\n * @property {string} aggregatedBalance - aggregated balance\n * @property {string} currency - currency code\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/controller.js","import { E_AUTH, E_CONNECTIVITY, E_USER, E_UNEXPECTED } from 'lib-bb-model-errors';\n\n/**\n * @name errorMessages\n *\n * @description\n * Error messages keys for connectivity, user, auth and unexpected errors.\n *\n * @type {object}\n */\nexport const errorMessages = {\n  [E_AUTH]: 'model.error.auth',\n  [E_CONNECTIVITY]: 'model.error.connectivity',\n  [E_USER]: 'model.error.user',\n  [E_UNEXPECTED]: 'model.error.unexpected',\n};\n\n/**\n * Widget intent enum\n * @type {object}\n */\nexport const Intent = {\n  VIEW_PRODUCT_SUMMARY: 'intent.bb.product.summary.view',\n  VIEW_MANAGE_PRODUCTS: 'intent.bb.manage.products.view',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/constants.js","export default {\n  /**\n   * Triggered when product is selected.\n   * @event bb.event.product.selected\n   * @type {Product}\n   */\n  PRODUCT_SELECTED: 'bb.event.product.selected',\n  /**\n   * Triggered when multiple products are selected.\n   * @event bb.event.products.selected\n   * @type {Product[]}\n   */\n  PRODUCTS_SELECTED: 'bb.event.products.selected',\n  REFLOW_TRIGGERED: 'bb.event.product.accounts.reflow',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/message.js","// There is only 1 hook, otherwise there would be more named exports\n/* eslint-disable import/prefer-default-export */\n\n/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bb-product-summary-ng\n */\n\n/**\n * @name Hooks#processKinds\n * @type {function}\n *\n * @description\n * Hook for processing product kinds after initialization.\n * Assigned to [$ctrl.productKinds]{@link ProductSummaryController#productKinds}\n *\n * @param kinds {ProductKind[]} ProductKinds to process\n * @returns {any} Depends on hook implementation.\n */\nexport function processKinds(kinds) {\n  return kinds;\n}\n\n/**\n * @name Hooks#processProductSelected\n * @type {function}\n *\n * @description\n * Hook for processing selected product after selection update\n * Assigned to [$ctrl.productSelected]{@link ProductSummaryController#productSelected}\n *\n * @param product {Product} Product to process\n * @returns {any} Depends on hook implementation.\n */\nexport function processProductSelected(product) {\n  return product;\n}\n\n/**\n * @name Hooks#processProductsSelected\n * @type {function}\n *\n * @description\n * Hook for processing selected array of products after selection update\n * Assigned to [$ctrl.productsSelected]{@link ProductSummaryController#productsSelected}\n *\n * @param products {Product[]} Products to process\n * @returns {any} Depends on hook implementation.\n */\nexport function processProductsSelected(products) {\n  return products;\n}\n\n/**\n * @name Hooks#processExtendedProduct\n * @type {function}\n *\n * @description\n * Hook for processing extended product after selection update\n * Assigned to [$ctrl.extendedProduct]{@link ProductSummaryController#extendedProduct}\n *\n * @param product {Product} Product to process\n * @returns {any} Depends on hook implementation.\n */\nexport function processExtendedProduct(product) {\n  return product;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-product-summary-ng/scripts/default-hooks.js"],"sourceRoot":""}