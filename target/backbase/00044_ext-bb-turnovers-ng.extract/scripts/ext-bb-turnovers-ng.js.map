{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap ba9372d13c966203e28a?ccfa","webpack:///./ext-bb-turnovers-ng/model.xml","webpack:///external \"vendor-bb-angular-ng-aria\"?9d0e","webpack:///external \"ui-bb-i18n-ng\"?dc01","webpack:///external \"ui-bb-substitute-error-ng\"?f57a","webpack:///external \"ui-bb-format-amount\"?d3d6","webpack:///external \"ui-bb-chartjs-chart-bar-ng\"?9799","webpack:///external \"ui-bb-empty-state-ng\"?88ee","webpack:///external \"lib-bb-styles\"?c155","webpack:///./ext-bb-turnovers-ng/scripts/index.js","webpack:///external \"ui-bb-dropdown-select\"","webpack:///./ext-bb-turnovers-ng/scripts/hooks.js","webpack:///./ext-bb-turnovers-ng/scripts/helpers.js","webpack:///./ext-bb-turnovers-ng/scripts/constants.js"],"names":["dependencyKeys","hooks","helpers","events","defaultPeriodStart","defaultInterval","interval","MONTH","onTurnoversUpdate","startDate","Date","params","periodStartDate","setDate","intervalStartDay","Object","assign","toISOString","slice","processTurnoverSeries","series","data","datasets","forEach","dataset","index","datasetColor","backgroundColor","hoverBackgroundColor","reverse","original","updated","processLoadError","err","getPeriods","periodToDate","period","date","intervalCount","duration","getDate","setFullYear","getFullYear","setMonth","getMonth","getDefaultPeriod","periods","Math","max","map","item","default","indexOf","context","dateFilter","$filter","currencyFilter","i18nFilter","getSymbol","code","getRule","symbol","onSmallScreen","initialBarPercentage","tooltipContentCache","isScreenChanged","smallScreen","changed","buildTooltipContent","creditAmount","amount","currencyCode","debitAmount","balance","getBreakingPoint","parseFloat","layoutBreak","getTooltipArrowHeight","arrowOuter","getYAxisLabelPadding","axisY","isSmallScreen","window","innerWidth","setTooltipPosition","element","tooltip","chart","dataPoint","dataPoints","barWidth","getDatasetMeta","datasetIndex","_model","width","positionX","canvas","offsetLeft","floor","x","ceil","clientWidth","positionY","caretY","clientHeight","adjustmentClass","chartArea","left","arrowNear","right","arrowFar","style","top","afterContentReady","classes","additionalClass","className","opacity","onPeriodChange","ctrl","currentPeriod","periodEndDate","onPeriodStartDateChanged","chartPlugins","afterInit","chartInstance","config","label","legendEl","document","createElement","legend","innerHTML","generateLegend","parentNode","appendChild","beforeUpdate","scales","options","xAxes","categoryPercentage","count","labels","length","smallScreenBarPercentage","min","yAxes","display","afterUpdate","makeOffset","w","meta","metaData","i","model","customizeTooltip","pointIndex","defaultClasses","turnovers","$compile","angular","contents","$scope","setTimeout","formatX","ticks","tick","formatY","chartOptions","fontColor","axisX","fontFamily","axisBase","gridLines","drawBorder","tickMarkLength","maxTicksLimit","padding","hasDataToDraw","PERIODS","DATASET_LABELS","BAR_COUNT_BREAK_POINT","MAX_Y_TICKS","CSS_SELECTORS"],"mappings":"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","file":"ext-bb-turnovers-ng/scripts/ext-bb-turnovers-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-format-amount\"), require(\"ui-bb-chartjs-chart-bar-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"lib-bb-styles\"), require(\"ui-bb-dropdown-select\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bb-turnovers-ng\", [\"vendor-bb-angular-ng-aria\", \"ui-bb-i18n-ng\", \"ui-bb-substitute-error-ng\", \"ui-bb-format-amount\", \"ui-bb-chartjs-chart-bar-ng\", \"ui-bb-empty-state-ng\", \"lib-bb-styles\", \"ui-bb-dropdown-select\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bb-turnovers-ng\"] = factory(require(\"vendor-bb-angular-ng-aria\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bb-substitute-error-ng\"), require(\"ui-bb-format-amount\"), require(\"ui-bb-chartjs-chart-bar-ng\"), require(\"ui-bb-empty-state-ng\"), require(\"lib-bb-styles\"), require(\"ui-bb-dropdown-select\"));\n\telse\n\t\troot[\"ext-bb-turnovers-ng\"] = factory(root[\"vendor-bb-angular-ng-aria\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bb-substitute-error-ng\"], root[\"ui-bb-format-amount\"], root[\"ui-bb-chartjs-chart-bar-ng\"], root[\"ui-bb-empty-state-ng\"], root[\"lib-bb-styles\"], root[\"ui-bb-dropdown-select\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_16__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ba9372d13c966203e28a","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bb-turnovers-ng/model.xml\n// module id = 0\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-ng-aria\"\n// module id = 2\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 3\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-substitute-error-ng\"\n// module id = 4\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount\"\n// module id = 5\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-chartjs-chart-bar-ng\"\n// module id = 7\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-empty-state-ng\"\n// module id = 8\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-styles\"\n// module id = 12\n// module chunks = 0 1","/**\n * @module ext-bb-turnovers-ng\n *\n * @description\n * Default extension for widget-bb-turnovers-ng\n *\n * @requires vendor-bb-angular-ng-aria\n * @requires ui-bb-i18n-ng\n * @requires ui-bb-substitute-error-ng\n * @requires ui-bb-dropdown-select\n * @requires ui-bb-format-amount\n * @requires ui-bb-chartjs-chart-bar-ng\n * @requires ui-bb-empty-state-ng\n */\nimport ngAriaModuleKey from 'vendor-bb-angular-ng-aria';\nimport i18nNgKey from 'ui-bb-i18n-ng';\nimport uiBbSubstituteErrorNgKey from 'ui-bb-substitute-error-ng';\nimport uiBbDropdownSelect from 'ui-bb-dropdown-select';\nimport uiBbFormatAmount from 'ui-bb-format-amount';\nimport uiBbChartjsChartBarNgKey from 'ui-bb-chartjs-chart-bar-ng';\nimport uiBbEmptyStateKey from 'ui-bb-empty-state-ng';\n\nimport extHooks from './hooks';\nimport extHelpers from './helpers';\n\nexport const dependencyKeys = [\n  i18nNgKey,\n  ngAriaModuleKey,\n  uiBbSubstituteErrorNgKey,\n  uiBbDropdownSelect,\n  uiBbFormatAmount,\n  uiBbChartjsChartBarNgKey,\n  uiBbEmptyStateKey,\n];\n\nexport const hooks = extHooks;\nexport const helpers = extHelpers;\nexport const events = {};\n\n/**\n * Turnovers specific BBSeries object\n * @typedef {object} TurnoversBBSeries\n * @property {string[]} labels Array of x axis labels\n * @property {TurnoversDataset[]} datasets Array of all y axis value datasets\n * @property {module:model-bb-turnovers-ng.Turnover} original Original turnover object\n * @property {boolean} updated Flag that signals that series are processed by hook\n */\n\n/**\n * Turnovers specific dataset object for y axis\n * @typedef {object} TurnoversDataset\n * @extends module:model-bb-turnovers-ng.Dataset\n * @property {string} backgroundColor Background color of bars that represent this dataset\n * @property {string} hoverBackgroundColor Hover color of bars that represent this dataset\n */\n\n/**\n * Settings object with options available for bar chart.\n * More info {@link http://www.chartjs.org/docs/latest/charts/bar.html}\n * @typedef {object} ChartjsSettings\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-turnovers-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-dropdown-select\"\n// module id = 16\n// module chunks = 1","import getStyle from 'lib-bb-styles';\nimport { periodToDate, getDefaultPeriod } from './helpers';\n\n/**\n * @name defaultPeriodStart\n * @type {function}\n *\n * @description\n * Sets period start property on init\n *\n * @returns {string} Start period string in format yyyy-mm-dd\n */\nconst defaultPeriodStart = () => periodToDate(getDefaultPeriod());\n\n/**\n * @name defaultInterval\n * @type {function}\n *\n * @description\n * Sets interval property on init\n *\n * @param {module:widget-bb-turnovers-ng.Interval} interval Available intervals\n * @returns {string} One of the available intervals\n */\nconst defaultInterval = (interval) => interval.MONTH;\n\n/**\n * @name onTurnoversUpdate\n * @type {function}\n *\n * @description\n * Process parameters before they are sent to the model's load method\n *\n * @param {object} params to process\n * @returns {object} processed params\n */\nconst onTurnoversUpdate = params => {\n  // make sure that period start date covers the whole month at the beginning\n  // other intervals are not covered because extension doesn't have them as an option\n  const startDate = new Date(params.periodStartDate);\n  startDate.setDate(params.intervalStartDay);\n  Object.assign(params, {\n    periodStartDate: startDate.toISOString().slice(0, 10),\n  });\n\n  return params;\n};\n\n/**\n * @name processTurnoverSeries\n * @type {function}\n *\n * @description\n * Default hook for turnovers chart series object post processing\n *\n * @param {module:model-bb-turnovers-ng.BBSeries} series chart series data\n * @param {module:model-bb-turnovers-ng.Turnover} data original turnover object\n * @returns {TurnoversBBSeries} processed series\n */\nconst processTurnoverSeries = (series, data) => {\n  series.datasets.forEach((dataset, index) => {\n    const datasetColor = getStyle(`.chart-bar-dataset-${index}`, 'color');\n    Object.assign(dataset, {\n      backgroundColor: datasetColor,\n      hoverBackgroundColor: datasetColor,\n    });\n  });\n\n  return Object.assign(series, {\n    datasets: series.datasets.reverse(),\n    original: data,\n    updated: true,\n  });\n};\n\n/**\n * @name processLoadError\n * @type {function}\n *\n * @description\n * Overwrite the default hook and don't return passed error\n *\n * @param {error} The error passed\n * @returns {string} The actual error\n */\nconst processLoadError = err => err;\n\nexport default {\n  defaultPeriodStart,\n  defaultInterval,\n  onTurnoversUpdate,\n  processTurnoverSeries,\n  processLoadError,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-turnovers-ng/scripts/hooks.js","/* eslint no-underscore-dangle: [2, { \"allow\": [\"_model\"] }]*/\n/* global angular, window, document */\nimport getStyle from 'lib-bb-styles';\nimport {\n  PERIODS,\n  DATASET_LABELS,\n  BAR_COUNT_BREAK_POINT,\n  MAX_Y_TICKS,\n  CSS_SELECTORS,\n} from './constants';\n\n/**\n * @description\n * Retrieves list of all periods\n *\n * @name getPeriods\n * @type {function}\n * @returns {Period[]} List of all available periods\n */\nexport const getPeriods = () => PERIODS;\n\n/**\n * @description\n * Checks period object and converts it into format needed\n * for request (yyyy-mm-dd)\n *\n * @name periodToDate\n * @type {function}\n * @param {Period} period\n * @returns {string} Formatted date\n */\nexport const periodToDate = (period) => {\n  const date = new Date();\n  // current date already covers one period\n  const intervalCount = period.duration - 1;\n  switch (period.interval) {\n    case 'DAY':\n      date.setDate(date.getDate() - intervalCount);\n      break;\n    case 'WEEK':\n      date.setDate(date.getDate() - (intervalCount * 7));\n      break;\n    case 'YEAR':\n      date.setFullYear(date.getFullYear() - intervalCount);\n      break;\n    case 'MONTH':\n    default:\n      date.setMonth(date.getMonth() - intervalCount);\n      break;\n  }\n\n  return date.toISOString().slice(0, 10);\n};\n\n/**\n * @description\n * Finds default period from period list\n *\n * @name getDefaultPeriod\n * @type {function}\n * @returns {Period} Period marked as default\n */\nexport const getDefaultPeriod = () => {\n  const periods = getPeriods();\n  const index = Math.max(periods.map(item => item.default).indexOf(true), 0);\n  return periods[index];\n};\n\nconst helpers = (context) => {\n  const dateFilter = context.$filter('date');\n  const currencyFilter = context.$filter('currency');\n  const i18nFilter = context.$filter('i18n');\n  const getSymbol = (code) => context.getRule(code).symbol || code;\n\n  /**\n   * @description\n   * Keeps state of last screen mode\n   *\n   * @name helpers#onSmallScreen\n   * @type {boolean}\n   * @inner\n   */\n  let onSmallScreen = false;\n\n  /**\n   * @description\n   * Keeps state of initial bar percentage\n   * This value gets increased for small screens and reverted back\n   * on resize\n   *\n   * @name helpers#initialBarPercentage\n   * @type {number}\n   * @inner\n   */\n  let initialBarPercentage = 0;\n\n  /**\n   * @description\n   * To lower impact on performance, tooltip content will be stored in cache array once\n   * it is compiled. Both datasets present the same tooltip for same point index, so\n   * having cache per index is enough.\n   *\n   * @name helpers#tooltipContentCache\n   * @type {string[]}\n   * @inner\n   */\n  let tooltipContentCache = [];\n\n  /**\n   * @description\n   * Checks if screen mode has changed from last time it was checked\n   *\n   * @name helpers#isScreenChanged\n   * @type {function}\n   * @inner\n   * @param {boolean} smallScreen\n   * @returns {boolean}\n   */\n  const isScreenChanged = (smallScreen) => {\n    const changed = smallScreen !== onSmallScreen;\n    if (changed) {\n      onSmallScreen = smallScreen;\n    }\n\n    return changed;\n  };\n\n  /**\n   * @description\n   * Builds HTML content of the tooltip\n   *\n   * @name helpers#buildTooltipContent\n   * @type {function}\n   * @inner\n   * @param {module:model-bb-turnovers-ng.TurnoverItem} item Selected item\n   * @returns {string}\n   */\n  const buildTooltipContent = (item) => `\n    <div class=\"row\">\n      <span class=\"col-xs-4\">\n        ${i18nFilter('turnovers.label.incoming')}\n      </span>\n      <span class=\"col-xs-8 text-right\">\n        <ui-bb-format-amount class=\"amount-regular-color\"\n          data-amount=\"${item.creditAmount.amount}\"\n          data-currency=\"'${item.creditAmount.currencyCode}'\"\n          data-wrap\n          data-show-plus-sign>\n        </ui-bb-format-amount>\n      </span>\n    </div>\n    <div class=\"row\">\n      <span class=\"col-xs-4\">\n        ${i18nFilter('turnovers.label.outgoing')}\n      </span>\n      <span class=\"col-xs-8 text-right\">\n        <ui-bb-format-amount class=\"amount-regular-color\"\n          data-amount=\"${item.debitAmount.amount * -1}\"\n          data-currency=\"'${item.debitAmount.currencyCode}'\"\n          data-wrap>\n        </ui-bb-format-amount>\n      </span>\n    </div>\n    <hr class=\"chart-tooltip-divider\">\n    <div class=\"row\">\n      <span class=\"col-xs-4\">\n        <strong>${i18nFilter('turnovers.label.difference')}</strong>\n      </span>\n      <span class=\"col-xs-8 text-right text-${item.balance.amount < 0 ? 'danger' : 'success'}\">\n        <ui-bb-format-amount class=\"amount-regular-color\"\n          data-amount=\"${item.balance.amount}\"\n          data-currency=\"'${item.balance.currencyCode}'\"\n          data-wrap>\n        </ui-bb-format-amount>\n      </span>\n    </div>\n  `;\n\n  /**\n   * @description\n   * Tries to get breaking point between small and medium screen width\n   * Returns 0 if selector is not correct\n   *\n   * @name helpers#getBreakingPoint\n   * @type {function}\n   * @inner\n   * @returns {number}\n   */\n  const getBreakingPoint = () => parseFloat(getStyle(CSS_SELECTORS.layoutBreak, 'width') || 0);\n\n  /**\n   * @description\n   * Tries to get height of the tooltip arrow\n   * Returns 0 if selector is not correct\n   *\n   * @name helpers#getTooltipArrowHeight\n   * @type {function}\n   * @inner\n   * @returns {number}\n   */\n  const getTooltipArrowHeight = () =>\n    parseFloat(getStyle(CSS_SELECTORS.arrowOuter, 'borderWidth')) || 0;\n\n  /**\n   * @description\n   * Tries to get Y axis label padding\n   * Returns 0 if selector is not correct\n   *\n   * @name helpers#getYAxisLabelPadding\n   * @type {function}\n   * @inner\n   * @returns {number}\n   */\n  const getYAxisLabelPadding = () =>\n    parseFloat(getStyle(CSS_SELECTORS.axisY, 'padding')) || 0;\n\n  /**\n   * @description\n   * Checks if current window width is lower than small screen break point\n   *\n   * @name helpers#isSmallScreen\n   * @type {function}\n   * @inner\n   * @returns {boolean}\n   */\n  const isSmallScreen = () => window.innerWidth <= getBreakingPoint();\n\n  /**\n   * @description\n   * Calculates absolute position of the tooltip, based on\n   * bar height and chart dimensions and assigns them to the\n   * tooltip DOM element\n   *\n   * @name helpers#setTooltipPosition\n   * @type {function}\n   * @inner\n   * @param {object} element in DOM\n   * @param {object} tooltip object containing tooltip related data like\n   * positions, current data point, styling from chart options, etc.\n   * @param {object} chart instance\n   * @returns {string} CSS class that needs to be appended to tooltip's arrow\n   */\n  const setTooltipPosition = (element, tooltip, chart) => {\n    const dataPoint = tooltip.dataPoints[0];\n    const barWidth = chart.getDatasetMeta(dataPoint.datasetIndex)\n      .data[dataPoint.index]._model.width;\n    let positionX = (chart.canvas.offsetLeft + Math.floor(dataPoint.x) +\n      Math.floor((dataPoint.datasetIndex === 0 ? 1 : -1) * (barWidth / 2))) -\n      Math.ceil(element.clientWidth / 2);\n    const positionY = tooltip.caretY - getTooltipArrowHeight() - element.clientHeight;\n\n    // in case when tooltip is outside chart area, it needs to be moved inside\n    let adjustmentClass = '';\n    if (positionX < chart.chartArea.left) {\n      adjustmentClass = CSS_SELECTORS.arrowNear;\n      positionX += element.clientWidth / 4;\n    } else if (positionX + element.clientWidth > chart.chartArea.right) {\n      adjustmentClass = CSS_SELECTORS.arrowFar;\n      positionX -= element.clientWidth / 4;\n    }\n\n    Object.assign(element.style, {\n      left: `${positionX}px`,\n      top: `${Math.max(0, positionY)}px`,\n    });\n\n    return adjustmentClass;\n  };\n\n  /**\n   * @description\n   * Post processing of tooltip's content\n   *\n   * @name helpers#afterContentReady\n   * @type {function}\n   * @inner\n   * @param {object} element in DOM\n   * @param {object} tooltip object containing tooltip related data like\n   * positions, current data point, styling from chart options, etc.\n   * @param {object} chart instance\n   * @param {string} classes Default CSS classes of tooltip element\n   */\n  const afterContentReady = (element, tooltip, chart, classes) => {\n    // calculate element's position and determine if some additional CSS class is needed\n    const additionalClass = setTooltipPosition(element, tooltip, chart);\n    Object.assign(element, { className: `${classes} ${additionalClass}` });\n    Object.assign(element.style, { opacity: 1 });\n  };\n\n  return {\n    periodToDate,\n    getPeriods,\n    getDefaultPeriod,\n\n    /**\n     * @description\n     * Callback on period value change. This function makes sure\n     * that controller properties are updated accordingly and calls\n     * controller's onPeriodChanged listener\n     *\n     * @name helpers#onPeriodChange\n     * @type {function}\n     * @param {TurnoversController} ctrl\n     */\n    onPeriodChange: (ctrl) => {\n      Object.assign(ctrl, { periodStartDate: periodToDate(ctrl.currentPeriod) });\n      Object.assign(ctrl, { periodEndDate: new Date().toISOString().slice(0, 10) });\n      ctrl.onPeriodStartDateChanged();\n    },\n\n    /**\n     * @description\n     * Array of plugins used to transform Chart.js rendering in the extension\n     *\n     * @name chartPlugins\n     * @type {array}\n     */\n    chartPlugins: [\n      {\n        afterInit: (chartInstance) => {\n          // append dataset labels\n          chartInstance.config.data.datasets.forEach((dataset, index) => {\n            Object.assign(dataset, {\n              label: i18nFilter(DATASET_LABELS[index]),\n            });\n          });\n\n          const legendEl = document.createElement('div');\n          legendEl.className = CSS_SELECTORS.legend;\n          legendEl.innerHTML = chartInstance.generateLegend();\n          chartInstance.canvas.parentNode.appendChild(legendEl);\n        },\n        beforeUpdate: (chartInstance) => {\n          tooltipContentCache = [];\n          const scales = chartInstance.config.options.scales;\n          if (!initialBarPercentage) {\n            initialBarPercentage = scales.xAxes[0].categoryPercentage;\n          }\n\n          const smallScreen = isSmallScreen();\n          const data = chartInstance.config.data;\n          const count = (data && data.labels) ? data.labels.length : 0;\n          const smallScreenBarPercentage = Math.min(1, count >= BAR_COUNT_BREAK_POINT ?\n            initialBarPercentage + 0.2 : initialBarPercentage + 0.1);\n\n          if (isScreenChanged(smallScreen)) {\n            chartInstance.config.data.datasets.reverse();\n          } else if (chartInstance.config.data.updated && smallScreen) {\n            // after data reload, we need immediate reverse for small screens\n            chartInstance.config.data.datasets.reverse();\n          }\n\n          scales.yAxes[0].display = !smallScreen;\n          scales.xAxes[0].categoryPercentage =\n            smallScreen ? smallScreenBarPercentage : initialBarPercentage;\n          data.updated = false;\n        },\n        afterUpdate: (chartInstance) => {\n          if (!isSmallScreen()) {\n            return;\n          }\n\n          const makeOffset = (datasetIndex, x, w) => {\n            const meta = chartInstance.getDatasetMeta(datasetIndex);\n            if (!meta) {\n              return;\n            }\n\n            const metaData = meta.data;\n            for (let i = 0; i < metaData.length; i++) {\n              const model = metaData[i]._model;\n              model.x += model.width * x;\n              model.width *= w;\n            }\n          };\n\n          makeOffset(0, 0.5, 1.43);\n          makeOffset(1, -0.5, 2);\n        },\n      },\n    ],\n\n    /**\n     * @description\n     * Creates custom tooltip content and places tooltip element on top\n     * of the currently active bar\n     *\n     * @name customizeTooltip\n     * @type {function}\n     *\n     * @param {object} tooltip object containing tooltip related data like\n     * positions, current data point, styling from chart options, etc.\n     * @param {object} element in DOM\n     * @param {TurnoversBBSeries} data array of data used to draw the chart\n     * @param {object} chart instance\n     */\n    customizeTooltip: (tooltip, element, data, chart) => {\n      const pointIndex = tooltip.dataPoints[0].index;\n      const defaultClasses =\n        'chart-tooltip chart-tooltip-wide chart-tooltip-default bb-arrow-bottom hidden-xs';\n      Object.assign(element, { className: defaultClasses });\n      // do not show element until it's content is ready\n      Object.assign(element.style, { opacity: 0 });\n\n      // if content is cached skip building and compilation and go straight to post processing\n      if (tooltipContentCache[pointIndex]) {\n        Object.assign(element, { innerHTML: tooltipContentCache[pointIndex] });\n        afterContentReady(element, tooltip, chart, defaultClasses);\n        return;\n      }\n\n      // get data object for active point\n      const item = data.original.turnovers[tooltip.dataPoints[0].index];\n      Object.assign(element, { innerHTML: buildTooltipContent(item) });\n      // compile tooltip's content\n      context.$compile(angular.element(element).contents())(chart.$scope);\n      // use timeout to get real element dimensions once ui component is compiled\n      setTimeout(() => {\n        afterContentReady(element, tooltip, chart, defaultClasses);\n        // cache the content\n        tooltipContentCache[pointIndex] = element.innerHTML;\n      }, 0);\n    },\n\n    /**\n     * @description\n     * X axis tick formatter\n     *\n     * @name formatX\n     * @type {function}\n     *\n     * @param {array} ticks Array of scale ticks\n     * @param {TurnoversBBSeries} data Chart series\n     * @returns {array} Formatted array of ticks\n     */\n    formatX: (ticks) => ticks.map(tick => dateFilter(tick, 'MMM')),\n\n    /**\n     * @description\n     * Y axis tick formatter\n     *\n     * @name formatY\n     * @type {function}\n     *\n     * @param {array} ticks Array of scale ticks\n     * @param {TurnoversBBSeries} data Chart series\n     * @returns {array} Formatted array of ticks\n     */\n    formatY: (ticks, data) => {\n      if (!data) {\n        return [];\n      }\n\n      // the same currency is being used for all ticks\n      const currencyCode = data.original.turnovers[0].balance.currencyCode;\n      return ticks.map(tick => {\n        if (parseFloat(tick) === 0) {\n          return null;\n        }\n        return currencyFilter(tick, getSymbol(currencyCode), 0);\n      });\n    },\n\n    /**\n     * @description\n     * Object with chart options that need to be overriden\n     *\n     * @name chartOptions\n     * @type {ChartjsSettings}\n     */\n    chartOptions: {\n      scales: {\n        xAxes: [{\n          ticks: {\n            fontColor: getStyle(CSS_SELECTORS.axisX, 'color'),\n            fontFamily: getStyle(CSS_SELECTORS.axisBase, 'fontFamily'),\n          },\n        }],\n        yAxes: [{\n          gridLines: {\n            display: true,\n            drawBorder: false,\n            tickMarkLength: 0,\n          },\n          ticks: {\n            min: 0,\n            maxTicksLimit: MAX_Y_TICKS,\n            padding: getYAxisLabelPadding(),\n            fontColor: getStyle(CSS_SELECTORS.axisY, 'color'),\n            fontFamily: getStyle(CSS_SELECTORS.axisBase, 'fontFamily'),\n          },\n        }],\n      },\n    },\n\n    /**\n     * @description\n     * Checks chart series object to see if there are actual chart points to draw\n     *\n     * @name hasDataToDraw\n     * @type {function}\n     *\n     * @param {TurnoversBBSeries} series Chart series\n     * @returns {boolean}\n     */\n    hasDataToDraw: (series) =>\n      series && series.datasets && series.datasets[0] &&\n      series.datasets[0].data && series.datasets[0].data.length,\n  };\n};\n\nexport default helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-turnovers-ng/scripts/helpers.js","/* eslint-disable import/prefer-default-export */\n/**\n * @name PERIODS\n * @description\n * Periods definition array\n * @type {Period[]}\n */\nexport const PERIODS = [\n  {\n    interval: 'MONTH',\n    duration: 6,\n    label: 'turnovers.label.duration.month.six',\n    default: true,\n  },\n  {\n    interval: 'MONTH',\n    duration: 12,\n    label: 'turnovers.label.duration.month.twelve',\n  },\n];\n\n/**\n * @name DATASET_LABELS\n * @description\n * Array of dataset labels\n * @type {string[]}\n */\nexport const DATASET_LABELS = [\n  'turnovers.label.incoming',\n  'turnovers.label.outgoing',\n];\n\n/**\n * @name BAR_COUNT_BREAK_POINT\n * @description\n * Number of bars from which they should be put closer together\n * @type {number}\n */\nexport const BAR_COUNT_BREAK_POINT = 10;\n\n/**\n * @name MAX_Y_TICKS\n * @description\n * Maximum number of ticks on Y axis\n * @type {number}\n */\nexport const MAX_Y_TICKS = 7;\n\n/**\n * @name CSS_SELECTORS\n * @description\n * Object with all selectors needed for correct styling of canvas parts\n * @type {CSS}\n */\nexport const CSS_SELECTORS = {\n  axisBase: '.chart-bar-axis',\n  axisX: '.chart-bar-axis-x',\n  axisY: '.chart-bar-axis-y',\n  arrowOuter: '.chart-tooltip-default.bb-arrow-bottom::before',\n  layoutBreak: '.chart-layout-change',\n  arrowNear: 'bb-arrow-near',\n  arrowFar: 'bb-arrow-far',\n  legend: 'chart-bar-legend',\n};\n\n/**\n * @typedef {object} CSS\n * @description\n * Object that containes all CSS selectors needed to style canvas parts\n *\n * @property {string} axisBase Axis CSS selector prefix\n * @property {string} axisX X axis CSS selector\n * @property {string} axisY Y axis CSS selector\n * @property {string} arrowOuter Chart's tooltip arrow CSS selector (outer)\n * @property {string} layoutBreak Selector for getting breaking point between\n * small and medium screen\n * @property {string} arrowNear CSS class for tooltip's arrow moved to the front\n * @property {string} arrowFar CSS class for tooltip's arrow moved to the back\n * @property {string} legend CSS class for legend wrapper\n */\n\n/**\n * @typedef {object} Period\n * @description\n * Object used to create list of period options\n *\n * @property {string} interval Interval name\n * @property {number} duration Number of intervals\n * (for creation period of multiple days, weeks, months...)\n * @property {string} label Key used to generate localized title for the option\n * @property {?boolean} default Optional flag to mark default period.\n * If there is no default, first period will be shown\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bb-turnovers-ng/scripts/constants.js"],"sourceRoot":""}