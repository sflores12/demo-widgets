{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*****","webpack:///webpack/bootstrap e9a8cf4452f4666f063d?191d*****","webpack:///./widget-bbm-personal-profile-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*","webpack:///external \"lib-bb-widget-extension-ng\"?b547","webpack:///external \"model-bb-personal-profile-ng\"?b3aa","webpack:///external \"lib-bb-widget-ng\"?84ad","webpack:///external \"lib-bb-event-bus-ng\"?8215","webpack:///external \"lib-bb-intent-ng\"?add1","webpack:///./widget-bbm-personal-profile-ng/scripts/index.js","webpack:///external \"lib-bb-storage-ng\"","webpack:///./widget-bbm-personal-profile-ng/scripts/controllers/details.controller.js","webpack:///./widget-bbm-personal-profile-ng/scripts/constants.js","webpack:///./widget-bbm-personal-profile-ng/scripts/controllers/form.controller.js","webpack:///./widget-bbm-personal-profile-ng/scripts/view-model.js","webpack:///./widget-bbm-personal-profile-ng/scripts/default-hooks.js"],"names":["defaultHooks","viewModelKey","hooksKey","module","factory","controller","name","DetailsController","model","hooks","bus","widget","bbIntent","viewModel","ctrl","intents","showAddPhoneForm","save","then","showAddEmailForm","showEditPhoneForm","selectPhoneByIndex","index","showEditEmailForm","selectEmailByIndex","loadUser","setUserLoading","loadUsersProfile","processUser","setUserError","setUser","user","catch","error","$onInit","publish","CXP_ITEM_LOADED","id","getId","BB_ITEM_LOADED","create","SHOW_ADD_EMAIL_FORM","SHOW_ADD_PHONE_FORM","SHOW_EDIT_EMAIL_FORM","SHOW_EDIT_PHONE_FORM","handle","SHOW_PERSONAL_PROFILE_DETAILS","fetch","init","Object","defineProperty","get","state","assign","MODULE_KEY","DETAILS_CONTROLLER_KEY","FORM_CONTROLLER_KEY","StorageKey","PERSONAL_PROFILE_STATE","Event","PHONE_DELETE_START","PHONE_DELETE_DONE","PHONE_DELETE_FAILED","PHONE_CREATE_START","PHONE_CREATE_DONE","PHONE_CREATE_FAILED","PHONE_EDIT_START","PHONE_EDIT_DONE","PHONE_EDIT_FAILED","EMAIL_DELETE_START","EMAIL_DELETE_DONE","EMAIL_DELETE_FAILED","EMAIL_CREATE_START","EMAIL_CREATE_DONE","EMAIL_CREATE_FAILED","EMAIL_EDIT_START","EMAIL_EDIT_DONE","EMAIL_EDIT_FAILED","Intent","FormController","initializeAddPhoneFormState","phone","value","primary","setFormPhoneState","initializeAddEmailFormState","email","setFormEmailState","setupEditPhoneFormState","getSelectedPhone","getUserData","angular","copy","phones","setupEditEmailFormState","getSelectedEmail","emails","resetSelectedPhoneIfNeeded","isPhoneSelected","resetSelectedPhone","resetSelectedEmailIfNeeded","isEmailSelected","resetSelectedEmail","updateUser","setFormLoading","updateUsersProfile","updatedUser","setFormError","createEmail","push","showPersonalProfileDetails","editEmail","splice","updateUserEmail","getFormData","createPhone","editPhone","updateUserPhone","deleteUserPhone","deleteUserEmail","bbStorage","getInitialState","data","loading","form","selectedPhone","selectedEmail","setLoading","target","setError","getItem","setItem"],"mappings":"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","file":"widget-bbm-personal-profile-ng/scripts/widget-bbm-personal-profile-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-personal-profile-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-storage-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bbm-personal-profile-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-extension-ng\", \"model-bb-personal-profile-ng\", \"lib-bb-widget-ng\", \"lib-bb-event-bus-ng\", \"lib-bb-intent-ng\", \"lib-bb-storage-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bbm-personal-profile-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-personal-profile-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-storage-ng\"));\n\telse\n\t\troot[\"widget-bbm-personal-profile-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-extension-ng\"], root[\"model-bb-personal-profile-ng\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-storage-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_32__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e9a8cf4452f4666f063d","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bbm-personal-profile-ng/model.xml\n// module id = 0\n// module chunks = 6","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 19\n// module chunks = 4 5 6","module.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 24\n// module chunks = 5 6","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-personal-profile-ng\"\n// module id = 25\n// module chunks = 5 6","module.exports = __WEBPACK_EXTERNAL_MODULE_26__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 26\n// module chunks = 5 6","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 27\n// module chunks = 5 6","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 28\n// module chunks = 5 6","/**\n * @module widget-bbm-personal-profile-ng\n *\n * @description\n * Mobile Personal Profile widget.\n *\n * @borrows module:model-bb-personal-profile-ng.User as User\n * @borrows module:lib-bb-model-errors.ModelError as ModelError\n *\n * @example\n *  <div ng-controller=\"DetailsController as $ctrl\">\n *    <ul>\n *       <li>{{ $ctrl.state.user.firstName }}</li>\n *    </ul>\n *  </div>\n */\n\nimport angular from 'vendor-bb-angular';\n\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport eventBusModuleKey, { eventBusKey } from 'lib-bb-event-bus-ng';\nimport bbStorageModuleKey, { bbStorageServiceKey } from 'lib-bb-storage-ng';\nimport intentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\n\nimport modelPersonalProfileModuleKey, {\n  modelPersonalProfileKey,\n} from 'model-bb-personal-profile-ng';\n\nimport DetailsController from './controllers/details.controller';\nimport FormController from './controllers/form.controller';\n\nimport {\n  MODULE_KEY,\n  DETAILS_CONTROLLER_KEY,\n  FORM_CONTROLLER_KEY,\n} from './constants';\n\nimport ViewModel from './view-model';\n\nimport * as defaultHooks from './default-hooks';\n\nconst viewModelKey = `${MODULE_KEY}:viewModel`;\nconst hooksKey = `${MODULE_KEY}:hooks`;\n\nexport default angular\n  .module(MODULE_KEY, [\n    modelPersonalProfileModuleKey,\n    widgetModuleKey,\n    eventBusModuleKey,\n    bbStorageModuleKey,\n    intentModuleKey,\n  ])\n  .factory(viewModelKey, [\n    // dependencies to inject\n    modelPersonalProfileKey,\n    bbStorageServiceKey,\n\n    /* into */\n    ViewModel,\n  ])\n  .factory(hooksKey, extendHooks(defaultHooks))\n  .controller(DETAILS_CONTROLLER_KEY, [\n    // dependencies to inject\n    modelPersonalProfileKey,\n    hooksKey,\n    eventBusKey,\n    widgetKey,\n    bbIntentKey,\n    viewModelKey,\n\n    /* into */\n    DetailsController,\n  ])\n  .controller(FORM_CONTROLLER_KEY, [\n    // dependencies to inject\n    modelPersonalProfileKey,\n    hooksKey,\n    eventBusKey,\n    widgetKey,\n    bbIntentKey,\n    viewModelKey,\n\n    /* into */\n    FormController,\n  ])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-personal-profile-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-storage-ng\"\n// module id = 32\n// module chunks = 6","import { Intent, Event } from '../constants';\n\nexport default function DetailsController(\n  model,\n  hooks,\n  bus,\n  widget,\n  bbIntent,\n  viewModel\n) {\n  /**\n   * @name DetailsController\n   * @ngkey DetailsController\n   *\n   * @description\n   * Mobile personal profile details controller.\n   *\n   * @type {Object}\n   */\n  const ctrl = this;\n\n  /**\n   * @description\n   * A set of intents that the Details controller uses or handles.\n   *\n   * @name intents\n   * @type {Object}\n   * @inner\n   */\n  const intents = {};\n\n  /**\n   * @description\n   * Handles the intent to show the form to add a phone\n   *\n   * @name DetailsController#showAddPhoneForm\n   * @type {function}\n   */\n  const showAddPhoneForm = () => {\n    viewModel.save()\n      .then(() => {\n        intents.showAddPhoneForm();\n      });\n  };\n\n  /**\n   * @description\n   * Handles the intent to show the form to add an email\n   *\n   * @name DetailsController#showAddEmailForm\n   * @type {function}\n   */\n  const showAddEmailForm = () => {\n    viewModel.save()\n      .then(() => {\n        intents.showAddEmailForm();\n      });\n  };\n\n  /**\n   * @description\n   * Handles the intent to show the form to edit a phone\n   *\n   * @name DetailsController#showEditPhoneForm\n   * @type {function}\n   * @param {number} index - position of a phone in the user phone's list\n   */\n  const showEditPhoneForm = index => {\n    viewModel.selectPhoneByIndex(index);\n    viewModel.save()\n      .then(() => {\n        intents.showEditPhoneForm();\n      });\n  };\n\n  /**\n   * @description\n   * Handles the intent to show the form to edit an email\n   *\n   * @name DetailsController#showEditEmailForm\n   * @type {function}\n   * @param {number} index - position of an email in the user email's list\n   */\n  const showEditEmailForm = index => {\n    viewModel.selectEmailByIndex(index);\n    viewModel.save()\n      .then(() => {\n        intents.showEditEmailForm();\n      });\n  };\n\n  /**\n   * @description\n   * Loads the user profile.\n   *\n   * @name DetailsController#loadUser\n   * @type {function}\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   */\n  const loadUser = () => {\n    viewModel.setUserLoading(true);\n\n    return model.loadUsersProfile()\n      .then(hooks.processUser)\n      .then(user => {\n        viewModel.setUserLoading(false);\n        viewModel.setUserError(null);\n        viewModel.setUser(user);\n\n        return user;\n      })\n      .catch(error => {\n        viewModel.setUserError(error);\n        viewModel.setUserLoading(false);\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * AngularJS Lifecycle hook used to initialize the controller.\n   *\n   * @name DetailsController#$onInit\n   * @type {function}\n   *\n   * @fires cxp.item.loaded\n   * @fires bb.item.loaded\n   */\n  const $onInit = () => {\n    bus.publish(Event.CXP_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    bus.publish(Event.BB_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    return loadUser();\n  };\n\n  /**\n   * @description\n   * The intent to show the personal profile form to add an email.\n   *\n   * @name intents#showAddEmailForm\n   * @type {function}\n   * @inner\n   */\n  intents.showAddEmailForm = bbIntent.create(Intent.SHOW_ADD_EMAIL_FORM);\n\n  /**\n   * @description\n   * The intent to show the personal profile form to add a phone.\n   *\n   * @name intents#showAddPhoneForm\n   * @type {function}\n   * @inner\n   */\n  intents.showAddPhoneForm = bbIntent.create(Intent.SHOW_ADD_PHONE_FORM);\n\n  /**\n   * @description\n   * The intent to show the personal profile form to edit an email.\n   *\n   * @name intents#showEditEmailForm\n   * @type {function}\n   * @inner\n   */\n  intents.showEditEmailForm = bbIntent.create(Intent.SHOW_EDIT_EMAIL_FORM);\n\n  /**\n   * @description\n   * The intent to show the personal profile from of editting a phone.\n   *\n   * @name intents#showEditPhoneForm\n   * @type {function}\n   * @inner\n   */\n  intents.showEditPhoneForm = bbIntent.create(Intent.SHOW_EDIT_PHONE_FORM);\n\n  bbIntent.handle(Intent.SHOW_PERSONAL_PROFILE_DETAILS, () => {\n    viewModel.fetch();\n  });\n\n  bbIntent.init(() => { });\n\n  Object.defineProperty(ctrl, 'state', {\n    get() {\n      return viewModel.state;\n    },\n  });\n\n  Object.assign(ctrl, {\n    $onInit,\n    loadUser,\n    showAddEmailForm,\n    showAddPhoneForm,\n    showEditEmailForm,\n    showEditPhoneForm,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-personal-profile-ng/scripts/controllers/details.controller.js","export const MODULE_KEY = 'widget-bbm-personal-profile-ng';\n\nexport const DETAILS_CONTROLLER_KEY = 'DetailsController';\nexport const FORM_CONTROLLER_KEY = 'FormController';\n\n/**\n * Storage keys\n * @type {Object}\n */\nexport const StorageKey = {\n  PERSONAL_PROFILE_STATE: 'widget-bbm-personal-profile-ng:state',\n};\n\n/**\n * Pubsub events\n * @type {Object}\n */\nexport const Event = {\n  CXP_ITEM_LOADED: 'cxp.item.loaded',\n  BB_ITEM_LOADED: 'bb.item.loaded',\n\n  PHONE_DELETE_START: 'bb.event.personalProfile.phone.delete.start',\n  PHONE_DELETE_DONE: 'bb.event.personalProfile.phone.delete.done',\n  PHONE_DELETE_FAILED: 'bb.event.personalProfile.phone.delete.failed',\n\n  PHONE_CREATE_START: 'bb.event.personalProfile.phone.create.start',\n  PHONE_CREATE_DONE: 'bb.event.personalProfile.phone.create.done',\n  PHONE_CREATE_FAILED: 'bb.event.personalProfile.phone.create.failed',\n\n  PHONE_EDIT_START: 'bb.event.personalProfile.phone.edit.start',\n  PHONE_EDIT_DONE: 'bb.event.personalProfile.phone.edit.done',\n  PHONE_EDIT_FAILED: 'bb.event.personalProfile.phone.edit.failed',\n\n  EMAIL_DELETE_START: 'bb.event.personalProfile.email.delete.start',\n  EMAIL_DELETE_DONE: 'bb.event.personalProfile.email.delete.done',\n  EMAIL_DELETE_FAILED: 'bb.event.personalProfile.email.delete.failed',\n\n  EMAIL_CREATE_START: 'bb.event.personalProfile.email.create.start',\n  EMAIL_CREATE_DONE: 'bb.event.personalProfile.email.create.done',\n  EMAIL_CREATE_FAILED: 'bb.event.personalProfile.email.create.failed',\n\n  EMAIL_EDIT_START: 'bb.event.personalProfile.email.edit.start',\n  EMAIL_EDIT_DONE: 'bb.event.personalProfile.email.edit.done',\n  EMAIL_EDIT_FAILED: 'bb.event.personalProfile.email.edit.failed',\n};\n\n/**\n * Intent\n * @type {Object}\n */\nexport const Intent = {\n  SHOW_PERSONAL_PROFILE_DETAILS: 'intent.bb.personalProfile.details.show',\n  SHOW_EDIT_PHONE_FORM: 'intent.bb.personalProfile.phone.edit',\n  SHOW_EDIT_EMAIL_FORM: 'intent.bb.personalProfile.email.edit',\n  SHOW_ADD_PHONE_FORM: 'intent.bb.personalProfile.phone.add',\n  SHOW_ADD_EMAIL_FORM: 'intent.bb.personalProfile.email.add',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-personal-profile-ng/scripts/constants.js","/* global angular */\nimport { Intent, Event } from '../constants';\n\nexport default function FormController(\n  model,\n  hooks,\n  bus,\n  widget,\n  bbIntent,\n  viewModel\n) {\n  /**\n   * @name FormController\n   * @ngkey FormController\n   *\n   * @description\n   * Mobile personal profile form controller.\n   *\n   * @type {Object}\n   */\n  const ctrl = this;\n\n  /**\n   * @description\n   * A set of the intents that the Form controller uses or handles.\n   *\n   * @name intents\n   * @type {Object}\n   * @inner\n   */\n  const intents = {};\n\n  /**\n   * @description\n   * Initializes the form for creating a phone.\n   *\n   * @name FormController#initializeAddPhoneFormState\n   * @type {function}\n   * @inner\n   */\n  const initializeAddPhoneFormState = () => {\n    const phone = {\n      value: null,\n      primary: false,\n    };\n\n    viewModel.setFormPhoneState(phone);\n  };\n\n  /**\n   * @description\n   * Initializes the form from creating an email.\n   *\n   * @name FormController#initializeAddEmailFormState\n   * @type {function}\n   * @inner\n   */\n  const initializeAddEmailFormState = () => {\n    const email = {\n      value: null,\n      primary: false,\n    };\n\n    viewModel.setFormEmailState(email);\n  };\n\n  /**\n   * @description\n   * Sets up the form for editig a phone.\n   *\n   * @name FormController#setupEditPhoneFormState\n   * @type {function}\n   * @inner\n   */\n  const setupEditPhoneFormState = () => {\n    const { index } = viewModel.getSelectedPhone();\n    const user = viewModel.getUserData();\n    const phone = angular.copy(user.phones[index]);\n\n    viewModel.setFormPhoneState({ ...phone });\n  };\n\n  /**\n   * @description\n   * Sets up the form for editin an email.\n   *\n   * @name FormController#setupEditEmailFormState\n   * @type {function}\n   * @inner\n   */\n  const setupEditEmailFormState = () => {\n    const { index } = viewModel.getSelectedEmail();\n    const user = viewModel.getUserData();\n    const email = angular.copy(user.emails[index]);\n\n    viewModel.setFormEmailState({ ...email });\n  };\n\n  /**\n   * @description\n   * Resets the selected phone if exists\n   *\n   * @name FormController#resetSelectedPhoneIfNeeded\n   * @type {function}\n   * @inner\n   */\n  const resetSelectedPhoneIfNeeded = () => {\n    if (viewModel.isPhoneSelected()) {\n      viewModel.resetSelectedPhone();\n    }\n  };\n\n  /**\n   * @description\n   * Resets the selected email if exists\n   *\n   * @name FormController#resetSelectedEmailIfNeeded\n   * @type {function}\n   * @inner\n   */\n  const resetSelectedEmailIfNeeded = () => {\n    if (viewModel.isEmailSelected()) {\n      viewModel.resetSelectedEmail();\n    }\n  };\n\n  /**\n   * @description\n   * Updates a user\n   *\n   * @name FormController#updateUser\n   * @type {function}\n   * @param {module:model-bb-personal-profile-ng.UserProfile} user\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   * @inner\n   */\n  const updateUser = user => {\n    viewModel.setFormLoading(true);\n\n    return model.updateUsersProfile(user)\n      .then(updatedUser => {\n        viewModel.setUser(updatedUser);\n        viewModel.setFormLoading(false);\n        viewModel.setFormError(null);\n\n        return updatedUser;\n      })\n      .catch(error => {\n        viewModel.setFormLoading(false);\n        viewModel.setFormError(error);\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Creates a user email\n   *\n   * @name FormController#createEmail\n   * @type {function}\n   * @param {module:model-bb-personal-profile-ng.Email} email\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   * @inner\n   */\n  const createEmail = email => {\n    const user = angular.copy(viewModel.getUserData());\n    user.emails.push(email);\n\n    bus.publish(Event.EMAIL_CREATE_START);\n\n    return updateUser(user)\n      .then(updatedUser => {\n        bus.publish(Event.EMAIL_CREATE_DONE, { updatedUser });\n\n        viewModel.save()\n          .then(() => {\n            intents.showPersonalProfileDetails();\n          });\n      })\n      .catch(error => {\n        bus.publish(Event.EMAIL_CREATE_FAILED, { error });\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Edits user's emails\n   *\n   * @name FormController#editEmail\n   * @type {function}\n   * @param {module:model-bb-personal-profile-ng.Email} email\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   * @inner\n   */\n  const editEmail = email => {\n    const user = angular.copy(viewModel.getUserData());\n    const { index } = viewModel.getSelectedEmail();\n    user.emails.splice(index, 1, email);\n\n    bus.publish(Event.EMAIL_EDIT_START);\n\n    return updateUser(user)\n      .then(updatedUser => {\n        bus.publish(Event.EMAIL_EDIT_DONE, { updatedUser });\n\n        viewModel.save()\n          .then(() => {\n            intents.showPersonalProfileDetails();\n          });\n      })\n      .catch(error => {\n        bus.publish(Event.EMAIL_EDIT_FAILED, { error });\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Updates user's emails\n   *\n   * @name FormController#updateUserEmail\n   * @type {function}\n   */\n  const updateUserEmail = () => {\n    const { email } = viewModel.getFormData();\n\n    return viewModel.isEmailSelected()\n      ? editEmail(email)\n      : createEmail(email);\n  };\n\n  /**\n   * @description\n   * Creates a user phone\n   *\n   * @name FormController#createPhone\n   * @type {function}\n   * @param {module:model-bb-personal-profile-ng.Phone} phone\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   * @inner\n   */\n  const createPhone = phone => {\n    const user = angular.copy(viewModel.getUserData());\n    user.phones.push(phone);\n\n    bus.publish(Event.PHONE_CREATE_START);\n\n    return updateUser(user)\n      .then(updatedUser => {\n        bus.publish(Event.PHONE_CREATE_DONE, { updatedUser });\n\n        viewModel.save()\n          .then(() => {\n            intents.showPersonalProfileDetails();\n          });\n      })\n      .catch(error => {\n        bus.publish(Event.PHONE_CREATE_FAILED, { error });\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Edits user's phones\n   *\n   * @name FormController#editPhone\n   * @type {function}\n   * @param {module:model-bb-personal-profile-ng.Phone} phone\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   * @inner\n   */\n  const editPhone = phone => {\n    const user = angular.copy(viewModel.getUserData());\n    const { index } = viewModel.getSelectedPhone();\n    user.phones.splice(index, 1, phone);\n\n    bus.publish(Event.PHONE_EDIT_START);\n\n    return updateUser(user)\n      .then(updatedUser => {\n        bus.publish(Event.PHONE_EDIT_DONE, { updatedUser });\n\n        viewModel.save()\n          .then(() => {\n            intents.showPersonalProfileDetails();\n          });\n      })\n      .catch(error => {\n        bus.publish(Event.PHONE_EDIT_FAILED, { error });\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Updates user's phones\n   *\n   * @name FormController#updateUserPhone\n   * @type {function}\n   */\n  const updateUserPhone = () => {\n    const { phone } = viewModel.getFormData();\n\n    return viewModel.isPhoneSelected()\n      ? editPhone(phone)\n      : createPhone(phone);\n  };\n\n  /**\n   * @description\n   * Deletes a user phone\n   *\n   * @name FormController#deleteUserPhone\n   * @type {function}\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   */\n  const deleteUserPhone = () => {\n    const { index } = viewModel.getSelectedPhone();\n    const user = angular.copy(viewModel.getUserData());\n    user.phones.splice(index, 1);\n\n    bus.publish(Event.PHONE_DELETE_START);\n\n    return updateUser(user)\n      .then(updatedUser => {\n        bus.publish(Event.PHONE_DELETE_DONE, { updatedUser });\n\n        viewModel.save()\n          .then(() => {\n            intents.showPersonalProfileDetails();\n          });\n      })\n      .catch(error => {\n        bus.publish(Event.PHONE_DELETE_FAILED, { error });\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Deletes a user email\n   *\n   * @name FormController#deleteUserEmail\n   * @type {function}\n   *\n   * @returns {Promise<module:model-bb-personal-profile-ng.UserProfile>}\n   */\n  const deleteUserEmail = () => {\n    const { index } = viewModel.getSelectedEmail();\n    const user = angular.copy(viewModel.getUserData());\n    user.emails.splice(index, 1);\n\n    bus.publish(Event.EMAIL_DELETE_START);\n\n    return updateUser(user)\n      .then(updatedUser => {\n        bus.publish(Event.EMAIL_DELETE_DONE, { updatedUser });\n\n        viewModel.save()\n          .then(() => {\n            intents.showPersonalProfileDetails();\n          });\n      })\n      .catch(error => {\n        bus.publish(Event.EMAIL_DELETE_FAILED, { error });\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * AngularJS Lifecycle hook used to initialize the controller.\n   *\n   * @name FormController#$onInit\n   * @type {function}\n   *\n   * @fires cxp.item.loaded\n   * @fires bb.item.loaded\n   */\n  const $onInit = () => {\n    /**\n     * This event (cxp.item.loaded) is deprecated in Mobile SDK version > 3.0\n     * and will be removed with the update to widget collection 3 (WC3)\n     */\n    bus.publish(Event.CXP_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    bus.publish(Event.BB_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n  };\n\n  /**\n   * @description\n   * The intent to show the personal profile details.\n   *\n   * @name intents#showPersonalProfileDetails\n   * @type {function}\n   * @inner\n   */\n  intents.showPersonalProfileDetails = bbIntent.create(Intent.SHOW_PERSONAL_PROFILE_DETAILS);\n\n  bbIntent.handle(Intent.SHOW_ADD_PHONE_FORM, () => {\n    viewModel.fetch().then(() => {\n      resetSelectedPhoneIfNeeded();\n      initializeAddPhoneFormState();\n    });\n  });\n\n  bbIntent.handle(Intent.SHOW_ADD_EMAIL_FORM, () => {\n    viewModel.fetch().then(() => {\n      resetSelectedEmailIfNeeded();\n      initializeAddEmailFormState();\n    });\n  });\n\n  bbIntent.handle(Intent.SHOW_EDIT_PHONE_FORM, () => {\n    viewModel.fetch().then(() => {\n      setupEditPhoneFormState();\n    });\n  });\n\n  bbIntent.handle(Intent.SHOW_EDIT_EMAIL_FORM, () => {\n    viewModel.fetch().then(() => {\n      setupEditEmailFormState();\n    });\n  });\n\n  bbIntent.init(() => { });\n\n  Object.defineProperty(ctrl, 'state', {\n    get() {\n      return viewModel.state;\n    },\n  });\n\n  Object.assign(ctrl, {\n    $onInit,\n    updateUserEmail,\n    updateUserPhone,\n    deleteUserEmail,\n    deleteUserPhone,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-personal-profile-ng/scripts/controllers/form.controller.js","import { StorageKey } from './constants';\n\nexport default (model, bbStorage) => {\n  const viewModel = {};\n\n  /**\n   * @description\n   * Returns the initial state of the view model.\n   *\n   * @name getInitialState\n   * @type {function}\n   *\n   * @returns {PersonalProfileView}\n   * @inner\n   */\n  const getInitialState = () => ({\n    user: {\n      data: null,\n      loading: false,\n      error: null,\n    },\n    form: {\n      data: {\n        phone: {\n          value: null,\n          primary: false,\n        },\n        email: {\n          value: null,\n          primary: false,\n        },\n      },\n      loading: false,\n      error: null,\n    },\n    selectedPhone: {\n      index: null,\n    },\n    selectedEmail: {\n      index: null,\n    },\n  });\n\n  /**\n   * @description\n   * Sets the given loading state to the given target.\n   *\n   * @name setLoading\n   * @type {function}\n   *\n   * @param {Object} target\n   * @param {boolean} loading\n   * @inner\n   */\n  const setLoading = (target, loading) => {\n    Object.assign(target, { loading });\n  };\n\n  /**\n   * @description\n   * Sets the given error to the given target.\n   *\n   * @name setError\n   * @type {function}\n   *\n   * @param {Object} target\n   * @param {Error} error\n   * @inner\n   */\n  const setError = (target, error) => {\n    Object.assign(target, { error });\n  };\n\n  /**\n   * @description\n   * Sets the loading state of the user.\n   *\n   * @name setUserLoading\n   * @type {function}\n   *\n   * @param {boolean} loading\n   * @inner\n   */\n  const setUserLoading = loading => {\n    setLoading(viewModel.state.user, loading);\n  };\n\n  /**\n   * @description\n   * Sets the loading state of the form.\n   *\n   * @name setFormLoading\n   * @type {function}\n   *\n   * @param {boolean} loading\n   * @inner\n   */\n  const setFormLoading = loading => {\n    setLoading(viewModel.state.form, loading);\n  };\n\n  /**\n   * @description\n   * Sets an error state to the user with the given error.\n   *\n   * @name setUserError\n   * @type {function}\n   *\n   * @param {Error} error\n   * @inner\n   */\n  const setUserError = error => {\n    setError(viewModel.state.user, error);\n  };\n\n  /**\n   * @description\n   * Sets an error state to the form with the given error.\n   *\n   * @name setFormError\n   * @type {function}\n   *\n   * @param {Error} error\n   * @inner\n   */\n  const setFormError = error => {\n    setError(viewModel.state.form, error);\n  };\n\n  /**\n   * @description\n   * Returns the user data.\n   *\n   * @name getUserData\n   * @type {function}\n   *\n   * @returns {module:model-bb-personal-profile-ng.UserProfile}\n   * @inner\n   */\n  const getUserData = () => viewModel.state.user.data;\n\n  /**\n   * @description\n   * Returns the form data.\n   *\n   * @name getFormData\n   * @type {function}\n   *\n   * @returns {FormData}\n   * @inner\n   */\n  const getFormData = () => viewModel.state.form.data;\n\n  /**\n   * @description\n   * Sets the user.\n   *\n   * @name setUser\n   * @type {function}\n   *\n   * @param {module:model-bb-personal-profile-ng.UserProfile} user\n   * @inner\n   */\n  const setUser = user => {\n    Object.assign(viewModel.state.user, {\n      data: user,\n    });\n  };\n\n  /**\n   * @description\n   * Sets the data to the phone's form.\n   *\n   * @name setFormPhoneState\n   * @type {function}\n   *\n   * @param {module:model-bb-personal-profile-ng.Phone} phone\n   * @inner\n   */\n  const setFormPhoneState = ({ value, primary }) => {\n    Object.assign(viewModel.state.form.data.phone, {\n      value,\n      primary,\n    });\n  };\n\n  /**\n   * @description\n   * Sets the data to the email's form.\n   *\n   * @name setFormEmailState\n   * @type {function}\n   *\n   * @param {module:model-bb-personal-profile-ng.Email} email\n   * @inner\n   */\n  const setFormEmailState = ({ value, primary }) => {\n    Object.assign(viewModel.state.form.data.email, {\n      value,\n      primary,\n    });\n  };\n\n  /**\n   * @description\n   * Selects the user's phone by index.\n   *\n   * @name selectPhoneByIndex\n   * @type {function}\n   *\n   * @param {number} index\n   * @inner\n   */\n  const selectPhoneByIndex = index => {\n    Object.assign(viewModel.state.selectedPhone, { index });\n  };\n\n  /**\n   * @description\n   * Selects the user's email by index.\n   *\n   * @name selectEmailByIndex\n   * @type {function}\n   *\n   * @param {number} index\n   * @inner\n   */\n  const selectEmailByIndex = index => {\n    Object.assign(viewModel.state.selectedEmail, { index });\n  };\n\n  /**\n   * @description\n   * Resets the selected email.\n   *\n   * @name resetSelectedEmail\n   * @type {function}\n   * @inner\n   */\n  const resetSelectedEmail = () => {\n    Object.assign(viewModel.state.selectedEmail, { index: null });\n  };\n\n  /**\n   * @description\n   * Resets the selected phone.\n   *\n   * @name resetSelectedPhone\n   * @type {function}\n   * @inner\n   */\n  const resetSelectedPhone = () => {\n    Object.assign(viewModel.state.selectedPhone, { index: null });\n  };\n\n  /**\n   * @description\n   * Checks if the user phone is selected.\n   *\n   * @name isPhoneSelected\n   * @type {function}\n   *\n   * @returns {boolean}\n   * @inner\n   */\n  const isPhoneSelected = () => viewModel.state.selectedPhone.index !== null;\n\n  /**\n   * @description\n   * Checks if the user email is selected.\n   *\n   * @name isEmailSelected\n   * @type {function}\n   *\n   * @returns {boolean}\n   * @inner\n   */\n  const isEmailSelected = () => viewModel.state.selectedEmail.index !== null;\n\n  /**\n   * @description\n   * Returns the selected email.\n   *\n   * @name getSelectedEmail\n   * @type {function}\n   *\n   * @returns {SelectedEmail}\n   * @inner\n   */\n  const getSelectedEmail = () => viewModel.state.selectedEmail;\n\n  /**\n   * @description\n   * Returns the selected email.\n   *\n   * @name getSelectedPhone\n   * @type {function}\n   *\n   * @returns {SelectedPhone}\n   * @inner\n   */\n  const getSelectedPhone = () => viewModel.state.selectedPhone;\n\n  /**\n   * @description\n   * Fetches the state from the storage.\n   *\n   * @name fetch\n   * @type {function}\n   * @inner\n   */\n  const fetch = () => (\n    bbStorage.getItem(StorageKey.PERSONAL_PROFILE_STATE)\n      .then((state) => {\n        if (state) {\n          viewModel.state = state;\n        }\n      })\n  );\n\n  /**\n   * @description\n   * Saves the state to the storage.\n   *\n   * @name save\n   * @type {function}\n   * @inner\n   */\n  const save = () => (\n    bbStorage.setItem(StorageKey.PERSONAL_PROFILE_STATE, viewModel.state)\n  );\n\n  Object.assign(viewModel, {\n    state: getInitialState(),\n\n    getUserData,\n    getFormData,\n\n    setUser,\n    setFormEmailState,\n    setFormPhoneState,\n    setUserLoading,\n    setUserError,\n    setFormLoading,\n    setFormError,\n\n    selectEmailByIndex,\n    selectPhoneByIndex,\n    getSelectedEmail,\n    getSelectedPhone,\n    resetSelectedEmail,\n    resetSelectedPhone,\n    isPhoneSelected,\n    isEmailSelected,\n\n    fetch,\n    save,\n  });\n\n  return viewModel;\n};\n\n/**\n * @typedef {Object} SelectedPhone\n * @property {number} index - position of a phone in the user's phone list\n */\n\n /**\n * @typedef {Object} SelectedEmail\n * @property {number} index - position of an email in the user's email list\n */\n\n /**\n * @typedef {Object} FormData\n * @property {Phone} phone - phone data\n * @property {Email} email - email data\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-personal-profile-ng/scripts/view-model.js","/**\n * @name Hooks\n * @type {Object}\n *\n * @description\n * Default hooks for widget-bbm-personal-profile-ng\n */\n\n/**\n * @name Hooks#processUser\n * @type {function}\n *\n * @description\n * Hook for processing the user\n *\n * @param {User} user - User object from the controller\n * @returns {Object} user\n */\n\nconst processUser = user => user;\n\nexport default {\n  processUser,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-personal-profile-ng/scripts/default-hooks.js"],"sourceRoot":""}