{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*****************","webpack:///webpack/bootstrap ed40b4c6a0ad86da1c64?6024*****************","webpack:///./widget-bb-user-menu-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114**********","webpack:///external \"lib-bb-widget-extension-ng\"?b547**","webpack:///external \"lib-bb-intent-ng\"?add1**","webpack:///external \"lib-bb-widget-ng\"?84ad****","webpack:///external \"model-bb-login-ng\"?ff84*","webpack:///external \"lib-bb-user-data-ng\"?1b2b","webpack:///./widget-bb-user-menu-ng/scripts/index.js","webpack:///./widget-bb-user-menu-ng/scripts/controller.js","webpack:///./widget-bb-user-menu-ng/scripts/default-hooks.js"],"names":["moduleKey","hooksKey","module","factory","controller","run","bbIntent","init","name","UserMenuController","hooks","model","userDataService","widgetInstance","$ctrl","portal","window","b$","logoutRedirectPage","getStringPreference","userDataUrl","logoutRedirectUrl","config","serverRoot","portalName","logout","then","location","assign","loggedUser","console","warn","currentUser","getUserFromPortal","getUserData","processProfileData","userData","$onInit","Object","user"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,0C;;;;;;;ACAA,gD;;;;;;;ACAA,iD;;;;;;;ACAA,iD;;;;;;;ACAA,iD;;;;;;;ACAA,iD;;;;;;;ACAA,iD;;;;;;;;;;;;;ACMA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAfA;;;;;;AAiBA,KAAMA,YAAY,wBAAlB;AACA,KAAMC,WAAcD,SAAd,WAAN;;mBAEe,0BACZE,MADY,CACLF,SADK,EACM,uGADN,EAQZG,OARY,CAQJF,QARI,EAQM,6DARN,EAUZG,UAVY,CAUD,oBAVC,EAUqB;AAChC;AACAH,SAFgC;AAMhC;AANgC,sBAVrB,EAoBZI,GApBY,CAoBR,6BAAc,UAACC,QAAD,EAAc;AAC/BA,YAASC,IAAT;AACD,EAFI,CApBQ,EAwBZC,I;;AAEH;;;;;;AAMA;;;;;;;;;;;;;;;mBC5CwBC,kB;AARxB;AACA;;;;;;;AAOe,UAASA,kBAAT,CAA4BC,KAA5B,EAAmCC,KAAnC,EAA0CC,eAA1C,EAA2DC,cAA3D,EAA2E;AACxF,OAAMC,QAAQ,IAAd;AACA,OAAMC,SAASC,OAAOC,EAAP,IAAaD,OAAOC,EAAP,CAAUF,MAAtC;;AAEA,OAAMG,qBAAqBL,eAAeM,mBAAf,CAAmC,oBAAnC,CAA3B;AACA,OAAMC,cAAcP,eAAeM,mBAAf,CAAmC,aAAnC,CAApB;;AAEA,OAAME,oBAAoBN,SACrBA,OAAOO,MAAP,CAAcC,UADO,SACOR,OAAOS,UADd,SAC4BN,kBAD5B,GAExBA,kBAFF;;AAIA,OAAMO,SAAS,SAATA,MAAS,GAAM;AACnBd,WAAMc,MAAN,GACGC,IADH,CACQ,YAAM;AACVV,cAAOW,QAAP,CAAgBC,MAAhB,CAAuBP,iBAAvB;AACD,MAHH;AAID,IALD;;AAOA,OAAMQ,aAAa,SAAbA,UAAa,GAAM;AACvB;AACAC,aAAQC,IAAR,CAAa,yHAAb;AACA,YAAOjB,MAAMkB,WAAN,CAAkBxB,IAAlB,IAA0B,EAAjC;AACD,IAJD;;AAMA;;;;;;;;;;AAUA,OAAMyB,oBAAoB,SAApBA,iBAAoB;AAAA,YACxBrB,gBAAgBsB,WAAhB,GACGR,IADH,CACQ,oBAAY;AAChBZ,aAAMkB,WAAN,GAAoBtB,MAAMyB,kBAAN,CAAyBC,QAAzB,CAApB;AACD,MAHH,CADwB;AAAA,IAA1B;;AAMA,OAAMC,UAAU,SAAVA,OAAU;AAAA,YAAMJ,mBAAN;AAAA,IAAhB;;AAEAK,UAAOV,MAAP,CAAcd,KAAd,EAAqB;AACnB;;;;;;;AAOAuB,qBARmB;AASnB;;;;;;;AAOAZ,mBAhBmB;AAiBnB;;;;;AAKAO,kBAAa,EAtBM;AAuBnB;;;;;;;;AAQAH,2BA/BmB;AAgCnB;;;;;AAKAT;AArCmB,IAArB;AAuCD,E;;;;;;;;;;;;ACzFD;;;;;;;;AAQA;;;;;;;;;;AAUA,KAAMe,qBAAqB,SAArBA,kBAAqB,CAACI,IAAD;AAAA,UAAUA,IAAV;AAAA,EAA3B;;mBAEe;AACbJ;AADa,E","file":"widget-bb-user-menu-ng/scripts/widget-bb-user-menu-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-widget-ng\"), require(\"model-bb-login-ng\"), require(\"lib-bb-user-data-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-user-menu-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-extension-ng\", \"lib-bb-intent-ng\", \"lib-bb-widget-ng\", \"model-bb-login-ng\", \"lib-bb-user-data-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-user-menu-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-widget-ng\"), require(\"model-bb-login-ng\"), require(\"lib-bb-user-data-ng\"));\n\telse\n\t\troot[\"widget-bb-user-menu-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-extension-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-widget-ng\"], root[\"model-bb-login-ng\"], root[\"lib-bb-user-data-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_39__, __WEBPACK_EXTERNAL_MODULE_40__, __WEBPACK_EXTERNAL_MODULE_41__, __WEBPACK_EXTERNAL_MODULE_49__, __WEBPACK_EXTERNAL_MODULE_59__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed40b4c6a0ad86da1c64","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-user-menu-ng/model.xml\n// module id = 0\n// module chunks = 18","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 7 8 9 10 11 12 13 14 15 17 18","module.exports = __WEBPACK_EXTERNAL_MODULE_39__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 39\n// module chunks = 12 15 17 18","module.exports = __WEBPACK_EXTERNAL_MODULE_40__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 40\n// module chunks = 12 14 17 18","module.exports = __WEBPACK_EXTERNAL_MODULE_41__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 41\n// module chunks = 12 13 14 15 17 18","module.exports = __WEBPACK_EXTERNAL_MODULE_49__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-login-ng\"\n// module id = 49\n// module chunks = 14 17 18","module.exports = __WEBPACK_EXTERNAL_MODULE_59__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-user-data-ng\"\n// module id = 59\n// module chunks = 17 18","/**\n * @module widget-bb-user-menu-ng\n *\n * @description\n * User Menu widget\n */\nimport angular from 'vendor-bb-angular';\n\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\nimport bbUserDataModuleKey, { bbUserDataServiceKey } from 'lib-bb-user-data-ng';\nimport modelLoginModuleKey, { modelLoginKey } from 'model-bb-login-ng';\nimport extendHooks from 'lib-bb-widget-extension-ng';\n\nimport Controller from './controller';\nimport defaultHooks from './default-hooks';\n\nconst moduleKey = 'widget-bb-user-menu-ng';\nconst hooksKey = `${moduleKey}:hooks`;\n\nexport default angular\n  .module(moduleKey, [\n    widgetModuleKey,\n    modelLoginModuleKey,\n    bbIntentModuleKey,\n    bbUserDataModuleKey,\n  ])\n\n  .factory(hooksKey, extendHooks(defaultHooks))\n\n  .controller('UserMenuController', [\n    // dependencies to inject\n    hooksKey,\n    modelLoginKey,\n    bbUserDataServiceKey,\n    widgetKey,\n    /* into */\n    Controller,\n  ])\n\n  .run([bbIntentKey, (bbIntent) => {\n    bbIntent.init();\n  }])\n\n  .name;\n\n/**\n * @typedef {object} User\n * @property {string} name Name that should be displayed on page\n * @property {?string} username Internal user identifier\n */\n\n/**\n * @typedef {object} Portal\n * @property {string} loggedInUserId Internally used unique identification of the user\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-menu-ng/scripts/index.js","/* global window */\n/**\n * @name UserMenuController\n * @type {object}\n *\n * @description\n * User Menu widget\n */\nexport default function UserMenuController(hooks, model, userDataService, widgetInstance) {\n  const $ctrl = this;\n  const portal = window.b$ && window.b$.portal;\n\n  const logoutRedirectPage = widgetInstance.getStringPreference('logoutRedirectPage');\n  const userDataUrl = widgetInstance.getStringPreference('userDataUrl');\n\n  const logoutRedirectUrl = portal ?\n    `${portal.config.serverRoot}/${portal.portalName}/${logoutRedirectPage}` :\n    logoutRedirectPage;\n\n  const logout = () => {\n    model.logout()\n      .then(() => {\n        window.location.assign(logoutRedirectUrl);\n      });\n  };\n\n  const loggedUser = () => {\n    // eslint-disable-next-line max-len, no-console\n    console.warn('DEPRECATED - loggedUser method will be removed in the next component major release. Use \\'currentUser\\' object instead.');\n    return $ctrl.currentUser.name || '';\n  };\n\n  /**\n   * @name getUserFromPortal\n   * @type {function}\n   * @inner\n   *\n   * @description\n   * Retrieves information about currently logged in user from CX endpoint or CXP global object\n   *\n   * @returns {Promise}\n   */\n  const getUserFromPortal = () =>\n    userDataService.getUserData()\n      .then(userData => {\n        $ctrl.currentUser = hooks.processProfileData(userData);\n      });\n\n  const $onInit = () => getUserFromPortal();\n\n  Object.assign($ctrl, {\n    /**\n     * @description AngularJS Lifecycle hook used to initialize the controller\n     * @type {function}\n     *\n     * @name UserMenuController#$onInit\n     * @returns {Promise.<void>}\n     */\n    $onInit,\n    /**\n     * @description Logout function\n     * @type {function}\n     *\n     * @name UserMenuController#logout\n     * @returns {Promise}\n     */\n    logout,\n    /**\n     * @description Currently logged in user's data object\n     * @name UserMenuController#currentUser\n     * @type {User}\n     */\n    currentUser: {},\n    /**\n     * @description Retrieves logged in user id\n     * Returns empty string if user is not found (deprecated)\n     * @type {function}\n     *\n     * @name UserMenuController#loggedUser\n     * @returns {string}\n     */\n    loggedUser,\n    /**\n     * @description URL that leads to the page with additional user data\n     * @name UserMenuController#userDataUrl\n     * @type {string}\n     */\n    userDataUrl,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-menu-ng/scripts/controller.js","/**\n * @name default-hooks\n * @type {object}\n *\n * @description\n * Default hooks for widget-bb-user-menu-ng\n */\n\n/**\n * @name default-hooks#processProfileData\n * @type {function}\n *\n * @description\n * Processes user data retrieved from user profile endpoint\n *\n * @param {User} user User data\n * @returns {User} Processed data\n */\nconst processProfileData = (user) => user;\n\nexport default {\n  processProfileData,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-user-menu-ng/scripts/default-hooks.js"],"sourceRoot":""}