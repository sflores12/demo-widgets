{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**********","webpack:///webpack/bootstrap dcaf2abb135ce9e57553?c844**********","webpack:///./ui-bb-currency-input-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114**********","webpack:///external \"ui-bb-dropdown-select\"?70ba","webpack:///./ui-bb-currency-input-ng/scripts/index.js","webpack:///external \"lib-bb-currency-ng\"","webpack:///./ui-bb-currency-input-ng/scripts/currency-input.js","webpack:///./ui-bb-currency-input-ng/scripts/currency-formatting.js","webpack:///./ui-bb-currency-input-ng/scripts/formatting-utils.js","webpack:///./ui-bb-currency-input-ng/scripts/decimals-formatting.js"],"names":["dependencyKeys","module","directive","factory","getRule","decimalDigits","currencyCode","name","template","$locale","currencyAttr","restrict","link","scope","element","attrs","ngModelCtrl","setDecimalAttrs","decimalLength","Object","assign","decimalMaxLength","decimalPlaceholder","Array","join","seperator","NUMBER_FORMATS","DECIMAL_SEP","isInteger","integer","undefined","placeholderCurrency","preSelectOnlyCurrency","currencies","length","currency","decimalInput","querySelector","validate","amount","isValid","parseFloat","value","$setValidity","fixDecimals","decimals","repeat","substr","parse","toString","split","whole","find","on","e","key","focus","dropdownSelectCtrl","$formatters","push","controller","select","$parsers","$watch","decLength","$setViewValue","require","onCurrencyChange","placeholder","maxLength","messages","currencyFormatting","$filter","ngModel","inputMaxLength","invalidChars","triggerRender","reduce","fn","$modelValue","filter","updateMaxLength","number","specialCharsCount","$eval","currencyFilter","f","numericChars","replace","decimalPosition","indexOf","groupSeparator","GROUP_SEP","toFloat","RegExp","substring","toFixed","isNaN","truncateNumber","formatted","specialCharactersCountChange","map","string","occurrences","diffChars","prev","cur","selectionRange","selectionStart","selectionEnd","position","$render","setSelectionRange","utils","haystack","needles","needle","matches","match","currencyString","uniq","array","concat","uniqueChars","a","b","char","aChars","bChars","calc","list","res","forEach","item","diff","l1","l2","keys","i","aMatch","bMatch","limit","truncatedNumber","Math","log10","floor","specialCharacters","decimalsFormatting"],"mappings":"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","file":"ui-bb-currency-input-ng/scripts/ui-bb-currency-input-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"ui-bb-dropdown-select\"), require(\"lib-bb-currency-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-currency-input-ng\", [\"vendor-bb-angular\", \"ui-bb-dropdown-select\", \"lib-bb-currency-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-currency-input-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"ui-bb-dropdown-select\"), require(\"lib-bb-currency-ng\"));\n\telse\n\t\troot[\"ui-bb-currency-input-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"ui-bb-dropdown-select\"], root[\"lib-bb-currency-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_53__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dcaf2abb135ce9e57553","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-currency-input-ng/model.xml\n// module id = 0\n// module chunks = 10","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-dropdown-select\"\n// module id = 7\n// module chunks = 1 10","/**\n * @module ui-bb-currency-input-ng\n * @description\n * Currency input UI component\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbCurrencyInputNgKey from 'ui-bb-currency-input-ng';\n *\n * export const dependencyKeys = [\n *   uiBbCurrencyInputNgKey,\n * ];\n *\n * // file: templates/template.ng.html\n * <ui-bb-currency-input-ng\n *   data-max-length=\"6\"\n *   data-decimal-max-length=\"2\"\n *   data-placeholder=\"000,000\"\n *   data-ng-model=\"$ctrl.payment.amount\"\n *   data-currencies=\"$ctrl.currencies\"\n *   data-integer>\n * </ui-bb-currency-input-ng>\n */\nimport angular from 'vendor-bb-angular';\nimport uiBbDropdownSelectKey from 'ui-bb-dropdown-select';\nimport libBbCurrencyNgKey, { bbCurrencyRuleKey } from 'lib-bb-currency-ng';\n\nimport currencyInput from './currency-input';\nimport currencyFormatting from './currency-formatting';\nimport decimalsFormatting from './decimals-formatting';\n\nconst dependencyKeys = [\n  libBbCurrencyNgKey,\n  uiBbDropdownSelectKey,\n];\n\n/**\n * @name default\n * @type {string}\n * @description The angular module name\n */\nexport default angular.module('ui-bb-currency-input-ng', dependencyKeys)\n  .directive('currencyFormatting', ['$filter', '$locale', currencyFormatting])\n  .directive('decimalsFormatting', decimalsFormatting)\n  .directive('uiBbCurrencyInputNg', ['$locale', 'currencyAttr', currencyInput])\n  .factory('currencyAttr', [bbCurrencyRuleKey, (getRule) => ({\n    decimalDigits: (currencyCode) => (getRule(currencyCode) || {\n      decimalDigits: 2,\n    }).decimalDigits,\n  }),\n  ])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-currency-input-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_53__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-currency-ng\"\n// module id = 53\n// module chunks = 10 15 40","/**\n * @name uiBbCurrencyInputNg\n * @type {object}\n *\n * @property {string} placeholder Text to display for input's placeholder\n * @property {string} max-length Maximum number of digits allowed in whole part\n * @property {string} decimal-max-length Maximum number of digits allowed in decimal part\n * @property {array} currencies List of available currencies\n * @property {object} ng-model Currency input model\n * @property {object} messages Localized messages\n * @property {void} integer If attribute is present, decimal places input will be hidden\n */\n\nconst template = `\n  <div class=\"currency\" data-ng-show=\"currencies !== undefined\">\n    <div data-ng-if=\"!currencies || currencies.length === 0\">\n      <!-- placeholder: not to change ngModel currency value -->\n      <div class=\"form-control\" disabled=\"disabled\">{{ placeholderCurrency }}</div>\n    </div>\n    <div data-ng-if=\"currencies.length === 1\">\n      <div class=\"form-control\">{{ currency }}</div>\n    </div>\n    <ui-bb-dropdown-select\n      data-ng-model=\"currency\"\n      data-ng-show=\"currencies.length > 1\"\n      data-ng-change=\"onCurrencyChange({ currency: $item });\"\n      data-selected-as=\"$option\"\n      data-role=\"ui-bb-currency-input-ng-currency\">\n      <ui-bb-dropdown-option\n        data-option=\"currency.name\"\n        data-ng-repeat=\"currency in currencies\"\n        class=\"list-group-item-text\"\n        aria-label=\"{{:: messages['label.currency'] }}\"\n      >\n        <a href=\"#\">{{:: $option }}</a>\n      </ui-bb-dropdown-option>\n    </ui-bb-dropdown-select>\n  </div>\n  <div class=\"amount\"\n    data-ng-class=\"{ 'no-currency': currencies === undefined, 'no-decimals': isInteger }\"\n  >\n    <input\n      data-currency-formatting\n      class=\"form-control\"\n      maxlength=\"{{maxLength}}\"\n      placeholder=\"{{placeholder}}\"\n      data-ng-model=\"whole\"\n      aria-label=\"{{:: messages['label.amount'] }}\"\n      data-role=\"ui-bb-currency-input-ng-amount\"\n    />\n  </div>\n  <div class=\"seperator\" data-ng-show=\"!isInteger\">\n    <span data-role=\"ui-bb-currency-input-ng-seperator\">{{seperator}}</span>\n  </div>\n  <div class=\"decimals\" data-ng-show=\"!isInteger\">\n    <input\n      data-decimals-formatting\n      placeholder=\"{{decimalPlaceholder}}\"\n      maxlength=\"{{decimalMaxLength}}\"\n      class=\"form-control\"\n      data-ng-model=\"decimals\"\n      aria-label=\"{{:: messages['label.decimals'] }}\"\n      data-ng-disabled=\"decimalMaxLength === 0\"\n      data-role=\"ui-bb-currency-input-ng-decimals\"\n    />\n  </div>\n`;\n\nexport default ($locale, currencyAttr) => ({\n  restrict: 'E',\n  link: (scope, element, attrs, ngModelCtrl) => {\n    const setDecimalAttrs = (decimalLength) => {\n      Object.assign(scope, {\n        decimalMaxLength: decimalLength,\n        decimalPlaceholder: Array(decimalLength + 1).join('0'),\n      });\n    };\n    // set default decimal field attributes\n    setDecimalAttrs(2);\n\n    Object.assign(scope, {\n      seperator: $locale.NUMBER_FORMATS.DECIMAL_SEP,\n      isInteger: attrs.integer !== undefined,\n      placeholderCurrency: 'EUR',\n    });\n\n    const preSelectOnlyCurrency = () => {\n      if (scope.currencies && scope.currencies.length === 1) {\n        Object.assign(scope, {\n          currency: scope.currencies[0].name,\n        });\n      }\n    };\n    // Preselect the currency if there is only 1\n    preSelectOnlyCurrency();\n\n    const decimalInput = element[0].querySelector('.decimals input');\n\n    const validate = (amount) => {\n      const isValid = amount && parseFloat(amount.value) > 0;\n      ngModelCtrl.$setValidity('invalidAmount', isValid);\n    };\n\n    const fixDecimals = (decimals) => {\n      if (decimals === '' || scope.decimalMaxLength === 0) {\n        return undefined;\n      }\n      if (decimals && decimals.length < scope.decimalMaxLength) {\n        return decimals + '0'.repeat(scope.decimalMaxLength - decimals.length);\n      }\n      if (decimals && decimals.length > scope.decimalMaxLength) {\n        return decimals.substr(0, scope.decimalMaxLength);\n      }\n      return decimals;\n    };\n\n    const parse = (amount) => {\n      const [whole, decimals] = amount && amount.value ? amount.value.toString().split('.') : [];\n      return ({\n        whole,\n        decimals: fixDecimals(decimals),\n      });\n    };\n\n    if (!scope.isInteger) {\n      element\n        .find('input')\n        .on('keypress', (e) => {\n          // if ',' or '.' was pressed move focus to decimal field\n          if (e.key === ',' || e.key === '.') {\n            decimalInput.focus();\n          }\n        });\n    }\n\n    let dropdownSelectCtrl;\n    ngModelCtrl.$formatters.push((amount) => {\n      if (amount && amount.currency) {\n        Object.assign(scope, {\n          currency: amount.currency || scope.currencies[0],\n        });\n        setDecimalAttrs(currencyAttr.decimalDigits(scope.currency));\n      }\n\n      Object.assign(scope, parse(amount));\n      validate(amount);\n\n      dropdownSelectCtrl = dropdownSelectCtrl || element\n        .find('ui-bb-dropdown-select')\n        .controller('uiBbDropdownSelect');\n\n      // when amount changes externally\n      // update dropdown model\n      if (amount && amount.currency) {\n        dropdownSelectCtrl.select(amount.currency);\n      }\n\n      return amount;\n    });\n\n    ngModelCtrl.$parsers.push((amount) => {\n      validate(amount);\n\n      return amount;\n    });\n\n    scope.$watch('currency + whole + decimals', () => {\n      setDecimalAttrs(currencyAttr.decimalDigits(scope.currency));\n      if (scope.decimals && scope.decimals.length > scope.decimalMaxLength) {\n        Object.assign(scope, { decimals: scope.decimals.substr(0, scope.decimalMaxLength) });\n      }\n\n      let value = null;\n      if (scope.whole || scope.decimals) {\n        const decLength = scope.decimals ? scope.decimals.length : 0;\n        const decimals = (scope.decimalMaxLength > 0 ? '.' : '') +\n          (scope.decimals || '') + Array((scope.decimalMaxLength - decLength) + 1).join('0');\n        value = `${scope.whole || '0'}${decimals}`;\n      }\n\n      const amount = {\n        value,\n        whole: scope.whole,\n        decimals: scope.decimals,\n        currency: scope.currency,\n      };\n\n      ngModelCtrl.$setViewValue(amount);\n    });\n  },\n  require: 'ngModel',\n  template,\n  scope: {\n    onCurrencyChange: '&',\n    placeholder: '@',\n    maxLength: '<',\n    currencies: '<',\n    /**\n     * @description\n     * List of messages to be shown by component\n     *\n     * @name uiBbCurrencyInputNg#messages\n     * @type {object} messages\n     */\n    messages: '<',\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-currency-input-ng/scripts/currency-input.js","import utils from './formatting-utils';\n\nconst currencyFormatting = ($filter, $locale) => ({\n  require: 'ngModel',\n  restrict: 'A',\n  link: (scope, element, attrs, ngModel) => {\n    const inputMaxLength = scope.maxLength;\n    const invalidChars = /[a-zA-Z!?>:;|<@#%^&*)(+/\\\\={}[\\]_]/g;\n\n    // manually trigger the $formatters pipeline\n    function triggerRender() {\n      ngModel.$setViewValue(\n        ngModel.$formatters.reduce((value, fn) => fn(value), ngModel.$modelValue)\n      );\n    }\n\n    let filter = $filter('number');\n\n    // extend input max length by adding number of special characters (like ',')\n    const updateMaxLength = (number) =>\n      Object.assign(scope, {\n        maxLength: inputMaxLength + utils.specialCharsCount(number, filter(number, 0)),\n      });\n\n    scope.$watch(\n      () => scope.$eval(attrs.currencyFilter),\n      (f) => {\n        filter = f ? $filter(f) : $filter('number');\n        triggerRender();\n      }\n    );\n\n    ngModel.$formatters.push((value) => {\n      updateMaxLength(value);\n      return filter(value, 0);\n    });\n\n    ngModel.$parsers.push((value) => {\n      if (value === '') {\n        return value;\n      }\n\n      let numericChars;\n      // ignore non-numeric characters\n      if (ngModel.$modelValue >= 0) {\n        numericChars = value.replace(invalidChars, '');\n      } else {\n        numericChars = value.replace(invalidChars, 0);\n      }\n\n      const decimalPosition = numericChars.indexOf($locale.NUMBER_FORMATS.DECIMAL_SEP);\n      const groupSeparator = $locale.NUMBER_FORMATS.GROUP_SEP.replace(/[.]/g, '\\\\$&');\n\n      let number = utils.toFloat(numericChars\n        .replace(new RegExp(groupSeparator, 'g'), '')\n        .substring(0, decimalPosition !== -1 ? decimalPosition : numericChars.length))\n        .toFixed();\n\n      if (!isNaN(number)) {\n        // in case when value is pasted, it can take advantage of\n        // extended max length (special character) and exceed input limits\n        // make sure that this doesn't happen\n        number = utils.truncateNumber(utils.toFloat(number), inputMaxLength).toFixed();\n\n        const formatted = filter(number, 0);\n        updateMaxLength(number);\n\n        // did we add a comma or currency symbol?\n        const specialCharactersCountChange = [numericChars, formatted]\n          .map((string) => utils.occurrences(string, utils.diffChars(numericChars, formatted)))\n          .reduce((prev, cur) => (cur - prev));\n\n        // compute the new selection range, correcting for\n        // formatting introduced by the number or currency $filter\n        const selectionRange = [\n          element[0].selectionStart,\n          element[0].selectionEnd,\n        ].map((position) => (position + specialCharactersCountChange));\n\n        // set the formatted value in the view\n        ngModel.$setViewValue(formatted);\n        ngModel.$render();\n\n        // set the cursor back to its expected position\n        // (since $render resets the cursor the the end)\n        element[0].setSelectionRange(selectionRange[0], selectionRange[1]);\n      } else {\n        ngModel.$setViewValue(number.replace(invalidChars, 0));\n        ngModel.$render();\n\n        // reset input max length to default value\n        Object.assign(scope, { maxLength: inputMaxLength });\n      }\n      return number;\n    });\n  },\n});\n\nexport default currencyFormatting;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-currency-input-ng/scripts/currency-formatting.js","const utils = {\n  // (haystack: String, needles: Array<String>) => Number\n  // eg. ('foo', ['o']) => 2\n  occurrences: (haystack, needles) =>\n    needles\n      // get counts\n      .map((needle) => {\n        const matches = needle\n          .replace(/\\[/g, '\\\\[')\n          .replace(/]/g, '\\\\]');\n        return (\n          haystack.match(new RegExp(`[${matches}]`, 'g')) || []\n        ).length;\n      })\n      // sum counts\n      .reduce((prev, cur) => prev + cur, 0),\n\n  // (currencyString: String) => Number\n  // eg. \"$123.00\" => 123.00, \"EUR123.00\" => 123.00\n  toFloat: (currencyString) => parseFloat(currencyString.replace(/[^0-9.]/g, ''), 10),\n\n  // (array: Array) => Array\n  // eg. [1,2,2] => [1,2]\n  uniq: (array) =>\n    array.reduce((prev, cur) => (prev.indexOf(cur) > -1 ? prev : prev.concat(cur)), []),\n\n  // (a: String, b: String) => Array<String>\n  // eg. \"1,323.00\", \"$123.00\" => [\"$\", \",\"]\n  uniqueChars: (a, b) => utils.uniq(\n    b.split('').filter(char => !~a.indexOf(char)).concat(\n    a.split('').filter(char => !~b.indexOf(char)))\n  ),\n\n  // (a: String, b: String) => Array<String>\n  // eg. \"1,234,000.00\", \"1,234000.00\" => [\",\"]\n  diffChars: (a, b) => {\n    const aChars = a.match(/\\D/g) || [];\n    const bChars = b.match(/\\D/g) || [];\n\n    const calc = (list) => {\n      const res = {};\n      list.forEach(item => {\n        if (res[item]) {\n          res[item]++;\n        } else {\n          res[item] = 1;\n        }\n      });\n      return res;\n    };\n\n    const diff = (l1, l2, res = []) => {\n      Object.keys(l1).forEach((i) => {\n        if ((i in l2 && l1[i] > l2[i]) || !l2[i]) {\n          res.push(i);\n        }\n      });\n      return res;\n    };\n\n    const aMatch = calc(aChars);\n    const bMatch = calc(bChars);\n\n    return diff(aMatch, bMatch, diff(bMatch, aMatch));\n  },\n\n  // (number: Number, limit: Number) => Number\n  // eg. (1234, 6) => 1234, (1234, 3) => 123\n  truncateNumber: (number, limit) => {\n    let truncatedNumber = number;\n    while (Math.log10(truncatedNumber) >= limit) {\n      truncatedNumber = Math.floor(truncatedNumber / 10);\n    }\n    return truncatedNumber;\n  },\n\n  // (number: Number, formatted: String) => Number\n  // eg. (1234, \"1,234\") => 1, (123, \"123\") => 0\n  specialCharsCount: (number, formatted) => {\n    if (!number || !formatted) {\n      return 0;\n    }\n    const specialCharacters = utils.uniqueChars(number, formatted);\n    return utils.occurrences(formatted, specialCharacters);\n  },\n};\n\nexport default utils;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-currency-input-ng/scripts/formatting-utils.js","const decimalsFormatting = () => ({\n  require: 'ngModel',\n  link: (scope, element, attrs, ngModelCtrl) => {\n    ngModelCtrl.$parsers.push((value) => {\n      ngModelCtrl.$setViewValue(value.replace(/[^0-9]/g, ''));\n      ngModelCtrl.$render();\n\n      return value;\n    });\n  },\n});\n\nexport default decimalsFormatting;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-currency-input-ng/scripts/decimals-formatting.js"],"sourceRoot":""}