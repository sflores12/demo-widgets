{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*******","webpack:///webpack/bootstrap ed40b4c6a0ad86da1c64?6024*******","webpack:///./lib-bb-user-data-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*","webpack:///./lib-bb-user-data-ng/scripts/index.js","webpack:///external \"data-bb-cxp-authentication-http-ng\"","webpack:///./lib-bb-user-data-ng/scripts/user-data.service.js"],"names":["moduleKey","bbUserDataServiceKey","module","service","name","Promise","cxpAuth","portal","window","b$","getUserFromPortal","loggedInUserId","getUserData","userData","resolve","username","getProfile","then","profile","response","data"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,0C;;;;;;;ACAA,gD;;;;;;;;;;;;;;ACIA;;;;AACA;;;;AACA;;;;;;AAEA,KAAMA,YAAY,qBAAlB;AACA;;;;;AATA;;;;AAcO,KAAMC,sDAA0BD,SAA1B,qBAAN;;mBAEQ,0BACZE,MADY,CACLF,SADK,EACM,yCADN,EAEZG,OAFY,CAEJF,oBAFI,sBAGZG,I;;;;;;;ACnBH,iD;;;;;;;;;;;;;ACCA;;mBACe,CAAC,IAAD,2DAAiC,UAACC,OAAD,EAAUC,OAAV,EAAsB;AACpE,OAAMC,SAASC,OAAOC,EAAP,IAAaD,OAAOC,EAAP,CAAUF,MAAtC;;AAEA,OAAMG,oBAAoB,SAApBA,iBAAoB,GAAM;AAC9B,SAAIH,UAAUA,OAAOI,cAAjB,IAAmCJ,OAAOI,cAAP,KAA0B,MAAjE,EAAyE;AACvE,cAAOJ,MAAP;AACD;AACD,YAAO,EAAP;AACD,IALD;;AAOA,UAAO;AACL;;;;;;;AAOAK,kBAAa,uBAAM;AACjB,WAAIL,MAAJ,EAAY;AACV,aAAMM,WAAWH,mBAAjB;AACA,gBAAOL,QAAQS,OAAR,CAAgB;AACrBC,qBAAUF,SAASF;AADE,UAAhB,CAAP;AAGD;AACD,cAAOL,QAAQU,UAAR,GAAqBC,IAArB,CAA0B,oBAAY;AAC3C,aAAMC,UAAUC,SAASC,IAAT,IAAiB,EAAjC;AACA,gBAAO;AACLL,qBAAUG,QAAQH;AADb,UAAP;AAGD,QALM,CAAP;AAMD;AArBI,IAAP;AAuBD,EAjCc,C,EAFf,mB","file":"lib-bb-user-data-ng/scripts/lib-bb-user-data-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"data-bb-cxp-authentication-http-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"lib-bb-user-data-ng\", [\"vendor-bb-angular\", \"data-bb-cxp-authentication-http-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lib-bb-user-data-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"data-bb-cxp-authentication-http-ng\"));\n\telse\n\t\troot[\"lib-bb-user-data-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"data-bb-cxp-authentication-http-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_26__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed40b4c6a0ad86da1c64","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib-bb-user-data-ng/model.xml\n// module id = 0\n// module chunks = 7","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 7 8 9 10 11 12 13 14 15 17 18","/**\n * @module lib-bb-user-data-ng\n */\n\nimport angular from 'vendor-bb-angular';\nimport cXPAuthenticationDataModuleKey from 'data-bb-cxp-authentication-http-ng';\nimport userDataService from './user-data.service';\n\nconst moduleKey = 'lib-bb-user-data-ng';\n/**\n * @name userDataServiceKey\n * @type {string}\n * @description User data service name\n */\nexport const bbUserDataServiceKey = `${moduleKey}:userDataService`;\n\nexport default angular\n  .module(moduleKey, [cXPAuthenticationDataModuleKey])\n  .service(bbUserDataServiceKey, userDataService)\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./lib-bb-user-data-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_26__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"data-bb-cxp-authentication-http-ng\"\n// module id = 26\n// module chunks = 7 9 10","/* global window */\nimport { cXPAuthenticationDataKey } from 'data-bb-cxp-authentication-http-ng';\nexport default ['$q', cXPAuthenticationDataKey, (Promise, cxpAuth) => {\n  const portal = window.b$ && window.b$.portal;\n\n  const getUserFromPortal = () => {\n    if (portal && portal.loggedInUserId && portal.loggedInUserId !== 'null') {\n      return portal;\n    }\n    return {};\n  };\n\n  return {\n    /**\n     * @description Retrieves information about currently logged in user\n     * from CX endpoint or CXP global object\n     * @name getUserData\n     * @type {function}\n     * @returns {Promise.<Object>} an object containing user data\n     */\n    getUserData: () => {\n      if (portal) {\n        const userData = getUserFromPortal();\n        return Promise.resolve({\n          username: userData.loggedInUserId,\n        });\n      }\n      return cxpAuth.getProfile().then(response => {\n        const profile = response.data || {};\n        return {\n          username: profile.username,\n        };\n      });\n    },\n  };\n}];\n\n\n\n// WEBPACK FOOTER //\n// ./lib-bb-user-data-ng/scripts/user-data.service.js"],"sourceRoot":""}