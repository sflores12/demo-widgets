{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**********","webpack:///webpack/bootstrap 5cca3903bb887dfc34d7?ea53**********","webpack:///./ui-bb-credit-suggest-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01********","webpack:///external \"ui-bb-iban-ng\"?26a5","webpack:///external \"ui-bb-avatar-ng\"?29da","webpack:///external \"vendor-bb-angular\"?a114","webpack:///./ui-bb-credit-suggest-ng/scripts/index.js","webpack:///external \"ui-bb-autocomplete-search-ng\"","webpack:///external \"vendor-bb-uib-debounce\"","webpack:///external \"vendor-bb-uib-position\"","webpack:///external \"vendor-bb-uib-typeahead\"","webpack:///./ui-bb-credit-suggest-ng/scripts/component.js","webpack:///./ui-bb-credit-suggest-ng/scripts/constants.js","webpack:///./ui-bb-credit-suggest-ng/scripts/controller.js","webpack:///external \"lib-bb-iban\""],"names":["module","component","controller","name","bindings","accounts","messages","customTemplateId","allowExternal","getAccounts","formatAmountTemplateUrl","hideAccountNumber","template","FORMAT_AMOUNT_TEMPLATE_URL","$element","$attrs","$filter","$templateCache","$timeout","i18nFilter","GroupName","INTERNAL","EXTERNAL","ctrl","EMPTY_VALUE","bban","iban","isNew","ngModelCtrl","ibanInput","find","eq","onblur","validateIban","searchModel","IBAN","$doCheck","$postLink","formatAmountTemplate","get","put","selected","selectedSetter","isMyAccount","identifier","acc","external","isIbanFocused","querySelector","isValid","$setValidity","filterByAccountOrContactName","list","search","filter","item","toLowerCase","indexOf","contactPerson","filterByIban","replace","filterByBban","BBAN","addGroupHeaders","normalisedAccounts","internalGroup","account","length","forEach","i","group","Object","assign","externalGroup","sort","a","b","previousContactName","externalAccount","filterAccounts","options","filterBy","searchQuery","normalizedSearch","filteredAccounts","filteredBy","Promise","resolve","totalItems","data","clearSelected","$setPristine","$setViewValue","newValue","$formatters","push","credit","undefined","filterInFocus","ibanInFocus","markIbanStatus"],"mappings":"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","file":"ui-bb-credit-suggest-ng/scripts/ui-bb-credit-suggest-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-iban-ng\"), require(\"ui-bb-avatar-ng\"), require(\"vendor-bb-angular\"), require(\"ui-bb-autocomplete-search-ng\"), require(\"vendor-bb-uib-debounce\"), require(\"vendor-bb-uib-position\"), require(\"vendor-bb-uib-typeahead\"), require(\"lib-bb-iban\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-credit-suggest-ng\", [\"ui-bb-i18n-ng\", \"ui-bb-iban-ng\", \"ui-bb-avatar-ng\", \"vendor-bb-angular\", \"ui-bb-autocomplete-search-ng\", \"vendor-bb-uib-debounce\", \"vendor-bb-uib-position\", \"vendor-bb-uib-typeahead\", \"lib-bb-iban\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-credit-suggest-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-iban-ng\"), require(\"ui-bb-avatar-ng\"), require(\"vendor-bb-angular\"), require(\"ui-bb-autocomplete-search-ng\"), require(\"vendor-bb-uib-debounce\"), require(\"vendor-bb-uib-position\"), require(\"vendor-bb-uib-typeahead\"), require(\"lib-bb-iban\"));\n\telse\n\t\troot[\"ui-bb-credit-suggest-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"ui-bb-iban-ng\"], root[\"ui-bb-avatar-ng\"], root[\"vendor-bb-angular\"], root[\"ui-bb-autocomplete-search-ng\"], root[\"vendor-bb-uib-debounce\"], root[\"vendor-bb-uib-position\"], root[\"vendor-bb-uib-typeahead\"], root[\"lib-bb-iban\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_38__, __WEBPACK_EXTERNAL_MODULE_57__, __WEBPACK_EXTERNAL_MODULE_88__, __WEBPACK_EXTERNAL_MODULE_99__, __WEBPACK_EXTERNAL_MODULE_100__, __WEBPACK_EXTERNAL_MODULE_101__, __WEBPACK_EXTERNAL_MODULE_102__, __WEBPACK_EXTERNAL_MODULE_106__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5cca3903bb887dfc34d7","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-credit-suggest-ng/model.xml\n// module id = 0\n// module chunks = 11","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 8\n// module chunks = 0 1 2 3 4 6 7 8 9 11 12","module.exports = __WEBPACK_EXTERNAL_MODULE_38__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-iban-ng\"\n// module id = 38\n// module chunks = 2 11 12","module.exports = __WEBPACK_EXTERNAL_MODULE_57__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-avatar-ng\"\n// module id = 57\n// module chunks = 5 11","module.exports = __WEBPACK_EXTERNAL_MODULE_88__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 88\n// module chunks = 10 11 12 13 14 15 16 17 18 19","/**\n * @module ui-bb-credit-suggest-ng\n * @description\n * Credit suggest input UI component\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbCreditSuggestKey from 'ui-bb-credit-suggest-ng';\n *\n * export const dependencyKeys = [\n *   uiBbCreditSuggestKey,\n * ];\n *\n * // file: templates/template.ng.html\n * <ui-bb-credit-suggest-ng\n *   name=\"credit\"\n *   data-ng-model=\"$ctrl.payment.to\"\n *   data-accounts=\"$ctrl.accountsTo\"\n *   data-iban-validation-classes\n *   required\n * ></ui-bb-credit-suggest-ng>\n */\n\nimport angular from 'vendor-bb-angular';\nimport uiBbIbanNgKey from 'ui-bb-iban-ng';\nimport uiBbAutocompleteSearch from 'ui-bb-autocomplete-search-ng';\nimport vendorBbUibDebounceKey from 'vendor-bb-uib-debounce';\nimport vendorBbUibPositionKey from 'vendor-bb-uib-position';\nimport vendorBbUibTypeaheadKey from 'vendor-bb-uib-typeahead';\nimport uiBbAvatarKey from 'ui-bb-avatar-ng';\nimport i18nNgKey from 'ui-bb-i18n-ng';\n\nimport component from './component';\nimport controller from './controller';\n\nexport default angular\n  .module('ui-bb-credit-suggest-ng', [\n    vendorBbUibDebounceKey,\n    vendorBbUibPositionKey,\n    vendorBbUibTypeaheadKey,\n    i18nNgKey,\n    uiBbIbanNgKey,\n    uiBbAutocompleteSearch,\n    uiBbAvatarKey,\n  ])\n  .component('uiBbCreditSuggestNg', component)\n  .controller('uiBBCreditSuggestNgController',\n    ['$element', '$attrs', '$filter', '$templateCache', '$timeout', controller])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_99__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-autocomplete-search-ng\"\n// module id = 99\n// module chunks = 11","module.exports = __WEBPACK_EXTERNAL_MODULE_100__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-debounce\"\n// module id = 100\n// module chunks = 11","module.exports = __WEBPACK_EXTERNAL_MODULE_101__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-position\"\n// module id = 101\n// module chunks = 11","module.exports = __WEBPACK_EXTERNAL_MODULE_102__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-typeahead\"\n// module id = 102\n// module chunks = 11","import FORMAT_AMOUNT_TEMPLATE_URL from './constants';\n\n/**\n * @name uiBBCreditSuggest\n * @type {object}\n *\n * @property {object[]} accounts List of accounts to filter and select with user input\n * @property {object} messages Localized messages\n * @property {string} custom-template-id Template ID (or URL)\n * which will be rendered as an option in dropdown\n * @property {boolean} allow-external Are external accounts included in list.\n * If not, IBAN field stays disabled\n * @property {boolean} hide-account-number\n * Hides account number (bban) and searching by bban functionality\n * @property {function} get-accounts\n * External method for transform accounts array into custom structure\n * Can be defined in extensions helpers\n * @property {void} iban-validation-classes Append has-success and has-error classes\n * to IBAN field on validation\n * @property {?String} formatAmountTemplateUrl Custom template url for popup element.\n */\nconst component = {\n  bindings: {\n    accounts: '<',\n    /**\n     * @description\n     * List of messages to be shown by component\n     *\n     * @name uiBBCreditSuggest#messages\n     * @type {object} messages\n     */\n    messages: '<',\n    /**\n     * @description\n     * Template ID (or URL) which will be rendered\n     * as an option in dropdown\n     *\n     * @name uiBBCreditSuggest#customTemplateId\n     * @type {string} customTemplateId\n     */\n    customTemplateId: '@',\n    allowExternal: '<',\n    getAccounts: '&',\n    formatAmountTemplateUrl: '@?',\n    hideAccountNumber: '<?',\n  },\n  controller: 'uiBBCreditSuggestNgController',\n  template: `\n    <div class=\"credit-suggest has-feedback\">\n      <div class=\"form-group\">\n        <label data-i18n-key=\"form.label.name\"></label>\n        <div class=\"input-group col-xs-12\">\n         \n          <ui-bb-autocomplete-search-ng\n            data-ng-required=\"true\"\n            data-label-key=\"name\"\n            data-ng-focus=\"$ctrl.validateIban('blur')\"\n            data-ng-model=\"$ctrl.searchModel.name\"\n            data-load-result=\"$ctrl.filterAccounts(options, 'name')\"\n            data-ng-model-options=\"{\n              getterSetter: true,\n              allowInvalid: true\n            }\"\n            data-ng-focus=\"$ctrl.validateIban()\"\n            data-on-select=\"$ctrl.selectedSetter($model)\"\n            data-on-clear=\"$ctrl.clearSelected()\"\n            data-search-box-config=\"{\n              labels: { placeholder: $ctrl.messages.filterPlaceholder }\n            }\"\n            data-match-template-url=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\"\n            data-messages=\"{\n                result: $ctrl.messages.oneResultFound,\n                results: $ctrl.messages.resultsFound\n              }\">\n          </ui-bb-autocomplete-search-ng>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label data-i18n-key=\"form.label.iban\"></label>      \n        <ui-bb-autocomplete-search-ng\n            data-ng-required=\"!$ctrl.searchModel.BBAN\"\n            data-label-key=\"IBAN\"\n            data-disabled=\"$ctrl.searchModel.BBAN\"\n            data-ng-model=\"$ctrl.searchModel.IBAN\"\n            data-ng-blur=\"$ctrl.validateIban('blur')\"\n            data-ng-model-options=\"{\n              getterSetter: true,\n              allowInvalid: false\n            }\"\n            data-load-result=\"$ctrl.filterAccounts(options, 'iban')\"\n            data-on-select=\"$ctrl.selectedSetter($model)\"\n            data-on-clear=\"$ctrl.clearSelected()\"\n            data-search-box-config=\"{\n               showIcon : false,\n               hideButton : true,\n               labels: { placeholder: $ctrl.messages.accountPlaceholder },\n             }\"\n            data-match-template-url=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\"\n            data-messages=\"{\n                result: $ctrl.messages.oneResultFound,\n                results: $ctrl.messages.resultsFound\n              }\">\n        </ui-bb-autocomplete-search-ng>\n      </div>\n      <div class=\"form-group\"\n        data-ng-if=\"!$ctrl.hideAccountNumber\">\n        <label data-i18n-key=\"form.label.accountnumber\"></label>\n        <ui-bb-autocomplete-search-ng\n          data-ng-required=\"!$ctrl.searchModel.IBAN\"\n          data-disabled=\"$ctrl.searchModel.IBAN\"\n          data-label-key=\"BBAN\"\n          data-ng-model=\"$ctrl.searchModel.BBAN\"\n          data-ng-model-options=\"{\n            getterSetter: true,\n            allowInvalid: true\n          }\"\n          data-load-result=\"$ctrl.filterAccounts(options, 'bban')\"\n          data-on-select=\"$ctrl.selectedSetter($model)\"\n          data-on-clear=\"$ctrl.clearSelected()\"\n          data-search-box-config=\"{\n               showIcon : false,\n               hideButton : true,\n               labels: { placeholder: $ctrl.messages.accountnumberPlaceholder },\n             }\"\n            data-match-template-url=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\"\n            data-messages=\"{\n                result: $ctrl.messages.oneResultFound,\n                results: $ctrl.messages.resultsFound\n              }\">\n        </ui-bb-autocomplete-search-ng>\n      </div>\n    </div>\n    \n    <script type=\"text/ng-template\" id=\"ui-bb-credit-suggest-ng/autocomplete_match_custom.html\">\n      <div class=\"search-result-header px-2 py-3\"\n        data-ng-if=\"match.model.group\" data-ng-bind-html=\"match.model.group\" />\n        <a href>\n          <div class=\"row\">\n            <div class=\"col-xs-8\">\n              <div ng-if=\"match.model.accountName\" data-ng-bind=\"match.model.accountName\" />\n              <div ng-if=\"match.model.name && !match.model.accountName\"\n                data-ng-bind-html=\"match.model.filteredBy == 'name' ? \n                (match.model.name | uibTypeaheadHighlight:query) : match.model.name\" />\n              <div data-ng-bind-html=\"match.model.filteredBy == 'iban' \n                || match.model.filteredBy == 'bban' ? \n                (match.model.identifier | uibTypeaheadHighlight:query) : match.model.identifier\" />\n            </div>\n            <div class=\"col-xs-4\" data-ng-if=\"match.model.amount\" >\n              <div data-ng-include=\"'${FORMAT_AMOUNT_TEMPLATE_URL}'\" \n                data-ng-init=\"$option=match.model\"></div>\n            </div>\n          </div>\n        </a>\n    </script>\n    \n    <script type=\"text/ng-template\" id=\"${FORMAT_AMOUNT_TEMPLATE_URL}\">\n      <ui-bb-format-amount\n        class=\"pull-right search-result-ammount\"\n        data-amount=\"$option.amount\"\n        data-currency=\"$option.currency\"\n        data-wrap>\n      </ui-bb-format-amount>\n    </script>\n  `,\n};\n\nexport default component;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/component.js","const FORMAT_AMOUNT_TEMPLATE_URL = 'ui-bb-credit-suggest-ng/format-amount-template.html';\n\nexport default FORMAT_AMOUNT_TEMPLATE_URL;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/constants.js","\nimport { isValidIBAN } from 'lib-bb-iban';\nimport FORMAT_AMOUNT_TEMPLATE_URL from './constants';\n\n/**\n * @name uiBbCreditSuggestController\n * @ngkey uiBbCreditSuggestController\n * @type {object}\n * @description\n * Credit suggest component controller.\n */\nexport default function controller($element, $attrs, $filter, $templateCache, $timeout) {\n  const i18nFilter = $filter('i18n');\n\n  const GroupName = {\n    INTERNAL: i18nFilter('ui-bb-credit-suggest-ng.group.internal'),\n    EXTERNAL: i18nFilter('ui-bb-credit-suggest-ng.group.external'),\n  };\n\n  const ctrl = {};\n\n  const EMPTY_VALUE = {\n    name: '',\n    bban: '',\n    iban: '',\n    isNew: true,\n  };\n\n  const ngModelCtrl = $element.controller('ngModel');\n  const ibanInput = $element.find('input').eq(1);\n\n  ibanInput[0].onblur = () => {\n    ctrl.validateIban(ctrl.searchModel.IBAN);\n    ctrl.$doCheck();\n  };\n\n  /**\n   * @description\n   * Called after this controller's element and its children have been linked\n   * Initialize necessary functionality\n   *\n   * @name uiBbCreditSuggestController#$postLink\n   * @type {function} $postLink\n   */\n  const $postLink = () => {\n    if (ctrl.formatAmountTemplateUrl) {\n      const formatAmountTemplate = $templateCache.get(ctrl.formatAmountTemplateUrl);\n      $templateCache.put(FORMAT_AMOUNT_TEMPLATE_URL, formatAmountTemplate);\n    }\n\n    // Restore previous selection (if any)\n    $timeout(() => {\n      if (ctrl.selected) {\n        ctrl.selectedSetter(ctrl.selected);\n      }\n    });\n  };\n\n  const isMyAccount = (identifier) =>\n    ctrl.accounts && !!ctrl.accounts.find(acc => !acc.external && acc.identifier === identifier);\n\n   /**\n   * @description\n   * Checks if iban should be validated, and if so, sets the result on model.\n   *\n   * @name uiBbCreditSuggestController#validateIban\n   * @inner\n   * @param {string} iban to be validated\n   * @type {function} validateIban\n   */\n  const validateIban = iban => {\n    const isIbanFocused = $element[0].querySelector('input:focus') === ibanInput[0];\n\n    const isValid =\n      !iban ||\n      isIbanFocused ||\n      isMyAccount(iban) ||\n      isValidIBAN(iban);\n\n    ngModelCtrl.$setValidity('iban', isValid);\n    return isValid;\n  };\n\n  const filterByAccountOrContactName = (list, search) =>\n    list.filter(item => ((item.name && item.name.toLowerCase().indexOf(search) !== -1) ||\n      (item.contactPerson && item.contactPerson.toLowerCase().indexOf(search) !== -1)));\n\n  const filterByIban = (list, search) =>\n    list.filter(item => (item.IBAN &&\n      (item.IBAN.toLowerCase().replace(' ', '').indexOf(search.replace(' ', '')) !== -1)));\n\n  const filterByBban = (list, search) =>\n    list.filter(item => (!item.IBAN && item.BBAN &&\n      (item.BBAN.toLowerCase().replace(' ', '').indexOf(search.replace(' ', '')) !== -1)));\n\n  /**\n   * @description\n   * Adds a group property to a list of accounts for the first occurence of a contactPerson.\n   * Internal accounts will be in one seperate group.\n   *\n   * So: (cp = contactPerson, all with external prop):\n   *  [{cp: 'Joost', id:'1', external: true},\n   *  {cp: 'Karel', id:'2', external: true},\n   *  {cp: 'SomeInternal', id:'3'},\n   *  {cp: 'Joost', id:'4', external: true}]\n   *\n   * Will be:\n   *  [{cp: 'SomeInternal', id:'3', group: [GroupName.INTERNAL]},\n   *  {cp: 'Joost', id:'1', group: 'Joost'},\n   *  {cp: 'Joost', id:'4'},\n   *  {cp: 'Karel', id:'2', group: Karel}]\n   *\n   * @name uiBbCreditSuggestController#addGroupHeaders\n   * @inner\n   * @param {array} normalisedAccounts\n   * @type {function} addGroupHeaders\n   */\n  const addGroupHeaders = (normalisedAccounts) => {\n    const internalGroup = normalisedAccounts.filter(account => !account.external);\n\n    if (internalGroup.length > 0) {\n      // eslint-disable-next-line no-param-reassign\n      internalGroup.forEach((i) => delete i.group);\n      Object.assign(internalGroup[0], { group: GroupName.INTERNAL });\n    }\n\n    const externalGroup = normalisedAccounts.filter(account => account.external);\n    // sort on contactPerson then within that on name. Two statements for readability\n    externalGroup.sort((a, b) => (a.contactPerson < b.contactPerson ? -1 : 1));\n    externalGroup.sort((a, b) => {\n      if (a.contactPerson === b.contactPerson) {\n        if (a.name < b.name) return -1;\n        return 1;\n      }\n      return 0;\n    });\n\n    let previousContactName;\n    for (const externalAccount of externalGroup) {\n      if (externalAccount.contactPerson !== previousContactName) {\n        externalAccount.group = externalAccount.contactPerson;\n      }\n      previousContactName = externalAccount.contactPerson;\n    }\n\n    return [...internalGroup, ...externalGroup];\n  };\n\n  /**\n   * @description\n   * Filters accounts by name\n   * Called by the uiBBAutocomplete load-result - uses as a data composer for accounts\n   *\n   * @name uiBbCreditSuggestController#filterAccounts\n   * @type {function}\n   * @param {object} options as provided by uiBBAutocomplete, we only use searchQuery prop\n   * @param {string} filterBy specifies which field triggers filtering (name, iban or bban).\n   */\n  const filterAccounts = (options, filterBy) => {\n    if (options && options.searchQuery) {\n      const normalisedAccounts = ctrl.getAccounts({ accounts: ctrl.accounts }) || ctrl.accounts;\n      const normalizedSearch = options.searchQuery.toLowerCase();\n\n      let filteredAccounts;\n      if (filterBy === 'iban') {\n        filteredAccounts = filterByIban(normalisedAccounts, normalizedSearch);\n      } else if (filterBy === 'bban') {\n        filteredAccounts = filterByBban(normalisedAccounts, normalizedSearch);\n      } else {\n        filteredAccounts = filterByAccountOrContactName(normalisedAccounts, normalizedSearch);\n      }\n\n      filteredAccounts.forEach((item) => Object.assign(item, { filteredBy: filterBy }));\n      return Promise.resolve({\n        totalItems: filteredAccounts.length,\n        data: addGroupHeaders(filteredAccounts),\n      });\n    // eslint-disable-next-line no-else-return\n    } else {\n      const normalisedAccounts = ctrl.getAccounts({ accounts: ctrl.accounts }) || ctrl.accounts;\n      return Promise.resolve({\n        totalItems: normalisedAccounts.length,\n        data: addGroupHeaders(normalisedAccounts),\n      });\n    }\n  };\n\n    /**\n   * @description\n   * Clears the selected beneficiary account\n   *\n   * @name uiBbCreditSuggestController#$clearSelected\n   * @inner\n   * @type {function} clearSelected\n   */\n  const clearSelected = () => {\n    ctrl.selected = Object.assign({}, EMPTY_VALUE);\n    ctrl.searchModel = {};\n  };\n\n  /**\n   * @description\n   * Default angular function running on digest cycle\n   * Applies selected credit to model.\n   *\n   * @name uiBbCreditSuggestController#$doCheck\n   * @type {function} $doCheck\n   */\n  const $doCheck = () => {\n    const selected = ctrl.selected;\n\n    if (!selected) {\n      ngModelCtrl.$setPristine();\n      clearSelected();\n    } else if (validateIban(ctrl.searchModel.IBAN)) {\n      selected.IBAN = selected.identifier;\n      selected.identifier = ctrl.searchModel.IBAN || ctrl.searchModel.BBAN || selected.identifier;\n      ctrl.selected.name = ctrl.searchModel.name || selected.name;\n    }\n\n    ngModelCtrl.$setViewValue(selected);\n  };\n\n  /**\n   * @description\n   * Sets the beneficiary account\n   *\n   * @name uiBbCreditSuggestController#$selectedSetter\n   * @type {function} selectedSetter\n   */\n  const selectedSetter = (newValue) => {\n    if (newValue || typeof newValue === 'object') {\n      ctrl.selected = Object.assign({}, newValue);\n\n      if (newValue.IBAN || ctrl.hideAccountNumber) {\n        ctrl.searchModel.IBAN = newValue.IBAN;\n        ctrl.searchModel.BBAN = '';\n      } else {\n        ctrl.searchModel.BBAN = newValue.BBAN;\n        ctrl.searchModel.IBAN = '';\n      }\n      ctrl.searchModel.name = newValue.name;\n    }\n\n    return ctrl.selected;\n  };\n\n  ngModelCtrl.$formatters.push((credit) => {\n    ctrl.selected = credit;\n  });\n\n  Object.assign(ctrl, {\n    // models\n    /**\n     * @name uiBbCreditSuggestController#selected\n     * @type {AccountView} selected\n     */\n    selected: undefined,\n    searchModel: {},\n    selectedSetter,\n\n    // methods\n    $postLink,\n    $doCheck,\n    filterAccounts,\n    validateIban,\n    clearSelected,\n\n    // flags\n    filterInFocus: false,\n    ibanInFocus: false,\n    markIbanStatus: false,\n  });\n\n  return ctrl;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-credit-suggest-ng/scripts/controller.js","module.exports = __WEBPACK_EXTERNAL_MODULE_106__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-iban\"\n// module id = 106\n// module chunks = 11"],"sourceRoot":""}