{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6******","webpack:///webpack/bootstrap ba9372d13c966203e28a?ccfa******","webpack:///./widget-bb-turnovers-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114***","webpack:///external \"lib-bb-widget-ng\"?84ad**","webpack:///external \"lib-bb-model-errors\"?7567**","webpack:///external \"lib-bb-event-bus-ng\"?8215","webpack:///external \"lib-bb-currency-ng\"?de3f","webpack:///external \"model-bb-turnovers-ng\"?a943","webpack:///external \"lib-bb-widget-extension-ng\"?b547","webpack:///external \"lib-bb-extension-helpers-ng\"?e731","webpack:///external \"lib-bb-intent-ng\"?add1","webpack:///./widget-bb-turnovers-ng/scripts/index.js","webpack:///./widget-bb-turnovers-ng/scripts/helpers.js","webpack:///./widget-bb-turnovers-ng/scripts/default-hooks.js","webpack:///./widget-bb-turnovers-ng/scripts/constants.js","webpack:///./widget-bb-turnovers-ng/scripts/controller.js","webpack:///./widget-bb-turnovers-ng/scripts/message.js"],"names":["moduleKey","hooksKey","helpersKey","module","factory","$compile","getRule","controller","run","bus","widget","bbIntent","publish","id","getId","init","name","helpers","$timeout","current","debounce","callback","time","cancel","processTurnoverResponse","data","processTurnoverSeries","series","processSelectedProducts","selectedProducts","processProductsList","products","onTurnoversUpdate","params","defaultPeriodStart","date","Date","setMonth","getMonth","toISOString","slice","defaultPeriodEnd","defaultInterval","interval","defaultStartDay","accountSelectionDebounce","processLoadError","error","INTERVAL","DAY","WEEK","MONTH","YEAR","DEFAULT_INTERVAL","DEFAULT_DURATION","DEFAULT_START_DAY","ACCOUNT_CHANGE_DEBOUNCE","TurnoversController","PRODUCT_SELECTED","PRODUCTS_SELECTED","PERIOD_START_CHANGED","PERIOD_END_CHANGED","TURNOVERS_LOAD_FAILED","hooks","model","$ctrl","errorMessage","code","E_PARAMS","updateTurnovers","validateTurnoversParameters","arrangementIds","map","product","periodStartDate","periodEndDate","intervalDuration","intervalStartDay","then","loadTurnovers","loaded","transformToSeries","catch","updateProductsList","getFromStorage","getProductsArray","updateProductsSelected","isFirstProductDefault","isMultipleAccount","setSelectedProducts","setSelectedProduct","onPeriodStartDateChanged","onPeriodEndDateChanged","onProductSelected","onProductsSelected","initProductSelection","getSelectedProducts","getSelectedProduct","selected","initPeriodData","bindEvents","subscribe","selection","$onInit","isLoading","Object","assign"],"mappings":"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","file":"widget-bb-turnovers-ng/scripts/widget-bb-turnovers-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-currency-ng\"), require(\"model-bb-turnovers-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-extension-helpers-ng\"), require(\"lib-bb-intent-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-turnovers-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-event-bus-ng\", \"lib-bb-currency-ng\", \"model-bb-turnovers-ng\", \"lib-bb-widget-extension-ng\", \"lib-bb-extension-helpers-ng\", \"lib-bb-intent-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-turnovers-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-currency-ng\"), require(\"model-bb-turnovers-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"lib-bb-extension-helpers-ng\"), require(\"lib-bb-intent-ng\"));\n\telse\n\t\troot[\"widget-bb-turnovers-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-currency-ng\"], root[\"model-bb-turnovers-ng\"], root[\"lib-bb-widget-extension-ng\"], root[\"lib-bb-extension-helpers-ng\"], root[\"lib-bb-intent-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_37__, __WEBPACK_EXTERNAL_MODULE_38__, __WEBPACK_EXTERNAL_MODULE_40__, __WEBPACK_EXTERNAL_MODULE_41__, __WEBPACK_EXTERNAL_MODULE_42__, __WEBPACK_EXTERNAL_MODULE_43__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ba9372d13c966203e28a","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-turnovers-ng/model.xml\n// module id = 0\n// module chunks = 7","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 22\n// module chunks = 3 4 5 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_26__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 26\n// module chunks = 3 4 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 28\n// module chunks = 3 4 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_37__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 37\n// module chunks = 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_38__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-currency-ng\"\n// module id = 38\n// module chunks = 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_40__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-turnovers-ng\"\n// module id = 40\n// module chunks = 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_41__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 41\n// module chunks = 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_42__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-extension-helpers-ng\"\n// module id = 42\n// module chunks = 6 7","module.exports = __WEBPACK_EXTERNAL_MODULE_43__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 43\n// module chunks = 6 7","/**\n * @module widget-bb-turnovers-ng\n *\n * @description\n * Turnovers\n */\nimport angular from 'vendor-bb-angular';\nimport extendHooks from 'lib-bb-widget-extension-ng';\n\nimport widgetModuleKey, {\n  widgetKey,\n} from 'lib-bb-widget-ng';\n\nimport eventBusModuleKey, {\n  eventBusKey,\n} from 'lib-bb-event-bus-ng';\n\nimport bbIntentModuleKey, {\n  bbIntentKey,\n} from 'lib-bb-intent-ng';\n\nimport modelTurnoversModuleKey, {\n  modelTurnoversKey,\n} from 'model-bb-turnovers-ng';\n\nimport bbExtensionHelpersModuleKey, {\n  extensionHelpersContextKey,\n} from 'lib-bb-extension-helpers-ng';\n\nimport libBbCurrencyNgKey, {\n  bbCurrencyRuleKey,\n} from 'lib-bb-currency-ng';\n\nimport helpers from './helpers';\nimport defaultHooks from './default-hooks';\nimport Controller from './controller';\n\nconst moduleKey = 'widget-bb-turnovers-ng';\nconst hooksKey = `${moduleKey}:hooks`;\nconst helpersKey = `${moduleKey}:helpers`;\n\nexport default angular\n  .module(moduleKey, [\n    widgetModuleKey,\n    eventBusModuleKey,\n\n    modelTurnoversModuleKey,\n\n    bbExtensionHelpersModuleKey,\n    libBbCurrencyNgKey,\n    bbIntentModuleKey,\n  ])\n\n  .factory(hooksKey, extendHooks(defaultHooks))\n\n  .factory(extensionHelpersContextKey, [\n    '$compile',\n    bbCurrencyRuleKey,\n    ($compile, getRule) => ({\n      $compile,\n      getRule,\n    }),\n  ])\n\n  .factory(helpersKey, [\n    '$timeout',\n    helpers,\n  ])\n\n  .controller('TurnoversController', [\n    // dependencies to inject\n    eventBusKey,\n    hooksKey,\n    helpersKey,\n    modelTurnoversKey,\n    widgetKey,\n    /* into */\n    Controller,\n  ])\n\n  .run([eventBusKey, widgetKey, bbIntentKey, (bus, widget, bbIntent) => {\n    bus.publish('cxp.item.loaded', {\n      id: widget.getId(),\n    });\n    bbIntent.init();\n  }])\n\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-turnovers-ng/scripts/index.js","/**\n * @name helpers\n * @description Controller helpers\n * @type {Object}\n *\n * @property {function} debounce Executes a callback after some time\n */\nconst helpers = ($timeout) => {\n  /**\n   * @name current\n   * @description Keeps current timeout identifier for debounce helper\n   * @inner\n   * @type {any}\n   */\n  let current = null;\n\n  return {\n    debounce: (callback, time) => {\n      if (current) {\n        $timeout.cancel(current);\n      }\n\n      current = $timeout(callback, time);\n    },\n  };\n};\n\nexport default helpers;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-turnovers-ng/scripts/helpers.js","/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/**\n * @name Default Hooks\n * @type {object}\n *\n * @description\n * Default hooks for widget-bb-turnovers-ng\n */\n\nimport {\n  DEFAULT_DURATION,\n  DEFAULT_INTERVAL,\n  DEFAULT_START_DAY,\n  ACCOUNT_CHANGE_DEBOUNCE,\n} from './constants';\n\n/**\n * @name default-hooks#processTurnoverResponse\n * @type {function}\n *\n * @description\n * Default hook for turnovers response object post processing\n *\n * @param {module:model-bb-turnovers-ng.Turnover} data turnover object to process\n * @returns {module:model-bb-turnovers-ng.Turnover} turnover response object\n */\nconst processTurnoverResponse = data => data;\n\n/**\n * @name default-hooks#processTurnoverSeries\n * @type {function}\n *\n * @description\n * Default hook for turnovers chart series object post processing\n *\n * @param {module:model-bb-turnovers-ng.BBSeries} series chart series data\n * @param {module:model-bb-turnovers-ng.Turnover} data original turnover object\n * @returns {object} processed series\n */\nconst processTurnoverSeries = (series, data) => series;\n\n/**\n * @name default-hooks#processSelectedProducts\n * @type {function}\n *\n * @description\n * Default hook to process products when selection is changed\n * @param {module:model-bb-product-summary-ng.Product[]} product which is selected\n * @returns {module:model-bb-product-summary-ng.Product[]} product after processing\n */\nconst processSelectedProducts = selectedProducts => selectedProducts;\n\n/**\n * @name default-hooks#processProductsList\n * @type {function}\n *\n * @description\n * Process passed products list before passing it to the view.\n *\n * @param {module:model-bb-product-summary-ng.ProductKinds} products to process\n * @returns {module:model-bb-product-summary-ng.ProductKinds} processed products\n */\nconst processProductsList = products => products;\n\n/**\n * @name default-hooks#onTurnoversUpdate\n * @type {function}\n *\n * @description\n * Process parameters before they are sent to the model's load method\n *\n * @param {object} params to process\n * @returns {object} processed params\n */\nconst onTurnoversUpdate = params => params;\n\n/**\n * @name default-hooks#defaultPeriodStart\n * @type {function}\n *\n * @description\n * Sets period start property on init\n *\n * @returns {string} Start period string in format yyyy-mm-dd\n */\nconst defaultPeriodStart = () => {\n  const date = new Date();\n  date.setMonth(date.getMonth() - DEFAULT_DURATION);\n  return date.toISOString().slice(0, 10);\n};\n\n/**\n * @name default-hooks#defaultPeriodEnd\n * @type {function}\n *\n * @description\n * Sets period end property on init\n *\n * @returns {string} End period string in format yyyy-mm-dd\n */\nconst defaultPeriodEnd = () => new Date().toISOString().slice(0, 10);\n\n/**\n * @name default-hooks#defaultInterval\n * @type {function}\n *\n * @description\n * Sets interval property on init\n *\n * @param {Interval} interval Available intervals\n * @returns {string} One of the available intervals\n */\nconst defaultInterval = (interval) => DEFAULT_INTERVAL;\n\n/**\n * @name default-hooks#defaultStartDay\n * @type {function}\n *\n * @description\n * Sets monthly interval start day on init\n *\n * @returns {string} One of the available intervals\n */\nconst defaultStartDay = () => DEFAULT_START_DAY;\n\n/**\n * @name default-hooks#accountSelectionDebounce\n * @type {function}\n *\n * @description\n * Used when multiple account selection is active. Defines account selection change\n * silence interval after which widget should send a new request and refresh\n *\n * @returns {number} Time in ms\n */\nconst accountSelectionDebounce = () => ACCOUNT_CHANGE_DEBOUNCE;\n\n/**\n * @name default-hooks#processLoadError\n * @type {function}\n *\n * @description\n * Sets the error for missing parameters in the turnovers request\n *\n * @param {error} The error passed\n * @returns {error} The actual error\n */\nconst processLoadError = (error) => error;\n\nexport default {\n  processTurnoverResponse,\n  processTurnoverSeries,\n  processProductsList,\n  processSelectedProducts,\n  onTurnoversUpdate,\n  defaultPeriodStart,\n  defaultPeriodEnd,\n  defaultInterval,\n  defaultStartDay,\n  accountSelectionDebounce,\n  processLoadError,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-turnovers-ng/scripts/default-hooks.js","/**\n * Available intervals\n * @name INTERVAL\n * @type {Interval}\n */\nexport const INTERVAL = {\n  DAY: 'DAY',\n  WEEK: 'WEEK',\n  MONTH: 'MONTH',\n  YEAR: 'YEAR',\n};\n\n/**\n * Default load interval\n * @name DEFAULT_INTERVAL\n * @type {string}\n */\nexport const DEFAULT_INTERVAL = INTERVAL.MONTH;\n\n/**\n * Default load duration\n * @name DEFAULT_DURATION\n * @type {number}\n */\nexport const DEFAULT_DURATION = 6;\n\n/**\n * Default start day for monthly interval\n * @name DEFAULT_START_DAY\n * @type {number}\n */\nexport const DEFAULT_START_DAY = 1;\n\n/**\n * Delay for account selection change callback execution\n * @name ACCOUNT_CHANGE_DEBOUNCE\n * @type {number}\n */\nexport const ACCOUNT_CHANGE_DEBOUNCE = 0;\n\n/**\n * Interval object\n * @typedef {object} Interval\n * @property {string} DAY Daily interval\n * @property {string} WEEK Weekly interval\n * @property {string} MONTH Monthly interval\n * @property {string} YEAR Yearly interval\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-turnovers-ng/scripts/constants.js","/**\n * @module widget-bb-turnovers-ng\n * @name TurnoversController\n *\n * @description\n * Turnovers\n */\n\nimport { E_AUTH, E_CONNECTIVITY, E_USER } from 'lib-bb-model-errors';\nimport Message from './message';\nimport { INTERVAL } from './constants';\n\nconst {\n  PRODUCT_SELECTED,\n  PRODUCTS_SELECTED,\n  PERIOD_START_CHANGED,\n  PERIOD_END_CHANGED,\n  TURNOVERS_LOAD_FAILED,\n} = Message;\n\nexport default function TurnoversController(bus, hooks, helpers, model) {\n  const $ctrl = this;\n\n  /**\n   * Converts error code to error message translation key\n   *\n   * @inner\n   * @name errorMessage\n   * @type {function}\n   * @param {string} code Error code\n   * @returns {string} Error message translation key\n   */\n  const errorMessage = (code) => ({\n    [E_AUTH]: 'error.load.auth',\n    [E_CONNECTIVITY]: 'error.load.connectivity',\n    [E_USER]: 'error.load.user',\n    [model.E_PARAMS]: model.E_PARAMS,\n  }[code] || 'error.load.unexpected');\n\n  /**\n   * Updates turnovers list based on selected product\n   *\n   * @inner\n   * @name updateTurnovers\n   * @type {function}\n   * @returns {Promise.<void>}\n   */\n  const updateTurnovers = () => model.validateTurnoversParameters(hooks.onTurnoversUpdate({\n    arrangementIds: $ctrl.selectedProducts.map(product => product.id),\n    periodStartDate: $ctrl.periodStartDate,\n    periodEndDate: $ctrl.periodEndDate,\n    intervalDuration: $ctrl.intervalDuration,\n    intervalStartDay: $ctrl.intervalStartDay,\n  }))\n  .then(model.loadTurnovers)\n  .then(loaded => {\n    $ctrl.error = null;\n    $ctrl.data = hooks.processTurnoverResponse(loaded);\n    $ctrl.series = hooks.processTurnoverSeries(model.transformToSeries(loaded), loaded);\n  })\n  .catch(error => {\n    $ctrl.error = hooks.processLoadError(errorMessage(error.code));\n    bus.publish(TURNOVERS_LOAD_FAILED, { error });\n  });\n\n  /**\n   * Updates the products list for the ui-bb-account-selector.\n   *\n   * @inner\n   * @name updateProductsList\n   * @type {function}\n   * @returns {Promise.<void>}\n   */\n  const updateProductsList = (getFromStorage) => model.getProductsArray(getFromStorage)\n    .then((products) => {\n      $ctrl.error = null;\n      $ctrl.products = hooks.processProductsList(products);\n      return $ctrl.products;\n    })\n    .catch(error => {\n      $ctrl.error = errorMessage(error.code);\n      bus.publish(TURNOVERS_LOAD_FAILED, { error });\n    });\n\n  /**\n   * Updates selected product\n   *\n   * @inner\n   * @name updateProductsSelected\n   * @type {function}\n   * @param {module:model-bb-product-summary-ng.Product[]} selectedProducts Products to select\n   */\n  const updateProductsSelected = selectedProducts => {\n    $ctrl.selectedProducts = hooks.processSelectedProducts(selectedProducts);\n    // if this widget doesn't do the change in selection there is no need to update storage\n    if (!model.isFirstProductDefault()) {\n      return;\n    }\n\n    if (model.isMultipleAccount()) {\n      model.setSelectedProducts($ctrl.selectedProducts);\n    } else {\n      model.setSelectedProduct($ctrl.selectedProducts[0]);\n    }\n  };\n\n  /**\n   * @description\n   * Handler to be called on period start date change\n   *\n   * @name onPeriodStartDateChanged\n   * @type {function}\n   * @returns {void}\n   */\n  const onPeriodStartDateChanged = () => {\n    bus.publish(PERIOD_START_CHANGED, $ctrl.periodStartDate);\n  };\n\n  /**\n   * @description\n   * Handler to be called on period end date change\n   *\n   * @name onPeriodEndDateChanged\n   * @type {function}\n   * @returns {void}\n   */\n  const onPeriodEndDateChanged = () => {\n    bus.publish(PERIOD_END_CHANGED, $ctrl.periodEndDate);\n  };\n\n  /**\n   * @description\n   * Handler to be used on product selection, is using first item\n   * returned from {@link Hooks.processSelectedProducts} hook\n   *\n   * @name onProductSelected\n   * @type {function}\n   * @returns {void}\n   */\n  const onProductSelected = () => {\n    bus.publish(PRODUCT_SELECTED, {\n      product: $ctrl.selectedProducts[0],\n    });\n  };\n\n  /**\n   * @description\n   * Handler to be used on products selection, is using\n   * selected products value from {@link Hooks.processSelectedProducts} hook\n   *\n   * @name onProductsSelected\n   * @type {function}\n   * @returns {void}\n   */\n  const onProductsSelected = () => {\n    bus.publish(PRODUCTS_SELECTED, {\n      products: $ctrl.selectedProducts,\n    });\n  };\n\n  /**\n   * Reads product selection from storage\n   *\n   * @inner\n   * @name initProductSelection\n   * @type {function}\n   */\n  const initProductSelection = () => {\n    if (model.isMultipleAccount()) {\n      return model.getSelectedProducts()\n        .then(updateProductsSelected)\n        .then(() => {\n          if (model.isFirstProductDefault()) {\n            onProductsSelected();\n          }\n        });\n    }\n\n    return model.getSelectedProduct()\n      .then(selected => updateProductsSelected([selected]));\n  };\n\n  /**\n   * Initializes period data via hooks\n   *\n   * @inner\n   * @name initPeriodData\n   * @type {function}\n   */\n  const initPeriodData = () => {\n    $ctrl.periodStartDate = hooks.defaultPeriodStart();\n    $ctrl.periodEndDate = hooks.defaultPeriodEnd();\n    $ctrl.intervalDuration = hooks.defaultInterval(INTERVAL);\n    $ctrl.intervalStartDay = hooks.defaultStartDay();\n  };\n\n  /**\n   * Adds subscriptions to bus events\n   * @inner\n   * @name bindEvents\n   * @type {function}\n   */\n  function bindEvents() {\n    bus.subscribe(PRODUCT_SELECTED, selection => {\n      updateProductsSelected([selection.product]);\n      updateTurnovers();\n    });\n    bus.subscribe(PRODUCTS_SELECTED, selection => {\n      helpers.debounce(() => {\n        updateProductsSelected(selection.products);\n        updateTurnovers();\n      }, hooks.accountSelectionDebounce());\n    });\n    bus.subscribe(PERIOD_START_CHANGED, updateTurnovers);\n    bus.subscribe(PERIOD_END_CHANGED, updateTurnovers);\n  }\n\n  /**\n   * AngularJS Lifecycle hook used to initialize the controller\n   *\n   * @name $onInit\n   * @type {function}\n   * @returns {Promise.<void>}\n   */\n  const $onInit = () => {\n    $ctrl.isLoading = true;\n    return updateProductsList()\n      .then(initProductSelection)\n      .then(initPeriodData)\n      .then(updateTurnovers)\n      .then(bindEvents)\n      .then(() => { $ctrl.isLoading = false; });\n  };\n\n  Object.assign($ctrl, {\n    $onInit,\n\n    /**\n     * @description\n     * The value returned from {@link Hooks.processTurnoverResponse} hook.\n     * null if the data isn't loaded.\n     *\n     * @name data\n     * @type {module:model-bb-turnovers-ng.Turnover}\n     */\n    data: null,\n\n    /**\n     * @description\n     * The value returned from {@link Hooks.processTurnoverSeries} hook.\n     * Formatted for use within chart UI component.\n     * null if the data isn't loaded\n     *\n     * @name series\n     * @type {module:model-bb-turnovers-ng.BBSeries}\n     */\n    series: null,\n\n    /**\n     * @description\n     * The product selection for turnovers evaluation\n     *\n     * @name selectedProducts\n     * @type {module:model-bb-product-summary-ng.Product[]}\n     */\n    selectedProducts: [],\n\n    /**\n     * @description\n     * List of products to be used by account selector for turnovers evaluation.\n     * Is recieved from {@link Hooks.processProductsList}\n     *\n     * @name products\n     * @type {module:model-bb-product-summary-ng.Product[]}\n     */\n    products: [],\n    onProductSelected,\n    onProductsSelected,\n    onPeriodStartDateChanged,\n    onPeriodEndDateChanged,\n\n    /**\n     * @description\n     * Date of the turnovers evaluation period start\n     *\n     * @name periodStartDate\n     * @type {string}\n     */\n    periodStartDate: null,\n\n    /**\n     * @description\n     * Date of the turnovers evaluation period end\n     *\n     * @name periodEndDate\n     * @type {string}\n     */\n    periodEndDate: null,\n\n    /**\n     * @description\n     * Length of each periodic interval\n     *\n     * @name intervalDuration\n     * @type {string}\n     */\n    intervalDuration: null,\n\n    /**\n     * @description\n     * Day of a month to start turnover interval\n     *\n     * @name intervalStartDay\n     * @type {number}\n     */\n    intervalStartDay: null,\n\n    /**\n     * @description\n     * Loading status\n     *\n     * @name isLoading\n     * @type {boolean}\n     */\n    isLoading: false,\n\n    /**\n     * @description\n     * Object containing all available intervals as key:value pairs\n     *\n     * @name interval\n     * @type {Interval}\n     */\n    interval: INTERVAL,\n\n    /**\n     * @description\n     * The error encountered when attempting to fetch from the model\n     *\n     * @name error\n     * @type {module:lib-bb-model-errors.ModelError}\n     */\n    error: null,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-turnovers-ng/scripts/controller.js","export default {\n /**\n  * Triggered when product is selected.\n  * @event bb.event.product.selected\n  * @type {any}\n  */\n  PRODUCT_SELECTED: 'bb.event.product.selected',\n /**\n  * Triggered when products selection has changed\n  * @event bb.event.products.selected\n  * @type {any}\n  */\n  PRODUCTS_SELECTED: 'bb.event.products.selected',\n /**\n  * Triggered when period start date is changed.\n  * @event bb.event.turnovers.period.start.date.changed\n  * @type {any}\n  */\n  PERIOD_START_CHANGED: 'bb.event.turnovers.period.start.date.changed',\n /**\n  * Triggered when period end date is changed.\n  * @event bb.event.turnovers.period.end.date.changed\n  * @type {any}\n  */\n  PERIOD_END_CHANGED: 'bb.event.turnovers.period.end.date.changed',\n /**\n  * Triggered when turnovers widget fails to load.\n  * @event widget-bb-turnovers-ng.load.failed\n  * @type {any}\n  */\n  TURNOVERS_LOAD_FAILED: 'widget-bb-turnovers-ng.load.failed',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-turnovers-ng/scripts/message.js"],"sourceRoot":""}