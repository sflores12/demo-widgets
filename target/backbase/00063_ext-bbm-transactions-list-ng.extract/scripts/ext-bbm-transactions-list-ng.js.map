{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5be62e011dbef719fb37","webpack:///./ext-bbm-transactions-list-ng/model.xml","webpack:///external \"ui-bb-format-amount\"?d3d6***","webpack:///external \"ui-bb-i18n-ng\"?dc01***","webpack:///./ext-bbm-transactions-list-ng/scripts/index.js","webpack:///external \"ui-bbm-scroll-ng\"","webpack:///./ext-bbm-transactions-list-ng/scripts/debit-credit-sign.js","webpack:///./ext-bbm-transactions-list-ng/scripts/product-kind-view.js","webpack:///./ext-bbm-transactions-list-ng/scripts/helpers.js"],"names":["helpers","dependencyKeys","groupTransactions","transactions","groups","forEach","date","transaction","bookingDate","group","find","currGroup","push","hooks","processProductSelected","processTransactions","map","positiveSignKey","negativeSignKey","creditDebitKeysToSign","Object","assign","debitCreditSign","creditDebitIndicator","maskCardNumber","suffix","defaultViewModel","product","viewModelFactories","currentAccounts","identifier","IBAN","BBAN","primaryValue","bookedBalance","secondaryValue","availableBalance","secondaryLabel","tertiaryValue","creditLimit","tertiaryLabel","savingsAccounts","accruedInterest","termDeposits","principalAmount","creditCards","number","debitCards","loans","investmentAccounts","currentInvestmentValue","isProcessedProduct","hasOwnProperty","call","kind","TypeError","Intent","INITIATE_PAYMENT","Platform","ANDROID","IOS","ToolbarButtonEvent","SHOW_PRODUCT_DETAILS","getPlatform","window","BB_PLATFORM","warn","console","msg","bbIntent","stateContainer","initiatePaymentIntent","create","getSelectedProduct","createSelector","state","data","isAndroid","isIOS","showAccountActions","Boolean","debitAccount","showFAB","ctrl","searching","getSignedAmount","amount","onInit","addEventListener","productId","id","showProductDetails","initiatePayment","isInitialLoading","loading","isSearchErrorState","searchLoadingError","searchLoading","isSearchEmptyState","searchTransactions","length","isEmptyState","loadingError","isErrorState"],"mappings":"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","file":"ext-bbm-transactions-list-ng/scripts/ext-bbm-transactions-list-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-format-amount\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bbm-scroll-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bbm-transactions-list-ng\", [\"ui-bb-format-amount\", \"ui-bb-i18n-ng\", \"ui-bbm-scroll-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bbm-transactions-list-ng\"] = factory(require(\"ui-bb-format-amount\"), require(\"ui-bb-i18n-ng\"), require(\"ui-bbm-scroll-ng\"));\n\telse\n\t\troot[\"ext-bbm-transactions-list-ng\"] = factory(root[\"ui-bb-format-amount\"], root[\"ui-bb-i18n-ng\"], root[\"ui-bbm-scroll-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_40__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5be62e011dbef719fb37","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-transactions-list-ng/model.xml\n// module id = 0\n// module chunks = 5","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount\"\n// module id = 6\n// module chunks = 1 2 3 4 5","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 8\n// module chunks = 1 2 3 4 5 6 7","/**\n * @module ext-bbm-transactions-list-ng\n *\n * @description\n * Mobile extension for the transactions list widget.\n *\n * @example\n * <!-- transactions widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *  <value type=\"string\">ext-bbm-transactions-list-ng</value>\n * </property>\n */\nimport uiBbFormatAmountKey from 'ui-bb-format-amount';\nimport uiBbmScrollNgKey from 'ui-bbm-scroll-ng';\nimport uiBbI18nNgKey from 'ui-bb-i18n-ng';\n\nimport debitCreditSign from './debit-credit-sign';\nimport processProductSelected from './product-kind-view';\n\nimport extHelpers from './helpers';\n\nexport const helpers = extHelpers;\n\nexport const dependencyKeys = [\n  uiBbFormatAmountKey,\n  uiBbI18nNgKey,\n  uiBbmScrollNgKey,\n];\n\n/**\n * @name groupTransactions\n *\n * @description\n * Groups transactions by date\n * We assume that scheduledDate is always date only, e.g. \"2016-10-14\"\n * Otherwise this method should be improved\n *\n * @type {function}\n * @param {array} transactions\n * @returns {array} groups - Transactions grouped by date\n * @inner\n */\nfunction groupTransactions(transactions) {\n  const groups = [];\n\n  transactions.forEach(transaction => {\n    const date = transaction.bookingDate;\n    let group = groups.find(currGroup => currGroup.date === date);\n\n    if (!group) {\n      group = {\n        date,\n        transactions: [],\n      };\n      groups.push(group);\n    }\n\n    group.transactions.push(transaction);\n  });\n\n  return groups;\n}\n\n/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bb-transactions-ng\n */\nexport const hooks = {\n  /**\n   * @name Hooks#processProductSelected\n   *\n   * @description\n   * Hook to process the selected product.\n   *\n   * @type {function}\n   * @param {object} product The original product data from the API\n   * @returns {ProductView} Processed product\n   */\n  processProductSelected,\n\n  /**\n   * @name Hooks#processTransactions\n   * @description\n   * Hook to process the list of transactions.\n   *\n   * @type {function}\n   * @param {array<object>} transactions The original transactions from the API\n   * @returns {array<object>} The list of processed transactions\n   */\n  processTransactions: (transactions) => (\n    groupTransactions(transactions.map(debitCreditSign))\n  ),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-transactions-list-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_40__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-scroll-ng\"\n// module id = 40\n// module chunks = 5","export const positiveSignKey = 'CRDT';\nexport const negativeSignKey = 'DBIT';\n\nconst creditDebitKeysToSign = {};\ncreditDebitKeysToSign[positiveSignKey] = '+';\ncreditDebitKeysToSign[negativeSignKey] = '-';\n\n/**\n * @description\n * Adds debitCreditSign property to transaction object based on debitCreditIndicator key\n *\n * @param {Object} transaction Transaction object\n * @returns {Object} new copy of Transaction object\n */\nexport default (transaction) =>\n  Object.assign({\n    debitCreditSign: creditDebitKeysToSign[transaction.creditDebitIndicator],\n  }, transaction);\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-transactions-list-ng/scripts/debit-credit-sign.js","\nconst maskCardNumber = (suffix) => {\n  if (!suffix) {\n    return '';\n  }\n  return `XXXX-XXXX-XXXX-${suffix}`;\n};\n\nconst defaultViewModel = product => product;\n\nconst viewModelFactories = {\n  currentAccounts: product => ({\n    ...product,\n    identifier: product.IBAN || product.BBAN,\n    primaryValue: product.bookedBalance,\n    secondaryValue: product.availableBalance,\n    secondaryLabel: 'label.availableBalance',\n    tertiaryValue: product.creditLimit,\n    tertiaryLabel: 'label.creditLimit',\n  }),\n\n  savingsAccounts: product => ({\n    ...product,\n    identifier: product.BBAN || product.IBAN,\n    primaryValue: product.bookedBalance,\n    secondaryValue: product.accruedInterest,\n    secondaryLabel: 'label.accruedInterestAmount',\n  }),\n\n  termDeposits: product => ({\n    ...product,\n    primaryValue: product.principalAmount,\n    secondaryValue: product.accruedInterest,\n    secondaryLabel: 'label.accruedInterestAmount',\n  }),\n\n  creditCards: product => ({\n    ...product,\n    identifier: maskCardNumber(product.number),\n    primaryValue: product.bookedBalance,\n    secondaryValue: product.creditLimit,\n    secondaryLabel: 'label.creditLimit',\n    tertiaryValue: product.availableBalance,\n    tertiaryLabel: 'label.availableBalance',\n  }),\n\n  debitCards: product => ({\n    ...product,\n    identifier: maskCardNumber(product.number),\n  }),\n\n  loans: product => ({\n    ...product,\n    primaryValue: product.bookedBalance,\n  }),\n\n  investmentAccounts: product => ({\n    ...product,\n    primaryValue: product.currentInvestmentValue,\n  }),\n};\n\n/**\n * Prepare the fields of a Product into a form ready for display to the User\n *\n * @param {object} product The source Product from the API\n * @type {function}\n * @returns {ProductView}\n * @inner\n */\nexport default (product) => {\n  const isProcessedProduct = {}.hasOwnProperty.call(product, 'identifier') ||\n    {}.hasOwnProperty.call(product, 'primaryValue');\n\n  if (isProcessedProduct) {\n    return product;\n  }\n\n  const kind = product.kind;\n  if (!{}.hasOwnProperty.call(viewModelFactories, kind)) {\n    throw new TypeError(`Unhandled product kind: ${kind}`);\n  }\n\n  return viewModelFactories[kind](product) || defaultViewModel(product);\n};\n\n\n/**\n * @typedef ProductView\n * @type {object}\n * @property {string} id The internal Product Identifier\n * @property {string} name The product's name, suitable for display to users\n * @property {?string} identifier The identifier of the Product from the user's perspective\n * @property {?string} primaryValue The most important associated value to be displayed\n * @property {?string} secondaryValue A secondary associated value to be displayed\n * @property {?string} secondaryLabel A label to describe the secondary value\n */\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-transactions-list-ng/scripts/product-kind-view.js","/* global window */\nimport { negativeSignKey } from './debit-credit-sign';\n\nconst Intent = {\n  INITIATE_PAYMENT: 'intent.bb.paymentOrder.payment.initiate',\n};\n\nconst Platform = {\n  ANDROID: 'android',\n  IOS: 'ios',\n};\n\nconst ToolbarButtonEvent = {\n  SHOW_PRODUCT_DETAILS: 'bb.action.productDetails.view.show',\n};\n\nconst getPlatform = () => window.BB_PLATFORM;\n\nconst warn = msg => console.warn(`[ext-bbm-transactions-list-ng] ${msg}`);\n\nexport default ({ bbIntent, stateContainer }) => {\n  const initiatePaymentIntent = bbIntent.create(Intent.INITIATE_PAYMENT);\n\n  const getSelectedProduct = stateContainer.createSelector(state => state.product.data);\n\n  /**\n   * @description\n   * Checks whether the widget is running on Android.\n   * Returns true, if the platform is Android, false otherwise.\n   *\n   * @name Helpers#isAndroid\n   * @type {function}\n   * @returns {boolean}\n   */\n  const isAndroid = () => getPlatform() === Platform.ANDROID;\n\n  /**\n   * @description\n   * Checks whether the widget is running on iOS.\n   * Returns true, if the platform is iOS, false otherwise.\n   *\n   * @name Helpers#isIOS\n   * @type {function}\n   * @returns {boolean}\n   */\n  const isIOS = () => getPlatform() === Platform.IOS;\n\n  /**\n   * @description\n   * Checks whether actions for a given account should be displayed.\n   * Returns true, if they should be displayed, or `false` otherwise.\n   *\n   * @name Helpers#showAccountActions\n   * @type {function}\n   * @returns {boolean}\n   */\n  const showAccountActions = () => Boolean(\n    getSelectedProduct() && getSelectedProduct().debitAccount\n  );\n\n  /**\n   * @description\n   * Checks whether FAB (Floating Action Buttons) should be displayed. Returns true\n   * if it should be displayed, false otherwise.\n   *\n   * @name Helpers#showFAB\n   * @type {function}\n   * @returns {boolean}\n   */\n  const showFAB = ctrl => Boolean(!ctrl.searching && isAndroid() && showAccountActions());\n\n  /**\n   * @description\n   * Based on credit/debit indicator, put right sign on the transaction amount\n   *\n   * @name Helpers#getSignedAmount\n   * @type {function}\n   * @param {object} transaction Transaction object\n   * @returns {number} Signed amount\n   */\n  const getSignedAmount = transaction => (\n    transaction.amount * (transaction.creditDebitIndicator === negativeSignKey ? -1 : 1)\n  );\n\n  /**\n   * @description\n   * Helper which adds event listener on show details.\n   *\n   * @name Helpers#onInit\n   * @type {function}\n   * @param {module:widget-bb-transactions-ng.TransactionsController} ctrl\n   *  TransactionsController instance.\n   */\n  const onInit = ctrl => {\n    window.addEventListener(ToolbarButtonEvent.SHOW_PRODUCT_DETAILS, () => {\n      const productId = ctrl.product.id;\n      ctrl.showProductDetails(productId);\n    });\n  };\n\n  /**\n   * @description\n   * Initiates payment from the given product.\n   *\n   * @name Helpers#initiatePayment\n   * @type {function}\n   */\n  const initiatePayment = () => {\n    const product = getSelectedProduct();\n\n    if (!product) {\n      warn('Cannot initiate a payment – no selected product');\n      return;\n    }\n\n    initiatePaymentIntent({\n      debitAccount: product,\n    });\n  };\n\n  /**\n   * @description\n   * Checks for initial loading.\n   *\n   * @name Helpers#isInitialLoading\n   * @type {function}\n   *\n   * @param {module:widget-bb-transactions-ng.TransactionsController} ctrl\n   * @returns {boolean}\n   */\n  const isInitialLoading = ctrl => ctrl.loading && !ctrl.transactions;\n\n  /**\n   * @description\n   * Checks if the searching has been failed.\n   *\n   * @name Helpers#isSearchErrorState\n   * @type {function}\n   *\n   * @param {module:widget-bb-transactions-ng.TransactionsController} ctrl\n   * @returns {boolean}\n   */\n  const isSearchErrorState = ctrl => (\n    ctrl.searching && ctrl.searchLoadingError && !ctrl.searchLoading\n  );\n\n  /**\n   * @description\n   * Checks if there are no search results.\n   *\n   * @name Helpers#isSearchEmptyState\n   * @type {function}\n   *\n   * @param {module:widget-bb-transactions-ng.TransactionsController} ctrl\n   * @returns {boolean}\n   */\n  const isSearchEmptyState = ctrl => (\n    ctrl.searching &&\n    Boolean(ctrl.searchTransactions && !ctrl.searchTransactions.length) &&\n    !ctrl.searchLoadingError && !ctrl.searchLoading\n  );\n\n  /**\n   * @description\n   * Checks if there are no transactions.\n   *\n   * @name Helpers#isEmptyState\n   * @type {function}\n   *\n   * @param {module:widget-bb-transactions-ng.TransactionsController} ctrl\n   * @returns {boolean}\n   */\n  const isEmptyState = ctrl => (\n    !ctrl.searching &&\n    Boolean(ctrl.transactions && !ctrl.transactions.length) &&\n    !ctrl.loading &&\n    !ctrl.loadingError\n  );\n\n  /**\n   * @description\n   * Checks if the loading has been failed.\n   *\n   * @name Helpers#isErrorState\n   * @type {function}\n   *\n   * @param {module:widget-bb-transactions-ng.TransactionsController} ctrl\n   * @returns {boolean}\n   */\n  const isErrorState = ctrl => !ctrl.searching && !ctrl.loading && ctrl.loadingError;\n\n  return {\n    getSignedAmount,\n    initiatePayment,\n    isAndroid,\n    isEmptyState,\n    isErrorState,\n    isInitialLoading,\n    isSearchEmptyState,\n    isSearchErrorState,\n    onInit,\n    isIOS,\n    showAccountActions,\n    showFAB,\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-transactions-list-ng/scripts/helpers.js"],"sourceRoot":""}