{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*****","webpack:///webpack/bootstrap 8f94b648f5040b42cdf4?eff8*****","webpack:///./widget-bb-places-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114**","webpack:///external \"lib-bb-widget-ng\"?84ad","webpack:///external \"lib-bb-model-errors\"?7567","webpack:///./widget-bb-places-ng/scripts/index.js","webpack:///external \"lib-bb-widget-extension-ng\"","webpack:///external \"model-bb-places-ng\"","webpack:///external \"lib-bb-event-bus-ng\"","webpack:///external \"lib-bb-intent-ng\"","webpack:///./widget-bb-places-ng/scripts/controller.js","webpack:///./widget-bb-places-ng/scripts/constants.js","webpack:///./widget-bb-places-ng/scripts/default-hooks.js"],"names":["defaultHooks","hooksKey","run","widget","bus","bbIntent","publish","id","getId","init","module","factory","controller","name","PlacesController","errorMessages","ERROR_AUTH","ERROR_CONNECTION","ERROR_UNEXPECTED","ERROR_USER","model","hooks","$ctrl","uiError","modelError","error","code","message","loadPlaces","params","loadingPlaces","getPlaces","then","data","places","processPlaces","catch","getPlacesPreferences","bindEvents","subscribe","panel","onContainerToggle","htmlNode","$onInit","Object","assign","Events","Text"],"mappings":"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","file":"widget-bb-places-ng/scripts/widget-bb-places-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-places-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bb-places-ng\", [\"vendor-bb-angular\", \"lib-bb-widget-ng\", \"lib-bb-model-errors\", \"lib-bb-widget-extension-ng\", \"model-bb-places-ng\", \"lib-bb-event-bus-ng\", \"lib-bb-intent-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bb-places-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-model-errors\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-places-ng\"), require(\"lib-bb-event-bus-ng\"), require(\"lib-bb-intent-ng\"));\n\telse\n\t\troot[\"widget-bb-places-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-model-errors\"], root[\"lib-bb-widget-extension-ng\"], root[\"model-bb-places-ng\"], root[\"lib-bb-event-bus-ng\"], root[\"lib-bb-intent-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_19__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_27__, __WEBPACK_EXTERNAL_MODULE_37__, __WEBPACK_EXTERNAL_MODULE_38__, __WEBPACK_EXTERNAL_MODULE_39__, __WEBPACK_EXTERNAL_MODULE_40__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8f94b648f5040b42cdf4","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bb-places-ng/model.xml\n// module id = 0\n// module chunks = 6","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 19\n// module chunks = 3 4 5 6","module.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 24\n// module chunks = 4 6","module.exports = __WEBPACK_EXTERNAL_MODULE_27__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-model-errors\"\n// module id = 27\n// module chunks = 4 6","/**\n * @module widget-bb-places-ng\n *\n * @description\n * Places widget\n *\n * @usage\n * <div ng-controller=\"PlacesController as $ctrl\">\n *   <g-map-api preferences=\"$ctrl.getPlacesPreferences()\">\n *     <g-map places=\"$ctrl.loadPlaces\"></g-map>\n *   </g-map-api>\n * </div>\n */\nimport angular from 'vendor-bb-angular';\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport modelPlacesModuleKey, { modelPlacesKey } from 'model-bb-places-ng';\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport eventBusModuleKey, { eventBusKey } from 'lib-bb-event-bus-ng';\nimport bbIntentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\n\nimport Controller from './controller';\nimport * as defaultHooks from './default-hooks';\n\nconst hooksKey = 'widget-bb-places-ng:hooks';\n\nfunction run(widget, bus, bbIntent) {\n  bus.publish('cxp.item.loaded', {\n    id: widget.getId(),\n  });\n  bbIntent.init();\n}\n\nexport default angular\n  .module('widget-bb-places-ng', [\n    modelPlacesModuleKey,\n    eventBusModuleKey,\n    widgetModuleKey,\n    bbIntentModuleKey,\n  ])\n  .factory(hooksKey, extendHooks(defaultHooks))\n  .controller('PlacesController', [\n    // dependencies to inject\n    modelPlacesKey,\n    hooksKey,\n    eventBusKey,\n    /* into */\n    Controller,\n  ])\n  .run([\n    widgetKey,\n    eventBusKey,\n    bbIntentKey,\n    run,\n  ])\n  .name;\n\n/**\n * @typedef {Object} PlacesParameters\n * @property {number} latitude Latitude for current location\n * @property {number} longitude Longitude for current location\n * @property {number} radius Search radius\n * @property {?string} city Search by city name\n * @property {?string} country Search by country name\n */\n\n/**\n * @typedef {Object} Place\n * @property {string} id The internal place identifier\n * @property {string} name The place's name, suitable for display to users\n * @property {string} address.addressLine1 First line of address\n * @property {?string} address.addressLine2 Second line of address\n * @property {?string} address.addressLine3 Third line of address\n * @property {string} address.postalCode Post (ZIP) code of the place\n * @property {string} address.country Place's country\n * @property {number} latitude Latitude of the place\n * @property {number} longitude Longitude of the place\n * @property {string} placeType Type of the place (atm, branch, ...)\n */\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-places-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_37__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 37\n// module chunks = 6","module.exports = __WEBPACK_EXTERNAL_MODULE_38__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-places-ng\"\n// module id = 38\n// module chunks = 6","module.exports = __WEBPACK_EXTERNAL_MODULE_39__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 39\n// module chunks = 6","module.exports = __WEBPACK_EXTERNAL_MODULE_40__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 40\n// module chunks = 6","import { E_AUTH, E_CONNECTIVITY, E_UNEXPECTED, E_USER } from 'lib-bb-model-errors';\nimport { Text } from './constants';\n\nconst errorMessages = {\n  [E_AUTH]: Text.ERROR_AUTH,\n  [E_CONNECTIVITY]: Text.ERROR_CONNECTION,\n  [E_UNEXPECTED]: Text.ERROR_UNEXPECTED,\n  [E_USER]: Text.ERROR_USER,\n};\n\n/**\n * @name PlacesController\n *\n * @type {object}\n * @description\n * Places widget\n */\nexport default function PlacesController(model, hooks, bus) {\n  const $ctrl = this;\n\n  /**\n   * @name uiError\n   * @type {function}\n   *\n   * @description\n   * Creates an error object for a template\n   *\n   * @inner\n   * @param {object} modelError object\n   *\n   * @returns {{message: string}}\n   */\n  const uiError = (modelError) => {\n    let error = '';\n\n    if (modelError && modelError.code) {\n      error = errorMessages[modelError.code];\n    }\n\n    return {\n      message: error,\n    };\n  };\n\n  /**\n   * @name PlacesController#loadPlaces\n   * @type {function}\n   *\n   * @description\n   * Load places collection\n   *\n   * @param {PlacesParameters} params configuration to call model getPlaces\n   * @return {promise}\n   */\n  const loadPlaces = (params) => {\n    $ctrl.loadingPlaces = true;\n    return model.getPlaces(params)\n      .then((data) => {\n        $ctrl.places = hooks.processPlaces(data);\n        $ctrl.loadingPlaces = false;\n        return $ctrl.places;\n      })\n      .catch((error) => {\n        $ctrl.error = uiError(error);\n        $ctrl.loadingPlaces = false;\n      });\n  };\n\n  /**\n   * @name PlacesController#getPlacesPreferences\n   * @type {function}\n   *\n   * @description\n   * Returns widget preferences as an enum object\n   * (shorthand to model method)\n   *\n   * @return {object}\n   */\n  const getPlacesPreferences = () => model.getPlacesPreferences();\n\n  /**\n   * @name PlacesController#bindEvents\n   * @type {function}\n   * @inner\n   * @description\n   * Binds event listeners for containers that can show map after user action or timeout\n   *\n   * @return {void}\n   */\n  const bindEvents = () => {\n    bus.subscribe('DeckPanelLoaded', (panel) => hooks.onContainerToggle(panel.htmlNode));\n    bus.subscribe('CarouselSlideLoaded', hooks.onContainerToggle);\n    bus.subscribe('LightboxOpened', hooks.onContainerToggle);\n  };\n\n  /**\n   * @name PlacesController#$onInit\n   * @type {function}\n   *\n   * @description\n   * AngularJS Lifecycle hook used to initialize the controller\n   *\n   * @returns {void}\n   */\n  const $onInit = () => {\n    bindEvents();\n  };\n\n  Object.assign($ctrl, {\n    $onInit,\n    loadPlaces,\n    getPlacesPreferences,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-places-ng/scripts/controller.js","export const Events = {\n};\n\nexport const Text = {\n  ERROR_AUTH: 'places.error.ERROR_AUTH',\n  ERROR_CONNECTION: 'places.error.ERROR_CONNECTION',\n  ERROR_UNEXPECTED: 'places.error.ERROR_UNEXPECTED',\n  ERROR_USER: 'places.error.ERROR_USER',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-places-ng/scripts/constants.js","/* eslint-disable import/prefer-default-export */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n/**\n * @name Hooks\n * @type {object}\n *\n * @description\n * Hooks for widget-bb-places-ng\n */\n\n/**\n * @name Hooks#processPlaces\n * @type {function}\n *\n * @description\n * Hook for processing places list\n * Assigned to [$ctrl.loadPlaces]\n *\n * @param {Place[]} places Array of places\n * @returns {Place[]} Processed array of places\n */\nexport const processPlaces = places => places || [];\n\n/**\n * @name Hooks#onContainerToggle\n * @type {function}\n *\n * @description\n * Hook that is being triggered in case when parent container\n * that has the ability to show/hide part of it's content (tabs, deck, carousel)\n * toggles the child element\n * Assigned to [$ctrl.$onInit]\n *\n * @param {object} activatedElement Child element that became visible\n * @returns {void}\n */\nexport const onContainerToggle = activatedElement => {};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bb-places-ng/scripts/default-hooks.js"],"sourceRoot":""}