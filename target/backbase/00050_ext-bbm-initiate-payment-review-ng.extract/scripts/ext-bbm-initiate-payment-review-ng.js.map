{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6***","webpack:///webpack/bootstrap 5cca3903bb887dfc34d7?ea53***","webpack:///./ext-bbm-initiate-payment-review-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01***","webpack:///external \"ui-bb-format-amount\"?d3d6","webpack:///external \"lib-bbm-plugins\"?dfbe","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/index.js","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/events.js","webpack:///./ext-bbm-initiate-payment-review-ng/scripts/helpers.js"],"names":["events","helpers","hooks","dependencyKeys","Event","PAYMENT_DONE","PAYMENT_FAILED","PAYMENT_START","Preference","PAYMENT_REVIEW_STEP","$filter","widget","i18n","hasReviewStep","getBooleanPreference","Object","assign","ActivityIndicator","show","hide","Snackbar","success","error","RecurrenceEnding","NEVER","ON","AFTER","TransferFrequency","ONCE","DAILY","WEEKLY","MONTHLY","QUARTERLY","YEARLY","TransferFrequencyMessage","isToday","date","Date","dateStr","today","getDate","getMonth","getFullYear","dateFilter","RecurrenceEndingString","schedule","repeat","endDate","getScheduleFrequencyString","transferFrequency","getScheduleEndingString","end","getScheduleStartDateString","startDate","isRecurring","getAccountDisplayAmount","account","primaryValue","amount","getScheduleSummary","startingFrom","frequency","ending"],"mappings":"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","file":"ext-bbm-initiate-payment-review-ng/scripts/ext-bbm-initiate-payment-review-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-format-amount\"), require(\"lib-bbm-plugins\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ext-bbm-initiate-payment-review-ng\", [\"ui-bb-i18n-ng\", \"ui-bb-format-amount\", \"lib-bbm-plugins\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ext-bbm-initiate-payment-review-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-format-amount\"), require(\"lib-bbm-plugins\"));\n\telse\n\t\troot[\"ext-bbm-initiate-payment-review-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"ui-bb-format-amount\"], root[\"lib-bbm-plugins\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_37__, __WEBPACK_EXTERNAL_MODULE_45__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5cca3903bb887dfc34d7","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ext-bbm-initiate-payment-review-ng/model.xml\n// module id = 0\n// module chunks = 3","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 8\n// module chunks = 0 1 2 3 4 6 7 8 9 11 12","module.exports = __WEBPACK_EXTERNAL_MODULE_37__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-format-amount\"\n// module id = 37\n// module chunks = 2 3 5","module.exports = __WEBPACK_EXTERNAL_MODULE_45__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bbm-plugins\"\n// module id = 45\n// module chunks = 2 3 4","/**\n * @module ext-bbm-initiate-payment-review-ng\n *\n * @description\n * Mobile extension for a payment review step in the Mobile initiate payment widget.\n *\n * @example\n * <!-- Contact widget model.xml -->\n * <property name=\"extension\" viewHint=\"text-input,admin\">\n *   <value type=\"string\">ext-bbm-initiate-payment-review-ng</value>\n * </property>\n */\nimport uiBbFormatAmount from 'ui-bb-format-amount';\nimport uiBbI18nNgKey from 'ui-bb-i18n-ng';\n\nimport extEvents from './events';\nimport extHelpers from './helpers';\n\nexport const events = extEvents;\nexport const helpers = extHelpers;\nexport const hooks = {};\n\nexport const dependencyKeys = [\n  uiBbI18nNgKey,\n  uiBbFormatAmount,\n];\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/index.js","// Temporary disable capsInNew until it fixed in lib-bbm-plugins\n/* eslint new-cap: [\"error\", { \"capIsNew\": false }] */\nimport plugins from 'lib-bbm-plugins';\n\n/**\n * @description\n * Events that the extension subscribes to.\n *\n * @name Event\n * @type {Object}\n * @inner\n */\nconst Event = {\n  PAYMENT_DONE: 'bb.event.payment.done',\n  PAYMENT_FAILED: 'bb.event.payment.failed',\n  PAYMENT_START: 'bb.event.payment.started',\n};\n\n/**\n * @name Preference\n * @type {Object}\n * @inner\n */\nconst Preference = {\n  PAYMENT_REVIEW_STEP: 'bb.payment.review.step',\n};\n\nexport default ({ $filter, widget }) => {\n  const i18n = $filter('i18n');\n  const hasReviewStep = widget.getBooleanPreference(Preference.PAYMENT_REVIEW_STEP);\n  const events = {};\n\n  if (hasReviewStep) {\n    Object.assign(events, {\n      [Event.PAYMENT_START]: () => {\n        plugins.ActivityIndicator().show(i18n('message.payment.start'));\n      },\n\n      [Event.PAYMENT_DONE]: () => {\n        plugins.ActivityIndicator().hide();\n        plugins.Snackbar().success(i18n('message.payment.done'));\n      },\n\n      [Event.PAYMENT_FAILED]: () => {\n        plugins.ActivityIndicator().hide();\n        plugins.Snackbar().error(i18n('message.payment.failed'));\n      },\n    });\n  }\n\n  return events;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/events.js","const RecurrenceEnding = {\n  NEVER: 'NEVER',\n  ON: 'ON',\n  AFTER: 'AFTER',\n};\n\nconst TransferFrequency = {\n  ONCE: 'ONCE',\n  DAILY: 'DAILY',\n  WEEKLY: 'WEEKLY',\n  MONTHLY: 'MONTHLY',\n  QUARTERLY: 'QUARTERLY',\n  YEARLY: 'YEARLY',\n};\n\nconst TransferFrequencyMessage = {\n  [TransferFrequency.ONCE]: 'message.payment.schedule.frequency.once',\n  [TransferFrequency.DAILY]: 'message.payment.schedule.frequency.daily',\n  [TransferFrequency.WEEKLY]: 'message.payment.schedule.frequency.weekly',\n  [TransferFrequency.MONTHLY]: 'message.payment.schedule.frequency.monthly',\n  [TransferFrequency.QUARTERLY]: 'message.payment.schedule.frequency.quarterly',\n  [TransferFrequency.YEARLY]: 'message.payment.schedule.frequency.yearly',\n};\n\nconst isToday = dateStr => {\n  const date = new Date(dateStr);\n  const today = new Date();\n\n  return date.getDate() === today.getDate() &&\n    date.getMonth() === today.getMonth() &&\n    date.getFullYear() === today.getFullYear();\n};\n\n/**\n * @description\n * Helpers for ext-bbm-initiate-payment-form-ng\n *\n * @name Helpers\n * @type {Object}\n */\n\nexport default ({ $filter }) => {\n  const dateFilter = $filter('date');\n  const i18n = $filter('i18n');\n\n  const RecurrenceEndingString = {\n    [RecurrenceEnding.NEVER]: () => (\n      i18n('message.payment.schedule.frequency.end.never')\n    ),\n    [RecurrenceEnding.AFTER]: schedule => (\n      `${schedule.repeat} ${i18n('message.payment.schedule.frequency.end.after')}`\n    ),\n    [RecurrenceEnding.ON]: schedule => {\n      const endDate = dateFilter(schedule.endDate, 'mediumDate');\n      return `${i18n('message.payment.schedule.frequency.end.on')} ${endDate}`;\n    },\n  };\n\n  const getScheduleFrequencyString = schedule => (\n    i18n(TransferFrequencyMessage[schedule.transferFrequency])\n  );\n\n  const getScheduleEndingString = schedule => (\n    RecurrenceEndingString[schedule.end](schedule)\n  );\n\n  const getScheduleStartDateString = schedule => (\n    isToday(schedule.startDate)\n      ? i18n('message.payment.schedule.today')\n      : `on ${dateFilter(schedule.startDate, 'mediumDate')}`\n  );\n\n  const isRecurring = schedule => schedule.transferFrequency !== TransferFrequency.ONCE;\n\n  return {\n    /**\n     * @description\n     * Returns the amount of the given account that should be displayed.\n     *\n     * @name Helpers#getAccountDisplayAmount\n     * @type {function}\n     *\n     * @param {module:widget-bbm-initiate-payment-ng.AccountView} account Account to display\n     * @returns {string}\n     */\n    getAccountDisplayAmount: account => account.primaryValue || account.amount,\n\n    /**\n     * @description\n     * Returns a summary of the given payment schedule as a string.\n     *\n     * @name Helpers#getScheduleSummary\n     * @type {function}\n     *\n     * @param {Schedule} schedule\n     * @returns {string}\n     */\n    getScheduleSummary: schedule => {\n      if (!schedule) return '';\n\n      const startingFrom = i18n('message.payment.schedule.startingFrom');\n\n      const startDate = getScheduleStartDateString(schedule);\n      const frequency = getScheduleFrequencyString(schedule);\n      const ending = getScheduleEndingString(schedule);\n\n      return isRecurring(schedule)\n        ? `${frequency}, ${startingFrom} ${startDate}, ${ending}`\n        : `${frequency}, ${startDate}`;\n    },\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ext-bbm-initiate-payment-review-ng/scripts/helpers.js"],"sourceRoot":""}