{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**********************","webpack:///webpack/bootstrap b6e6496f5522437c4c2f?95fa**********************","webpack:///./widget-bbm-product-details-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114*********","webpack:///external \"lib-bb-storage-ng\"?d742","webpack:///external \"lib-bb-widget-ng\"?84ad**","webpack:///external \"lib-bb-widget-extension-ng\"?b547**","webpack:///external \"model-bb-product-summary-ng\"?4945**","webpack:///external \"lib-bb-intent-ng\"?add1**","webpack:///external \"lib-bb-event-bus-ng\"?8215**","webpack:///./widget-bbm-product-details-ng/scripts/index.js","webpack:///./widget-bbm-product-details-ng/scripts/controllers/view.controller.js","webpack:///./widget-bbm-product-details-ng/scripts/constants.js","webpack:///./widget-bbm-product-details-ng/scripts/controllers/form.controller.js","webpack:///./widget-bbm-product-details-ng/scripts/view-model.js","webpack:///./widget-bbm-product-details-ng/scripts/default-hooks.js"],"names":["defaultHooks","viewModelKey","hooksKey","module","factory","controller","name","ViewController","widget","model","viewModel","bbIntent","bus","hooks","ctrl","intents","showProductAliasEditForm","store","then","loadProductDetails","setProductLoading","getProductDetails","productId","productDetails","processProductDetails","product","setProductError","setSelectedProduct","catch","error","loadProductDetailsIfNeeded","selectedProduct","getSelectedProduct","id","Promise","resolve","$onInit","publish","CXP_ITEM_LOADED","getId","BB_ITEM_LOADED","subscribe","PRODUCT_ALIAS_EDIT_DONE","setProductAlias","alias","create","SHOW_ALIAS_EDIT_FORM","handle","SHOW_PRODUCT_DETAILS_VIEW","restore","init","Object","defineProperty","get","state","assign","MODULE_KEY","VIEW_CONTROLLER_KEY","FORM_CONTROLLER_KEY","Event","PRODUCT_ALIAS_EDIT_START","PRODUCT_ALIAS_EDIT_FAILED","Intent","StorageKey","PRODUCT_DETAILS_STATE","FormController","setupProductAliasFormState","setProductAliasFormState","updateArrengement","setFormLoading","patchArrangement","arrangement","setFormError","updateProductAlias","getProductAliasFormState","showProductDetailsView","bbStorage","loading","form","data","productAlias","setLoading","target","setError","getItem","setItem"],"mappings":"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","file":"widget-bbm-product-details-ng/scripts/widget-bbm-product-details-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"widget-bbm-product-details-ng\", [\"vendor-bb-angular\", \"lib-bb-storage-ng\", \"lib-bb-widget-ng\", \"lib-bb-widget-extension-ng\", \"model-bb-product-summary-ng\", \"lib-bb-intent-ng\", \"lib-bb-event-bus-ng\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-bbm-product-details-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"lib-bb-storage-ng\"), require(\"lib-bb-widget-ng\"), require(\"lib-bb-widget-extension-ng\"), require(\"model-bb-product-summary-ng\"), require(\"lib-bb-intent-ng\"), require(\"lib-bb-event-bus-ng\"));\n\telse\n\t\troot[\"widget-bbm-product-details-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"lib-bb-storage-ng\"], root[\"lib-bb-widget-ng\"], root[\"lib-bb-widget-extension-ng\"], root[\"model-bb-product-summary-ng\"], root[\"lib-bb-intent-ng\"], root[\"lib-bb-event-bus-ng\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_79__, __WEBPACK_EXTERNAL_MODULE_84__, __WEBPACK_EXTERNAL_MODULE_87__, __WEBPACK_EXTERNAL_MODULE_107__, __WEBPACK_EXTERNAL_MODULE_108__, __WEBPACK_EXTERNAL_MODULE_109__, __WEBPACK_EXTERNAL_MODULE_111__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b6e6496f5522437c4c2f","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./widget-bbm-product-details-ng/model.xml\n// module id = 0\n// module chunks = 23","module.exports = __WEBPACK_EXTERNAL_MODULE_79__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 79\n// module chunks = 13 14 15 16 17 18 19 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_84__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-storage-ng\"\n// module id = 84\n// module chunks = 14 23","module.exports = __WEBPACK_EXTERNAL_MODULE_87__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-ng\"\n// module id = 87\n// module chunks = 14 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_107__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-widget-extension-ng\"\n// module id = 107\n// module chunks = 20 21 22 23","module.exports = __WEBPACK_EXTERNAL_MODULE_108__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"model-bb-product-summary-ng\"\n// module id = 108\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_109__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-intent-ng\"\n// module id = 109\n// module chunks = 20 21 22 23 24","module.exports = __WEBPACK_EXTERNAL_MODULE_111__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lib-bb-event-bus-ng\"\n// module id = 111\n// module chunks = 20 21 22 23 24","/**\n * @module widget-bbm-product-details-ng\n *\n * @description\n * Mobile product details widget.\n *\n * @example\n *  <div ng-controller=\"FormController as $ctrl\">\n *  </div>\n *\n *  <div ng-controller=\"ViewController as $ctrl\">\n *  </div>\n */\n\nimport angular from 'vendor-bb-angular';\n\nimport widgetModuleKey, { widgetKey } from 'lib-bb-widget-ng';\nimport eventBusModuleKey, { eventBusKey } from 'lib-bb-event-bus-ng';\nimport intentModuleKey, { bbIntentKey } from 'lib-bb-intent-ng';\nimport extendHooks from 'lib-bb-widget-extension-ng';\nimport modelProductSummaryModuleKey, { modelProductSummaryKey } from 'model-bb-product-summary-ng';\nimport bbStorageModuleKey, { bbStorageServiceKey } from 'lib-bb-storage-ng';\n\nimport ViewController from './controllers/view.controller';\nimport FormController from './controllers/form.controller';\n\nimport {\n  MODULE_KEY,\n  VIEW_CONTROLLER_KEY,\n  FORM_CONTROLLER_KEY,\n} from './constants';\n\nimport ViewModel from './view-model';\n\nimport * as defaultHooks from './default-hooks';\n\nconst viewModelKey = `${MODULE_KEY}:viewModel`;\nconst hooksKey = `${MODULE_KEY}:hooks`;\n\nexport default angular\n  .module(MODULE_KEY, [\n    bbStorageModuleKey,\n    eventBusModuleKey,\n    intentModuleKey,\n    modelProductSummaryModuleKey,\n    widgetModuleKey,\n  ])\n\n  .factory(viewModelKey, [\n    // dependencies to inject\n    modelProductSummaryKey,\n    bbStorageServiceKey,\n\n    // into\n    ViewModel,\n  ])\n\n  .factory(hooksKey, extendHooks(defaultHooks))\n\n  .controller(VIEW_CONTROLLER_KEY, [\n    // dependencies to inject\n    widgetKey,\n    modelProductSummaryKey,\n    viewModelKey,\n    bbIntentKey,\n    eventBusKey,\n    hooksKey,\n\n    // into\n    ViewController,\n  ])\n  .controller(FORM_CONTROLLER_KEY, [\n    // dependencies to inject\n    widgetKey,\n    modelProductSummaryKey,\n    viewModelKey,\n    bbIntentKey,\n    eventBusKey,\n\n    // into\n    FormController,\n  ])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/index.js","import { Event, Intent } from '../constants';\n\nexport default function ViewController(\n  widget,\n  model,\n  viewModel,\n  bbIntent,\n  bus,\n  hooks\n) {\n  /**\n   * @name ViewController\n   * @ngkey ViewController\n   *\n   * @description\n   * Product details view controller.\n   *\n   * @type {Object}\n   */\n  const ctrl = this;\n\n  /**\n   * @description\n   * A set of intents that the view controller uses or handles.\n   *\n   * @name intents\n   * @type {Object}\n   * @inner\n   */\n  const intents = {};\n\n  /**\n   * @description\n   * Handles the intent to show the form to edit a product alias.\n   *\n   * @name ViewController#showProductAliasEditForm\n   * @type {function}\n   */\n  const showProductAliasEditForm = () => (\n    viewModel.store()\n      .then(() => {\n        intents.showProductAliasEditForm();\n      })\n  );\n\n  /**\n   * @description\n   * Loads product details.\n   *\n   * @name ViewController#loadProductDetails\n   * @type {function}\n   * @returns {Promise.<module:model-bb-product-summary-ng.ProductDetails>}\n   */\n  const loadProductDetails = productId => {\n    viewModel.setProductLoading(true);\n\n    return model.getProductDetails(productId)\n      .then(product => {\n        const productDetails = hooks.processProductDetails(product);\n\n        viewModel.setProductError(null);\n        viewModel.setProductLoading(false);\n        viewModel.setSelectedProduct(productDetails);\n\n        return productDetails;\n      })\n      .catch(error => {\n        viewModel.setProductLoading(false);\n        viewModel.setProductError(error);\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Loads product details if needed.\n   *\n   * @name ViewController#loadProductDetailsIfNeeded\n   * @type {function}\n   * @returns {Promise.<module:model-bb-product-summary-ng.ProductDetails>}\n   * @inner\n   */\n  const loadProductDetailsIfNeeded = productId => {\n    const selectedProduct = viewModel.getSelectedProduct();\n\n    if (!selectedProduct || selectedProduct.id !== productId) {\n      viewModel.setSelectedProduct(null);\n\n      return loadProductDetails(productId);\n    }\n\n    return Promise.resolve();\n  };\n\n  /**\n   * @description\n   * AngularJS Lifecycle hook used to initialize the controller.\n   *\n   * @name ViewController#$onInit\n   * @type {function}\n   *\n   * @fires cxp.item.loaded\n   * @fires bb.item.loaded\n   */\n  const $onInit = () => {\n    /**\n     * This event (cxp.item.loaded) is deprecated in Mobile SDK version > 3.0\n     * and will be removed with the update to widget collection 3 (WC3)\n     */\n    bus.publish(Event.CXP_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    bus.publish(Event.BB_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    bus.subscribe(Event.PRODUCT_ALIAS_EDIT_DONE, productDetails => {\n      viewModel.setProductAlias(productDetails.alias);\n    });\n  };\n\n  /**\n   * @description\n   * The intent to show the form to edit a product alias.\n   *\n   * @name intents#showProductAliasEditForm\n   * @type {function}\n   * @inner\n   */\n  intents.showProductAliasEditForm = bbIntent.create(Intent.SHOW_ALIAS_EDIT_FORM);\n\n  bbIntent.handle(Intent.SHOW_PRODUCT_DETAILS_VIEW, productId => {\n    viewModel.restore()\n      .then(() => {\n        loadProductDetailsIfNeeded(productId);\n      });\n  });\n\n  bbIntent.init(() => { });\n\n  Object.defineProperty(ctrl, 'state', {\n    get() {\n      return viewModel.state;\n    },\n  });\n\n  Object.assign(ctrl, {\n    $onInit,\n    showProductAliasEditForm,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/controllers/view.controller.js","export const MODULE_KEY = 'widget-bbm-product-details-ng';\nexport const VIEW_CONTROLLER_KEY = 'ViewController';\nexport const FORM_CONTROLLER_KEY = 'FormController';\n\n/**\n * Pubsub events\n * @type {Object}\n */\nexport const Event = {\n  CXP_ITEM_LOADED: 'cxp.item.loaded',\n  BB_ITEM_LOADED: 'bb.item.loaded',\n\n  PRODUCT_ALIAS_EDIT_START: 'bb.event.productDetails.alias.edit.start',\n  PRODUCT_ALIAS_EDIT_DONE: 'bb.event.productDetails.alias.edit.done',\n  PRODUCT_ALIAS_EDIT_FAILED: 'bb.event.productDetails.alias.edit.failed',\n};\n\n/**\n * Intent\n * @type {Object}\n */\nexport const Intent = {\n  SHOW_PRODUCT_DETAILS_VIEW: 'intent.bb.productDetails.view.show',\n  SHOW_ALIAS_EDIT_FORM: 'intent.bb.productDetails.alias.edit',\n};\n\n/**\n * Storage keys\n * @type {Object}\n */\nexport const StorageKey = {\n  PRODUCT_DETAILS_STATE: 'widget-bbm-product-details-ng:state',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/constants.js","import { Event, Intent } from '../constants';\n\nexport default function FormController(\n  widget,\n  model,\n  viewModel,\n  bbIntent,\n  bus\n) {\n  /**\n   * @name FormController\n   * @ngkey FormController\n   *\n   * @description\n   * Product details form controller.\n   *\n   * @type {Object}\n   */\n  const ctrl = this;\n\n  /**\n   * @description\n   * A set of intents that the form controller uses or handles.\n   *\n   * @name intents\n   * @type {Object}\n   * @inner\n   */\n  const intents = {};\n\n  /**\n   * @description\n   * Sets up the the product alias form state.\n   *\n   * @name FormController#setupProductAliasFormState\n   * @type {function}\n   * @inner\n   */\n  const setupProductAliasFormState = () => {\n    const product = viewModel.getSelectedProduct();\n\n    viewModel.setProductAliasFormState(product.alias);\n  };\n\n  /**\n   * @description\n   * Updates an arrangement.\n   *\n   * @name FormController#updateArrengement\n   * @type {function}\n   * @param {module:model-bb-product-summary-ng.ArrangementsData.ArrangementPatch} arrangement\n   * @returns {Promise}\n   * @inner\n   */\n  const updateArrengement = arrangement => {\n    viewModel.setFormLoading(true);\n\n    return model.patchArrangement(arrangement)\n      .then(() => {\n        viewModel.setFormLoading(false);\n        viewModel.setFormError(null);\n      })\n      .catch(error => {\n        viewModel.setFormLoading(false);\n        viewModel.setFormError(error);\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * Updates a product alias\n   *\n   * @name FormController#updateProductAlias\n   * @type {function}\n   *\n   * @returns {Promise}\n   */\n  const updateProductAlias = () => {\n    const { id } = viewModel.getSelectedProduct();\n    const alias = viewModel.getProductAliasFormState();\n    const productDetails = {\n      id,\n      alias,\n    };\n\n    bus.publish(Event.PRODUCT_ALIAS_EDIT_START);\n\n    return updateArrengement(productDetails)\n      .then(() => {\n        bus.publish(Event.PRODUCT_ALIAS_EDIT_DONE, productDetails);\n\n        viewModel.setProductAlias(alias);\n        viewModel.setProductAliasFormState(null);\n        viewModel.store()\n          .then(() => {\n            intents.showProductDetailsView(id);\n          });\n      })\n      .catch(error => {\n        bus.publish(Event.PRODUCT_ALIAS_EDIT_FAILED, { error });\n\n        throw error;\n      });\n  };\n\n  /**\n   * @description\n   * AngularJS Lifecycle hook used to initialize the controller.\n   *\n   * @name FormController#$onInit\n   * @type {function}\n   *\n   * @fires cxp.item.loaded\n   * @fires bb.item.loaded\n   */\n  const $onInit = () => {\n    /**\n     * This event (cxp.item.loaded) is deprecated in Mobile SDK version > 3.0\n     * and will be removed with the update to widget collection 3 (WC3)\n     */\n    bus.publish(Event.CXP_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n\n    bus.publish(Event.BB_ITEM_LOADED, {\n      id: widget.getId(),\n    });\n  };\n\n  /**\n   * @description\n   * The intent to show the product details.\n   *\n   * @name intents#showProductDetailsView\n   * @type {function}\n   * @inner\n   */\n  intents.showProductDetailsView = bbIntent.create(Intent.SHOW_PRODUCT_DETAILS_VIEW);\n\n  bbIntent.handle(Intent.SHOW_ALIAS_EDIT_FORM, () => {\n    viewModel.restore().then(() => {\n      setupProductAliasFormState();\n    });\n  });\n\n  bbIntent.init(() => { });\n\n  Object.defineProperty(ctrl, 'state', {\n    get() {\n      return viewModel.state;\n    },\n  });\n\n  Object.assign(ctrl, {\n    $onInit,\n    updateProductAlias,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/controllers/form.controller.js","import { StorageKey } from './constants';\n\nexport default (model, bbStorage) => {\n  const viewModel = {\n    state: {\n      product: null,\n      loading: false,\n      error: null,\n      form: {\n        data: {\n          productAlias: null,\n        },\n        loading: false,\n        error: null,\n      },\n    },\n  };\n\n  /**\n   * @description\n   * Sets the given loading state to the given target.\n   *\n   * @name setLoading\n   * @type {function}\n   *\n   * @param {Object} target\n   * @param {boolean} loading\n   * @inner\n   */\n  const setLoading = (target, loading) => {\n    Object.assign(target, { loading });\n  };\n\n  /**\n   * @description\n   * Sets the given error to the given target.\n   *\n   * @name setError\n   * @type {function}\n   *\n   * @param {Object} target\n   * @param {Error} error\n   * @inner\n   */\n  const setError = (target, error) => {\n    Object.assign(target, { error });\n  };\n\n  /**\n   * @description\n   * Sets the loading state of the form.\n   *\n   * @name setFormLoading\n   * @type {function}\n   *\n   * @param {boolean} loading\n   * @inner\n   */\n  const setFormLoading = loading => {\n    setLoading(viewModel.state.form, loading);\n  };\n\n  /**\n   * @description\n   * Sets the loading state of the product.\n   *\n   * @name setProductLoading\n   * @type {function}\n   *\n   * @param {boolean} loading\n   * @inner\n   */\n  const setProductLoading = loading => {\n    setLoading(viewModel.state, loading);\n  };\n\n  /**\n   * @description\n   * Sets the error state to the form with a given error.\n   *\n   * @name setFormError\n   * @type {function}\n   *\n   * @param {Error} error\n   * @inner\n   */\n  const setFormError = error => {\n    setError(viewModel.state.form, error);\n  };\n\n  /**\n   * @description\n   * Sets the error state of the product.\n   *\n   * @name setProductError\n   * @type {function}\n   *\n   * @param {Error} error\n   * @inner\n   */\n  const setProductError = error => {\n    setError(viewModel.state, error);\n  };\n\n  /**\n   * @description\n   * Sets a product to the state.\n   *\n   * @name setSelectedProduct\n   * @type {function}\n   *\n   * @param {module:model-bb-product-summary-ng.ProductDetails} product\n   * @returns {module:model-bb-product-summary-ng.ProductDetails}\n   * @inner\n   */\n  const setSelectedProduct = product => (\n    Object.assign(viewModel.state, {\n      product,\n    })\n  );\n\n  /**\n   * @description\n   * Returns the selected product.\n   *\n   * @name getSelectedProduct\n   * @type {function}\n   *\n   * @returns {module:model-bb-product-summary-ng.ProductDetails}\n   * @inner\n   */\n  const getSelectedProduct = () => viewModel.state.product;\n\n  /**\n   * @description\n   * Sets the state for the product alias form.\n   *\n   * @name setProductAliasFormState\n   * @type {function}\n   *\n   * @param {string} productAlias\n   * @inner\n   */\n  const setProductAliasFormState = productAlias => {\n    Object.assign(viewModel.state.form.data, {\n      productAlias,\n    });\n  };\n\n  /**\n   * @description\n   * Returns the state of the product alias form.\n   *\n   * @name getProductAliasFormState\n   * @type {function}\n   *\n   * @returns {string}\n   * @inner\n   */\n  const getProductAliasFormState = () => viewModel.state.form.data.productAlias;\n\n  /**\n   * @description\n   * Sets a product alias to the product state.\n   *\n   * @name setProductAlias\n   * @type {function}\n   *\n   * @param {string} alias\n   * @inner\n   */\n  const setProductAlias = alias => {\n    Object.assign(viewModel.state.product, {\n      alias,\n    });\n  };\n\n  /**\n   * @description\n   * Restores the state from the storage.\n   *\n   * @name restore\n   * @type {function}\n   * @inner\n   */\n  const restore = () => (\n    bbStorage.getItem(StorageKey.PRODUCT_DETAILS_STATE)\n      .then(state => {\n        if (state) {\n          viewModel.state = state;\n        }\n      })\n  );\n\n  /**\n   * @description\n   * Stores the state to the storage.\n   *\n   * @name store\n   * @type {function}\n   * @inner\n   */\n  const store = () => (\n    bbStorage.setItem(StorageKey.PRODUCT_DETAILS_STATE, viewModel.state)\n  );\n\n  Object.assign(viewModel, {\n    setFormLoading,\n    setFormError,\n    setProductLoading,\n    setProductError,\n\n    setProductAlias,\n    setProductAliasFormState,\n    getProductAliasFormState,\n\n    setSelectedProduct,\n    getSelectedProduct,\n\n    restore,\n    store,\n  });\n\n  return viewModel;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/view-model.js","/* eslint-disable import/prefer-default-export */\n\n/**\n * @description\n * Hooks for widget-bbm-product-details-ng.\n *\n * @name Hooks\n * @type {object}\n */\n\n/**\n * @name processProductDetails\n * @description\n * Hook for processing product details after initialization.\n *\n * @type {function}\n * @param productDetails {ProductDetails} ProductDetails to process\n * @returns {ProductDetails}\n */\nexport const processProductDetails = (productDetails) => productDetails;\n\n\n\n// WEBPACK FOOTER //\n// ./widget-bbm-product-details-ng/scripts/default-hooks.js"],"sourceRoot":""}