{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6***********","webpack:///webpack/bootstrap 5cca3903bb887dfc34d7?ea53***********","webpack:///./ui-bbm-beneficiary-select-ng/model.xml","webpack:///external \"ui-bb-i18n-ng\"?dc01*********","webpack:///external \"ui-bb-iban-ng\"?26a5*","webpack:///external \"ui-bbm-textfield-ng\"?0f1f*","webpack:///external \"vendor-bb-angular\"?a114*","webpack:///./ui-bbm-beneficiary-select-ng/scripts/index.js","webpack:///./ui-bbm-beneficiary-select-ng/scripts/component.js","webpack:///./ui-bbm-beneficiary-select-ng/scripts/controller.js","webpack:///./ui-bbm-beneficiary-select-ng/scripts/utils.js"],"names":["module","component","controller","name","bindings","allowCreate","debitAccount","accounts","messages","ngModel","onButtonClick","template","FieldName","NAME","IDENTIFIER","IBAN_VALIDATOR_KEY","SAME_ACCOUNT_VALIDATOR_KEY","$element","$scope","$timeout","$document","ctrl","applyScope","nameTextfield","find","eq","identifierTextfield","nameInput","identifierInput","searchIndex","blurTimeout","hasFocus","ibanValidator","state","activeField","isListOpened","beneficiary","suggestions","closeList","getActiveFieldValue","value","nameModelCtrl","$viewValue","identifierModelCtrl","createBeneficiary","identifier","isNew","openList","setBeneficiary","beneficiaryToSet","modelCtrl","$setViewValue","convertToNewBeneficiary","convertToNewBeneficiaryIfNeeded","selectAccount","Object","assign","account","setUntouched","$setUntouched","scrollToTop","body","scrollTop","setFocus","fieldName","isButtonHidden","length","isExternalAccount","Boolean","external","isOwnAccount","isIbanDisabled","isSameAccount","IBAN","validateIban","$modelValue","isValid","$setValidity","validateSameIban","unsetFocus","updateListState","updateSuggestions","query","searchQuery","toLowerCase","trim","filter","idx","validate","isReady","isSet","createBeneficiaryValidity","$onChanges","currentValue","attachValidator","key","validatorFn","$validators","overrideIbanValidator","bindDomEvents","onBlur","on","cancel","$postLink","$viewChangeListeners","push","onAccountClick","removeWhitespaces","str","replace","accountA","accountB","createSearchIndex","map","iban","isNewBeneficiary","some","item","matches","accountSearchStrings","includes","safeApply","phase","scope","$root","$$phase","$eval","exp","$apply"],"mappings":"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","file":"ui-bbm-beneficiary-select-ng/scripts/ui-bbm-beneficiary-select-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-iban-ng\"), require(\"ui-bbm-textfield-ng\"), require(\"vendor-bb-angular\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bbm-beneficiary-select-ng\", [\"ui-bb-i18n-ng\", \"ui-bb-iban-ng\", \"ui-bbm-textfield-ng\", \"vendor-bb-angular\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bbm-beneficiary-select-ng\"] = factory(require(\"ui-bb-i18n-ng\"), require(\"ui-bb-iban-ng\"), require(\"ui-bbm-textfield-ng\"), require(\"vendor-bb-angular\"));\n\telse\n\t\troot[\"ui-bbm-beneficiary-select-ng\"] = factory(root[\"ui-bb-i18n-ng\"], root[\"ui-bb-iban-ng\"], root[\"ui-bbm-textfield-ng\"], root[\"vendor-bb-angular\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_38__, __WEBPACK_EXTERNAL_MODULE_42__, __WEBPACK_EXTERNAL_MODULE_88__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5cca3903bb887dfc34d7","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bbm-beneficiary-select-ng/model.xml\n// module id = 0\n// module chunks = 12","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-i18n-ng\"\n// module id = 8\n// module chunks = 0 1 2 3 4 6 7 8 9 11 12","module.exports = __WEBPACK_EXTERNAL_MODULE_38__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-iban-ng\"\n// module id = 38\n// module chunks = 2 11 12","module.exports = __WEBPACK_EXTERNAL_MODULE_42__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bbm-textfield-ng\"\n// module id = 42\n// module chunks = 2 4 12","module.exports = __WEBPACK_EXTERNAL_MODULE_88__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 88\n// module chunks = 10 11 12 13 14 15 16 17 18 19","/**\n * @module ui-bbm-beneficiary-select-ng\n * @description\n * Credit suggest input mobile UI component\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbmBeneficiarySelectKey from 'ui-bbm-beneficiary-select-ng';\n *\n * export const dependencyKeys = [\n *   uiBbmBeneficiarySelectKey,\n * ];\n *\n * // file: templates/template.ng.html\n * <ui-bbm-beneficiary-select-ng\n *   name=\"beneficiary\"\n *   ng-model=\"$ctrl.payment.to\"\n *   accounts=\"$ctrl.accountsTo\"\n *   debit-account=\"$ctrl.payment.to.debitAccount\"\n *   allowCreate=\"!$ctrl.payment.from || $ctrl.payment.from.externalTransferAllowed\"\n *   on-button-click=\"ext.helpers.onPaymentToAccountsClick($ctrl)\"\n *   messages=\"{\n *     identifierPlaceholder: ('label.beneficiaryIdentifier' | i18n),\n *     namePlaceholder: ('label.beneficiaryName' | i18n),\n *   }\">\n * </ui-bbm-beneficiary-select-ng>\n */\n\nimport angular from 'vendor-bb-angular';\nimport i18nNgKey from 'ui-bb-i18n-ng';\nimport uiBbIbanNgKey from 'ui-bb-iban-ng';\nimport uiBbmTextfieldNgKey from 'ui-bbm-textfield-ng';\n\nimport component from './component';\nimport controller from './controller';\n\nexport default angular\n  .module('ui-bbm-beneficiary-select-ng', [\n    i18nNgKey,\n    uiBbIbanNgKey,\n    uiBbmTextfieldNgKey,\n  ])\n  .component('uiBbmBeneficiarySelectNg', component)\n  .controller('controller', ['$element', '$scope', '$timeout', '$document', controller])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bbm-beneficiary-select-ng/scripts/index.js","/**\n * @name uiBBMBeneficiarySelect\n * @type {Object}\n *\n * @property {Array.<AccountsView>} accounts List of accounts to filter and select with user input\n * @property {boolean} allowCreate Is creating of a new beneficiary allowed\n * @property {Object} messages Localized messages\n * @property {Object} debitAccount Debit Account\n * @property {Object} ngModel Beneficiary object\n * @property {function} onButtonClick Handler for button clicks\n */\nconst component = {\n  bindings: {\n    allowCreate: '<',\n    debitAccount: '<',\n    accounts: '<',\n    messages: '<',\n    ngModel: '<',\n    onButtonClick: '&',\n  },\n  controller: 'controller',\n  template: `\n    <div \n      class=\"bbm-beneficiary-select\"\n      data-ng-class=\"{\n        'bbm-beneficiary-select-has-focus': $ctrl.state.activeField,\n        'bbm-beneficiary-select-has-focus-name': $ctrl.state.activeField === 'name',\n        'bbm-beneficiary-select-has-focus-identifier': $ctrl.state.activeField === 'identifier'\n      }\"\n      data-role=\"beneficiary-select\">\n      <div class=\"bbm-beneficiary-select-inner\">\n        <div class=\"bbm-beneficiary-select-name form-group form-group-md\">\n          <ui-bbm-textfield-ng\n            data-type=\"text\"\n            data-name=\"beneficiary-name\"\n            data-label=\"{{ $ctrl.messages.nameLabel }}\"\n            data-placeholder=\"{{ $ctrl.messages.namePlaceholder }}\"\n            data-role=\"beneficiary-select-name\"\n            data-ng-model=\"$ctrl.state.beneficiary.name\"\n            data-clear-button=\"true\">\n          </ui-bbm-textfield-ng>\n        </div>\n        <div class=\"bbm-beneficiary-select-identifier form-group form-group-md\">\n          <ui-bbm-textfield-ng\n            data-type=\"text\"\n            data-name=\"beneficiary-identifier\"\n            data-label=\"{{ $ctrl.messages.identifierLabel }}\"\n            data-placeholder=\"{{ $ctrl.messages.identifierPlaceholder }}\"\n            data-role=\"beneficiary-select-identifier\"\n            data-disabled=\"$ctrl.isIbanDisabled()\"\n            data-ng-required=\"$ctrl.isExternalAccount()\"\n            data-ng-model=\"$ctrl.state.beneficiary.identifier\"\n            data-ng-model-options=\"{ allowInvalid: true }\"\n            data-clear-button=\"true\"\n            ui-bb-iban>\n            <ng-messages\n              for=\"$ctrl.identifierModelCtrl.$error\"\n              data-ng-show=\"$ctrl.identifierModelCtrl.$dirty &&\n                            $ctrl.identifierModelCtrl.$touched &&\n                            $ctrl.identifierModelCtrl.$invalid\"\n              role=\"alert\">\n              <ng-message\n                when=\"uiBbIban\"\n                data-i18n-key=\"errors.invalidAccountIBAN\">\n              </ng-message>\n              <ng-message\n                when=\"required\"\n                data-i18n-key=\"errors.requiredAccountIBAN\">\n              </ng-message>\n              <ng-message\n                when=\"sameUiBbIban\"\n                data-i18n-key=\"errors.sameAccountIBAN\">\n              </ng-message>\n              <ng-message\n                when=\"createBeneficiary\"\n                data-i18n-key=\"errors.createBeneficiary\">\n              </ng-message>\n            </ng-messages>\n          </ui-bbm-textfield-ng>\n        </div>\n\n        <div \n          class=\"bbm-beneficiary-select-list\"          \n          data-role=\"beneficiary-select-list\"\n          data-ng-if=\"$ctrl.state.isListOpened\">\n          <div class=\"bbm-list\">\n            <div class=\"bbm-list-group\">\n              <ul class=\"bbm-list-group-items\">\n                <li\n                  class=\"bbm-list-item\"\n                  data-role=\"beneficiary-select-list-item\"\n                  data-ng-repeat=\"account in $ctrl.state.suggestions track by $index\"\n                  data-ng-click=\"$ctrl.onAccountClick(account)\">\n                  <div class=\"bbm-beneficiary-select-account\">\n                    <h4\n                      class=\"bbm-beneficiary-select-account-name\"\n                      data-role=\"beneficiary-select-account-name\"\n                      data-ng-bind=\"account.name\">\n                    </h4>\n                    <div\n                      class=\"bbm-beneficiary-select-account-identifier\"\n                      data-ng-if=\"account.identifier\">\n                      <span\n                        class=\"prevent-ios-click\"\n                        data-role=\"beneficiary-select-account-identifier\"\n                        data-ng-bind=\"account.identifier\">\n                      </span>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"bbm-beneficiary-select-button\">\n          <button\n            class=\"btn btn-icon\"\n            type=\"button\"\n            data-role=\"beneficiary-select-button\"\n            data-ng-click=\"$ctrl.onButtonClick()\"\n            data-ng-hide=\"$ctrl.isButtonHidden()\">\n            <span class=\"bbm-icon bbm-icon-lg bbm-icon-addressbook fa fa-address-book-o\"></span>\n          </button>\n        </div>\n      </div>\n    </div>\n  `,\n};\n\nexport default component;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bbm-beneficiary-select-ng/scripts/component.js","import {\n  createSearchIndex,\n  isNewBeneficiary,\n  matches,\n  safeApply,\n} from './utils';\n\n/**\n * Field names enumeration\n * @type {Object}\n */\nconst FieldName = {\n  NAME: 'name',\n  IDENTIFIER: 'identifier',\n};\n\nconst IBAN_VALIDATOR_KEY = 'uiBbIban';\nconst SAME_ACCOUNT_VALIDATOR_KEY = 'sameUiBbIban';\n\n/**\n * Component controller\n */\nexport default function controller($element, $scope, $timeout, $document) {\n  const ctrl = this;\n\n  const applyScope = safeApply($scope);\n\n  const nameTextfield = $element.find('ui-bbm-textfield-ng').eq(0);\n  const identifierTextfield = $element.find('ui-bbm-textfield-ng').eq(1);\n\n  const nameInput = nameTextfield.find('input').eq(0);\n  const identifierInput = identifierTextfield.find('input').eq(0);\n\n  let searchIndex = [];\n\n  let blurTimeout;\n  let hasFocus = false;\n\n  let ibanValidator;\n\n  /**\n   * ------------------------------------------------------------------------------------\n   * Public state\n   * ------------------------------------------------------------------------------------\n   */\n\n  /**\n   * UI state\n   * @type {Object}\n   */\n  const state = {};\n\n  /**\n   * Name of the active field, when component has focus.\n   * Possible values are 'name', or 'identifier', or empty string if component doesn't have focus.\n   * @type {FieldName}\n   */\n  state.activeField = '';\n\n  /**\n   * Whether the list is opened\n   * @type {boolean}\n   */\n  state.isListOpened = false;\n\n  /**\n   * Selected beneficiary\n   * @type {Object}\n   */\n  state.beneficiary = {};\n\n  /**\n   * List of matching accounts\n   * @type {Array.<Object>}\n   */\n  state.suggestions = [];\n\n  /**\n   * ------------------------------------------------------------------------------------\n   * Inner functions\n   * ------------------------------------------------------------------------------------\n   */\n\n  const closeList = () => {\n    state.isListOpened = false;\n  };\n\n  const getActiveFieldValue = () => {\n    let value = '';\n\n    if (hasFocus) {\n      value = (state.activeField === FieldName.NAME)\n        ? ctrl.nameModelCtrl.$viewValue\n        : ctrl.identifierModelCtrl.$viewValue;\n    }\n\n    return value || '';\n  };\n\n  const createBeneficiary = name => ({\n    name,\n    identifier: '',\n    isNew: true,\n  });\n\n  const openList = () => {\n    state.isListOpened = true;\n  };\n\n  const setBeneficiary = beneficiaryToSet => {\n    state.beneficiary = beneficiaryToSet;\n    ctrl.modelCtrl.$setViewValue(beneficiaryToSet);\n  };\n\n  const convertToNewBeneficiary = () => {\n    setBeneficiary(createBeneficiary(ctrl.nameModelCtrl.$viewValue));\n  };\n\n  const convertToNewBeneficiaryIfNeeded = () => {\n    if (ctrl.ngModel && !ctrl.ngModel.isNew) {\n      convertToNewBeneficiary();\n    }\n  };\n\n  const selectAccount = account => {\n    setBeneficiary(Object.assign({}, account));\n  };\n\n  const setUntouched = () => {\n    ctrl.nameModelCtrl.$setUntouched();\n    ctrl.identifierModelCtrl.$setUntouched();\n  };\n\n  const scrollToTop = () => {\n    /* eslint-disable no-param-reassign */\n    $document[0].body.scrollTop = 0;\n  };\n\n  const setFocus = fieldName => {\n    state.activeField = fieldName;\n    hasFocus = true;\n  };\n\n  const isButtonHidden = () => (\n    state.activeField === FieldName.NAME && ctrl.nameModelCtrl.$viewValue.length > 0\n  );\n\n  const isExternalAccount = () => Boolean(\n    ctrl.ngModel && (ctrl.ngModel.external || ctrl.ngModel.isNew)\n  );\n\n  const isOwnAccount = () => !isExternalAccount();\n\n  const isIbanDisabled = () => isOwnAccount();\n\n  const isSameAccount = value => (\n    ctrl.debitAccount && ctrl.debitAccount.IBAN === value\n  );\n\n  const validateIban = () => {\n    const value = ctrl.identifierModelCtrl.$modelValue;\n    const isValid = isIbanDisabled() || ibanValidator(value);\n\n    ctrl.modelCtrl.$setValidity(IBAN_VALIDATOR_KEY, isValid);\n\n    return isValid;\n  };\n\n  const validateSameIban = () => {\n    const value = ctrl.identifierModelCtrl.$modelValue;\n    const isValid = !isSameAccount(value);\n\n    ctrl.modelCtrl.$setValidity(SAME_ACCOUNT_VALIDATOR_KEY, isValid);\n\n    return isValid;\n  };\n\n  const unsetFocus = () => {\n    state.activeField = '';\n    hasFocus = false;\n  };\n\n  const updateListState = () => {\n    if (getActiveFieldValue()) {\n      openList();\n    } else {\n      closeList();\n    }\n  };\n\n  const updateSuggestions = () => {\n    const query = getActiveFieldValue();\n    const searchQuery = query.toLowerCase().trim();\n    const accounts = ctrl.accounts || [];\n\n    state.suggestions = accounts.filter((account, idx) => (\n      matches(searchQuery, searchIndex[idx])\n    ));\n\n    updateListState();\n  };\n\n  const validate = () => {\n    const isReady = Boolean(ctrl.accounts && state.beneficiary);\n    if (isReady) {\n      const isNew = isNewBeneficiary(ctrl.accounts, state.beneficiary);\n      const isSet = Boolean(state.beneficiary.identifier);\n\n      let createBeneficiaryValidity = true;\n\n      if (isSet && isNew && !ctrl.allowCreate) {\n        createBeneficiaryValidity = false;\n      }\n\n      ctrl.modelCtrl.$setValidity('createBeneficiary', createBeneficiaryValidity);\n      ctrl.identifierModelCtrl.$setValidity('createBeneficiary', createBeneficiaryValidity);\n    }\n  };\n\n  const $onChanges = ({ accounts, allowCreate, ngModel }) => {\n    if (accounts && accounts.currentValue) {\n      searchIndex = createSearchIndex(ctrl.accounts);\n    }\n\n    if (ngModel && ctrl.ngModel) {\n      setBeneficiary(ctrl.ngModel);\n      setUntouched();\n      validate();\n    }\n\n    if (allowCreate) {\n      validate();\n    }\n  };\n\n  const attachValidator = (key, validatorFn) => {\n    ctrl.identifierModelCtrl.$validators[key] = validatorFn;\n  };\n\n  const overrideIbanValidator = () => {\n    ibanValidator = ctrl.identifierModelCtrl.$validators[IBAN_VALIDATOR_KEY];\n    attachValidator(IBAN_VALIDATOR_KEY, validateIban);\n  };\n\n  const bindDomEvents = () => {\n    const onBlur = () => {\n      // Zero timeout is used in order to prevent closing the list too early,\n      // when a user taps a suggestion from the dropdown list\n      blurTimeout = $timeout(() => {\n        validate();\n        unsetFocus();\n        closeList();\n      }, 100);\n    };\n\n    nameInput.on('focus', () => applyScope(() => {\n      $timeout.cancel(blurTimeout);\n\n      setFocus(FieldName.NAME);\n      scrollToTop();\n      updateSuggestions();\n    }));\n\n    identifierInput.on('focus', () => applyScope(() => {\n      $timeout.cancel(blurTimeout);\n\n      setFocus(FieldName.IDENTIFIER);\n      scrollToTop();\n      updateSuggestions();\n    }));\n\n    nameInput.on('blur', onBlur);\n    identifierInput.on('blur', onBlur);\n  };\n\n  const $postLink = () => {\n    ctrl.modelCtrl = $element.controller('ngModel');\n    ctrl.nameModelCtrl = nameTextfield.controller('ngModel');\n    ctrl.identifierModelCtrl = identifierTextfield.controller('ngModel');\n\n    ctrl.nameModelCtrl.$viewChangeListeners.push(\n      convertToNewBeneficiaryIfNeeded,\n      updateSuggestions\n    );\n\n    ctrl.identifierModelCtrl.$viewChangeListeners.push(\n      updateSuggestions\n    );\n\n    overrideIbanValidator();\n    attachValidator(SAME_ACCOUNT_VALIDATOR_KEY, validateSameIban);\n    bindDomEvents();\n  };\n\n  const onAccountClick = (account) => {\n    selectAccount(account);\n    closeList();\n  };\n\n  /**\n   * ------------------------------------------------------------------------------------\n   * Public API\n   * ------------------------------------------------------------------------------------\n   */\n\n  Object.assign(ctrl, {\n    $onChanges,\n    $postLink,\n    isButtonHidden,\n    isExternalAccount,\n    isIbanDisabled,\n    onAccountClick,\n    state,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bbm-beneficiary-select-ng/scripts/controller.js","/**\n * Removes whitespaces from a given string\n * @param {string} str\n * @returns {string}\n * @inner\n */\nconst removeWhitespaces = (str) => (\n  str.replace(/\\s/g, '')\n);\n\n/**\n * @param {Object} accountA\n * @param {Object} accountB\n * @returns {boolean}\n * @inner\n */\nconst isSameAccount = (accountA, accountB) => Boolean(\n  (accountA.name || '').trim() === (accountB.name || '').trim() &&\n  (accountA.identifier || '').trim() === (accountB.identifier || '').trim()\n);\n\n/**\n * Creates a search index for the given list of accounts\n * @param {Array<object>} accounts\n * @returns {Array<object>}\n * @inner\n */\nexport const createSearchIndex = (accounts) => (\n  (accounts || []).map(account => {\n    const iban = (account.identifier || '').toLowerCase().trim();\n    const name = (account.name || '').toLowerCase();\n    return [\n      name,\n      iban,\n      removeWhitespaces(iban),\n    ];\n  })\n);\n\n/**\n * @param {Array.<Object>} accounts\n * @param {Object} account\n * @returns {boolean}\n * @inner\n */\nexport const isNewBeneficiary = (accounts, account) => (\n  !accounts.some(item => isSameAccount(item, account))\n);\n\n/**\n * Returns true, if the name of the given account matches\n * to the given query string. False otherwise.\n * @param {string} query\n * @param {Array<string>} accountSearchStrings\n * @returns {boolean}\n * @inner\n */\nexport const matches = (query, accountSearchStrings) => (\n  query && accountSearchStrings.some(str => str.includes(query))\n);\n\n/*\n * Safe way of calling $scope.$apply function.\n * $scope.$apply will only be called if application is not in $apply or $digest phase.\n *\n * @param {Object} scope Angular Scope object.\n * @param {string|Function} [exp] An angular expression to be executed.\n * @inner\n */\nexport const safeApply = scope => exp => {\n  const phase = scope.$root && scope.$root.$$phase;\n  if (phase === '$apply' || phase === '$digest') {\n    scope.$eval(exp);\n  } else {\n    scope.$apply(exp);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bbm-beneficiary-select-ng/scripts/utils.js"],"sourceRoot":""}