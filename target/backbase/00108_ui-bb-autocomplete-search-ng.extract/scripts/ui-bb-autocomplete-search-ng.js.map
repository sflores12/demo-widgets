{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**","webpack:///webpack/bootstrap dcaf2abb135ce9e57553?c844**","webpack:///./ui-bb-autocomplete-search-ng/model.xml","webpack:///external \"vendor-bb-angular\"?a114**","webpack:///external \"ui-bb-search-box-ng\"?ad90","webpack:///external \"ui-bb-list-ng\"?ee09","webpack:///./ui-bb-autocomplete-search-ng/scripts/index.js","webpack:///external \"vendor-bb-angular-sanitize\"","webpack:///external \"vendor-bb-uib-typeahead\"","webpack:///./ui-bb-autocomplete-search-ng/scripts/component.js","webpack:///./ui-bb-autocomplete-search-ng/scripts/constants.js","webpack:///./ui-bb-autocomplete-search-ng/scripts/controller.js"],"names":["module","component","controller","name","bindings","ngModel","disabled","searchBoxConfig","searchMinLength","loadResult","labelKey","onSelect","onClear","messages","popupTemplateUrl","matchTemplateUrl","template","MODULE_KEY","CONTROLLER_KEY","COMPONENT_KEY","POPUP_TEMPLATE_URL","MATCH_TEMPLATE_URL","uiBbAutocompleteSearchController","element","templateCache","timeout","Promise","document","ctrl","ngModelCtrl","typeahead","querySelector","listWrapper","undefined","defaultSearchBoxConfig","iconClasses","hideButton","defaultResultState","data","totalItems","hasMore","isLoaded","isLoading","isLoadingMore","state","isOpen","isFocusLost","search","value","minLength","isSearchPrevented","isSubmitPrevented","result","Object","assign","searchBox","normalizeValue","trim","disableSearchMinLength","enableSearchMinLength","updateSearchValue","searchValue","updateResultModelValue","$setViewValue","updateModelValue","triggerResultModel","resultNgModelCtrl","$$lastCommittedViewValue","getPreloadedResult","resolve","requestResult","options","isLoadMore","then","getResult","searchQuery","triggerResult","resetResult","onLoadMore","onSearch","onSubmit","onSearchClear","onMatchSelect","$item","$model","$label","getResultMessage","length","results","noResults","showEmptyMessage","isEmpty","expandResultScope","resultScope","children","isolateScope","list","find","$watch","active","newValue","oldValue","scrollTop","isDisplayed","$onInit","popupTemplate","get","put","matchTemplate","on","event","target","contains","$onChanges","currentValue","previousValue","$postLink"],"mappings":"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","file":"ui-bb-autocomplete-search-ng/scripts/ui-bb-autocomplete-search-ng.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vendor-bb-angular\"), require(\"ui-bb-search-box-ng\"), require(\"ui-bb-list-ng\"), require(\"vendor-bb-angular-sanitize\"), require(\"vendor-bb-uib-typeahead\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"ui-bb-autocomplete-search-ng\", [\"vendor-bb-angular\", \"ui-bb-search-box-ng\", \"ui-bb-list-ng\", \"vendor-bb-angular-sanitize\", \"vendor-bb-uib-typeahead\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ui-bb-autocomplete-search-ng\"] = factory(require(\"vendor-bb-angular\"), require(\"ui-bb-search-box-ng\"), require(\"ui-bb-list-ng\"), require(\"vendor-bb-angular-sanitize\"), require(\"vendor-bb-uib-typeahead\"));\n\telse\n\t\troot[\"ui-bb-autocomplete-search-ng\"] = factory(root[\"vendor-bb-angular\"], root[\"ui-bb-search-box-ng\"], root[\"ui-bb-list-ng\"], root[\"vendor-bb-angular-sanitize\"], root[\"vendor-bb-uib-typeahead\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_19__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dcaf2abb135ce9e57553","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./ui-bb-autocomplete-search-ng/model.xml\n// module id = 0\n// module chunks = 2","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular\"\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-search-box-ng\"\n// module id = 8\n// module chunks = 1 2 28","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui-bb-list-ng\"\n// module id = 9\n// module chunks = 1 2","/**\n * @module ui-bb-autocomplete-search-ng\n *\n * @description\n * Autocomplete search component\n *\n * @example\n * // In an extension:\n * // file: scripts/index.js\n * import uiBbAutocompleteSearchNgKey from 'ui-bb-autocomplete-search-ng';\n *\n * export const dependencyKeys = [\n *   uiBbAutocompleteSearchNgKey,\n * ];\n *\n * // file: templates/template.ng.html\n * <ui-bb-autocomplete-search-ng\n *   searchBoxConfig=\"{\n *     labels: {\n *       title: 'Search',\n *       placeholder: 'Enter search text...',\n *       clear: 'Clear text',\n *       submit: 'Submit search',\n *     },\n *     hideButton: true,\n *     iconClasses: 'fa fa-chevron-down',\n *   }\"\n *   load-result=\"(options) => {}\"\n *   on-select=\"(item, label) => {}\"\n *   label-key=\"'name'\">\n * </ui-bb-autocomplete-search-ng>\n */\n\nimport angular from 'vendor-bb-angular';\nimport ngSanitizeKey from 'vendor-bb-angular-sanitize';\n\nimport uibTypeahead from 'vendor-bb-uib-typeahead';\n\nimport uiBbSearchBoxKey from 'ui-bb-search-box-ng';\nimport uiBbListKey from 'ui-bb-list-ng';\n\nimport component from './component';\nimport controller from './controller';\n\nimport { COMPONENT_KEY, CONTROLLER_KEY, MODULE_KEY } from './constants';\n\n/**\n * The angular module name\n * @name default\n * @type {string}\n */\nexport default angular\n  .module(MODULE_KEY, [\n    ngSanitizeKey,\n    uibTypeahead,\n    uiBbSearchBoxKey,\n    uiBbListKey,\n  ])\n  .component(COMPONENT_KEY, component)\n  .controller(CONTROLLER_KEY, [\n    '$element',\n    '$templateCache',\n    '$timeout',\n    '$q',\n    '$document',\n    controller,\n  ])\n  .name;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-autocomplete-search-ng/scripts/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_18__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-angular-sanitize\"\n// module id = 18\n// module chunks = 2 9 13","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor-bb-uib-typeahead\"\n// module id = 19\n// module chunks = 2","import { CONTROLLER_KEY, POPUP_TEMPLATE_URL, MATCH_TEMPLATE_URL } from './constants';\n\n/**\n * @name uiBBAutocompleteSearchComponent\n * @type {object}\n *\n * @property {String} ngModel Component model value\n * @property {String} disabled Controls whether or not component disabled or not\n * @property {Object} searchBoxConfig Configuration object for search box component\n * @property {Number} searchMinLength Minimum search string length for show dropdown result\n * @property {Function} loadResult Function to retrieve search result. It gets an object with:\n * - searchValue - Search query string\n * - isLoadMore - Indicates that Function should load next page of results\n * Function should return a Promise with object with properties:\n * - data - array of results\n * - totalItems - Total count of results\n * - hasMore - Controls whether or not load service has more results\n * @property {String} labelKey Property name of result item that will be used for show in search\n * field after select item\n * @property {Function} onSelect Function that calls after select result item\n * @property {Function} onClear Function that calls after input field was cleared\n * @property {Messages} messages Messages object\n * @property {String?} popupTemplateUrl Custom template url for popup element.\n * The referenced template should contain the element with attribute 'data-role=\"list-wrapper\"'\n * for append matched results to it.\n * @property {String?} matchTemplateUrl Custom template url for match element\n */\n\n/**\n * Labels type definition\n * @typedef {Object} Messages\n * @property {String} noResults Translated message when no one results found\n * @property {String} result Translated message when one result found\n * @property {String} results Translated prefix for message when more then one result found\n */\nconst component = {\n  bindings: {\n    ngModel: '<',\n    disabled: '=',\n    searchBoxConfig: '<',\n    searchMinLength: '<',\n    loadResult: '&',\n    labelKey: '@',\n    onSelect: '&',\n    onClear: '&',\n    messages: '<',\n    popupTemplateUrl: '@?',\n    matchTemplateUrl: '@?',\n  },\n  controller: CONTROLLER_KEY,\n  template: `\n    <div class=\"dropdown open bb-autocomplete-search\"\n      data-role=\"typeahead\"\n      data-ng-model=\"$ctrl.state.result.model\"\n      data-uib-typeahead=\"item as item[$ctrl.labelKey] for item in $ctrl.getResult($viewValue)\"\n      data-typeahead-min-length=\"$ctrl.state.search.minLength\"\n      data-typeahead-is-open=\"$ctrl.state.isOpen\"\n      data-typeahead-loading=\"$ctrl.state.isLoading\"\n      data-typeahead-no-results=\"$ctrl.state.isEmpty\"\n      data-typeahead-on-select=\"$ctrl.onMatchSelect($item, $model, $label, $event)\"\n      data-typeahead-popup-template-url=\"${POPUP_TEMPLATE_URL}\"\n      data-typeahead-template-url=\"${MATCH_TEMPLATE_URL}\"\n      data-typeahead-append-to=\"$ctrl.listWrapper\">\n      <ui-bb-search-box-ng class=\"autocomplete-search-input-box\"\n        data-ng-model=\"$ctrl.state.search.value\"\n        data-disabled=\"$ctrl.disabled\"\n        data-config=\"$ctrl.state.searchBox\"\n        data-on-change=\"$ctrl.onSearch(search)\"\n        data-on-submit=\"$ctrl.onSubmit(search)\"\n        data-on-clear=\"$ctrl.onSearchClear()\"\n        data-is-loading=\"$ctrl.state.isLoading\"\n        data-forced-submit=\"true\">\n      </ui-bb-search-box-ng>\n      <div class=\"bb-autocomplete-search-list-wrapper\"\n        data-role=\"list-wrapper\">\n      </div>\n    </div>\n\n    <script type=\"text/ng-template\" id=\"${POPUP_TEMPLATE_URL}\">\n      <ul class=\"dropdown-menu bb-autocomplete-search-dropdown bb-autocomplete-search-list\"\n        data-ng-show=\"isDisplayed()\">\n        <ui-bb-list data-on-scroll-to-end=\"onLoadMore()\"\n          class=\"list-group m-0 bb-autocomplete-search-list-inner\">\n          <li class=\"list-group-item bb-autocomplete-search-message\"\n            data-ng-class=\"{ big: !matches.length }\">\n            <span data-ng-bind=\"getResultMessage()\"></span>\n          </li>\n          <li class=\"list-group-item bb-autocomplete-search-list-item\"\n            data-ng-repeat=\"match in matches track by $index\"\n            data-ng-class=\"{ active: isActive($index) }\"\n            data-ng-mouseenter=\"selectActive($index)\"\n            data-ng-click=\"selectMatch($index)\">\n            <div data-uib-typeahead-match\n              data-index=\"$index\"\n              data-match=\"match\"\n              data-query=\"query\"\n              data-template-url=\"templateUrl\">\n            </div>\n          </li>\n          <li data-ng-show=\"isLoading()\"\n            class=\"list-group-item bb-autocomplete-search-message\">\n            <span class=\"ui-bb-autocomplete-search-spinner center-block\"></span>\n          </li>\n        </ui-bb-list>\n      </ul>\n    </script>\n\n    <script type=\"text/ng-template\" id=\"${MATCH_TEMPLATE_URL}\">\n      <a href\n        tabindex=\"-1\"\n        data-ng-bind-html=\"match.label | uibTypeaheadHighlight:query\"\n        class=\"px-3\">\n      </a>\n    </script>\n  `,\n};\n\nexport default component;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-autocomplete-search-ng/scripts/component.js","export const MODULE_KEY = 'ui-bb-autocomplete-search-ng';\n\nexport const CONTROLLER_KEY = `${MODULE_KEY}:controller`;\n\nexport const COMPONENT_KEY = 'uiBbAutocompleteSearchNg';\n\nexport const POPUP_TEMPLATE_URL = `${MODULE_KEY}/popup-template.html`;\n\nexport const MATCH_TEMPLATE_URL = `${MODULE_KEY}/match-template.html`;\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-autocomplete-search-ng/scripts/constants.js","import angular from 'vendor-bb-angular';\n\nimport { POPUP_TEMPLATE_URL, MATCH_TEMPLATE_URL } from './constants';\n/**\n * @name uiBbAutocompleteSearchController\n * @type {function}\n *\n * @description\n * Modal instance controller\n *\n * @param {object} element Angular element object\n * @param {object} templateCache Angular template cache service\n * @param {object} timeout Angular timeout service\n * @param {object} Promise Angular Promise service\n */\nexport default function uiBbAutocompleteSearchController(\n  element,\n  templateCache,\n  timeout,\n  Promise,\n  document\n) {\n  const ctrl = this;\n\n  const ngModelCtrl = element.controller('ngModel');\n  const typeahead = angular.element(element[0].querySelector('[data-role=\"typeahead\"]'));\n  const listWrapper = angular.element(element[0].querySelector('[data-role=\"list-wrapper\"]'));\n\n  const searchMinLength = ctrl.searchMinLength !== undefined ? ctrl.searchMinLength : 3;\n\n  const defaultSearchBoxConfig = {\n    iconClasses: 'fa fa-chevron-down',\n    hideButton: false,\n  };\n\n  const defaultResultState = {\n    data: [],\n    totalItems: 0,\n    hasMore: false,\n    isLoaded: false,\n    isLoading: false,\n    isLoadingMore: false,\n    ngModel: null,\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#state\n   *\n   * @description\n   * Component state object\n   *\n   * @type {Object}\n   */\n  const state = {\n    isOpen: false,\n    isFocusLost: false,\n    search: {\n      value: ctrl.ngModel || null,\n      minLength: searchMinLength,\n      isSearchPrevented: true,\n      isSubmitPrevented: false,\n    },\n    result: Object.assign({}, defaultResultState),\n    searchBox: Object.assign({}, defaultSearchBoxConfig, ctrl.searchBoxConfig),\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#normalizeValue\n   *\n   * @description\n   * Normalizes search value\n   *\n   * @inner\n   * @type {Function}\n   * @param {String} value Dirty search value\n   * @return {String} Normalized search value\n   */\n  const normalizeValue = (value) => (value && value.trim()) || '';\n\n  /**\n   * @name uiBbAutocompleteSearchController#enableSearchMinLength\n   *\n   * @description\n   * Disables minimun search value length\n   *\n   * @inner\n   * @type {Function}\n   */\n  const disableSearchMinLength = () => {\n    state.search.minLength = 0;\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#enableSearchMinLength\n   *\n   * @description\n   * Enables minimun search value length\n   *\n   * @inner\n   * @type {Function}\n   */\n  const enableSearchMinLength = () => {\n    state.search.minLength = searchMinLength;\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#updateSearchValue\n   *\n   * @description\n   * Sets component search value\n   *\n   * @inner\n   * @type {Function}\n   * @param {String} searchValue Search value\n   */\n  const updateSearchValue = (searchValue) => {\n    state.search.value = normalizeValue(searchValue);\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#setResultModelValue\n   *\n   * @description\n   * Sets typeahead directive model value\n   *\n   * @inner\n   * @type {Function}\n   * @param {String} searchValue Search value\n   */\n  const updateResultModelValue = (searchValue) => {\n    typeahead.controller('ngModel').$setViewValue(searchValue);\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#updateModelValue\n   *\n   * @description\n   * Updates component model value\n   *\n   * @inner\n   * @type {Function}\n   * @param {String} searchValue Search value\n   */\n  const updateModelValue = (searchValue) => {\n    ngModelCtrl.$setViewValue(searchValue);\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#triggerResultModel\n   *\n   * @description\n   * Triggers result model\n   *\n   * @inner\n   * @type {Function}\n   */\n  const triggerResultModel = () => {\n    const resultNgModelCtrl = typeahead.controller('ngModel');\n\n    // Those two action will open result popup\n    resultNgModelCtrl.$$lastCommittedViewValue = `${state.search.value} `;\n    resultNgModelCtrl.$setViewValue(state.search.value);\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#getPreloadedResult\n   *\n   * @description\n   * Gets existing result data.\n   *\n   * @inner\n   * @type {Function}\n   * @returns {Object} A Promise with current search result\n   */\n  const getPreloadedResult = () => Promise.resolve(state.result.data);\n\n  /**\n   * @name uiBbAutocompleteSearchController#requestResult\n   *\n   * @description\n   * Retrieve search result\n   *\n   * @inner\n   * @type {Function}\n   * @param {Object} options Request configuration object\n   * @returns {Promise} A Promise with retrieved data\n   */\n  const requestResult = (options) => {\n    if (state.result.isLoaded && !options.isLoadMore) {\n      return getPreloadedResult();\n    }\n\n    return ctrl.loadResult({ options })\n      .then((result) => {\n        Object.assign(state.result, result, { isLoaded: true });\n\n        return state.result.data;\n      });\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#getResult\n   *\n   * @description\n   * Gets search result data\n   *\n   * @inner\n   * @type {Function}\n   * @param {String} searchValue Search string\n   * @returns {Promise} A Promise with processed data\n   */\n  const getResult = (searchValue) => requestResult({ searchQuery: normalizeValue(searchValue) });\n\n  /**\n   * @name uiBbAutocompleteSearchController#triggerResult\n   *\n   * @description\n   * Trigger result dropdown\n   *\n   * @inner\n   * @type {Function}\n   */\n  const triggerResult = () => {\n    disableSearchMinLength();\n\n    timeout(() => {\n      triggerResultModel();\n      enableSearchMinLength();\n    });\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#resetResult\n   *\n   * @description\n   * Resets result state\n   *\n   * @inner\n   * @type {Function}\n   */\n  const resetResult = () => {\n    state.result.isLoaded = false;\n    updateResultModelValue('');\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#onLoadMore\n   *\n   * @description\n   * Loads next page of result.\n   *\n   * @inner\n   * @type {Function}\n   */\n  const onLoadMore = () => {\n    if (!state.result.isLoading && !state.result.isLoadingMore && state.result.hasMore) {\n      state.result.isLoadingMore = true;\n      requestResult({ searchQuery: normalizeValue(state.search.value), isLoadMore: true })\n        .then(() => {\n          state.result.isLoadingMore = false;\n          state.isFocusLost = true;\n\n          triggerResult();\n        });\n    }\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#onSearch\n   *\n   * @description\n   * Calls when search value was changed\n   *\n   * @type {Function}\n   * @param {String} search Search string\n   */\n  const onSearch = (searchValue) => {\n    resetResult();\n\n    if (!state.search.isSearchPrevented) {\n      updateResultModelValue(searchValue);\n      updateModelValue(searchValue);\n    }\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#onSubmit\n   *\n   * @description\n   * Calls when search value was submitted\n   *\n   * @type {Function}\n   */\n  const onSubmit = () => {\n    if (!state.isOpen && !state.search.isSubmitPrevented) {\n      triggerResult();\n    }\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#onClear\n   *\n   * @description\n   * Calls when search value was set to empty\n   *\n   * @type {Function}\n   */\n  const onSearchClear = () => {\n    state.search.isSearchPrevented = true;\n    state.search.isSubmitPrevented = true;\n    ctrl.onClear();\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#onMatchSelect\n   *\n   * @description\n   * Calls when one of the matches was selected\n   *\n   * @type {Function}\n   * @param {Object} $item Match item object\n   * @param {Object} $model Match item model object\n   * @param {String} $label Match item label\n   * @param {String} $event Event object\n   */\n  const onMatchSelect = ($item, $model, $label) => {\n    state.search.isSearchPrevented = true;\n    state.search.isSubmitPrevented = true;\n    updateSearchValue($label);\n    updateModelValue($label);\n    ctrl.onSelect({ $model, $label });\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#getResultMessage\n   *\n   * @description\n   * Gets message string according to result state.\n   *\n   * @inner\n   * @type {Function}\n   * @returns {String} Translated message string\n   */\n  const getResultMessage = () => {\n    if (state.result.data.length === 1) return ctrl.messages.result;\n    if (state.result.data.length > 1) return `${state.result.totalItems} ${ctrl.messages.results}`;\n\n    return ctrl.messages.noResults;\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#getResultMessage\n   *\n   * @description\n   * Show no results message.\n   *\n   * @inner\n   * @type {Function}\n   * @returns {String} Translated message string\n   */\n  const showEmptyMessage = () => state.result.isLoaded && state.isEmpty && ctrl.messages.noResults;\n\n  /**\n   * @name uiBbAutocompleteSearchController#expandResultScope\n   *\n   * @description\n   * Adds missing functionality to uib-typeahead like load more result when scrolling and loading\n   * indicalor.\n   *\n   * @inner\n   * @type {Function}\n   */\n  const expandResultScope = () => {\n    const resultScope = listWrapper.children().isolateScope();\n    const list = listWrapper.find('ui-bb-list');\n\n    resultScope.$watch(() => resultScope.active, (newValue, oldValue) => {\n      if (state.isFocusLost) {\n        resultScope.active = oldValue;\n        state.isFocusLost = false;\n      }\n\n      if (newValue === 0 && oldValue === -1) {\n        timeout(() => {\n          list[0].scrollTop = 0;\n        });\n      }\n    });\n\n    Object.assign(resultScope, {\n      isDisplayed() { return resultScope.isOpen() || showEmptyMessage(); },\n      isLoading() { return state.result.isLoading || state.result.isLoadingMore; },\n      getResultMessage,\n      onLoadMore,\n    });\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#$onInit\n   *\n   * @description\n   * Angular $onInit lifecycle hook\n   *\n   * @type {Function}\n   */\n  const $onInit = () => {\n    if (ctrl.popupTemplateUrl) {\n      const popupTemplate = templateCache.get(ctrl.popupTemplateUrl);\n      templateCache.put(POPUP_TEMPLATE_URL, popupTemplate);\n    }\n\n    if (ctrl.matchTemplateUrl) {\n      const matchTemplate = templateCache.get(ctrl.matchTemplateUrl);\n      templateCache.put(MATCH_TEMPLATE_URL, matchTemplate);\n    }\n\n    document.on('click keyup', (event) => {\n      if (element[0] !== event.target && !element[0].contains(event.target)) {\n        state.search.isSearchPrevented = true;\n\n        if (state.result.isLoaded) {\n          resetResult();\n        }\n      } else {\n        state.search.isSearchPrevented = false;\n      }\n\n      state.search.isSubmitPrevented = false;\n    });\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#$onChanges\n   *\n   * @description\n   * Angular $onChanges lifecycle hook. Checks if new introduced value is different from current\n   * hold value and updates component internal state value.\n   *\n   * @type {Function}\n   */\n  const $onChanges = ({ ngModel }) => {\n    if (ngModel && ngModel.currentValue !== ngModel.previousValue) {\n      updateSearchValue(ngModel.currentValue);\n    }\n  };\n\n  /**\n   * @name uiBbAutocompleteSearchController#$postLink\n   *\n   * @description\n   * Angular $postLink lifecycle hook\n   *\n   * @type {Function}\n   */\n  const $postLink = () => {\n    timeout(() => {\n      expandResultScope();\n    });\n  };\n\n  Object.assign(ctrl, {\n    state,\n    listWrapper,\n    getResult,\n    onSearch,\n    onSubmit,\n    onSearchClear,\n    onMatchSelect,\n    /* lifecycle hooks */\n    $onInit,\n    $postLink,\n    $onChanges,\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./ui-bb-autocomplete-search-ng/scripts/controller.js"],"sourceRoot":""}