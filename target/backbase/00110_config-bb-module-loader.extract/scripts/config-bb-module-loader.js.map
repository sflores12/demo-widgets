{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*","webpack:///webpack/bootstrap ae8dfb8780f1a537e6f0?6d38*","webpack:///./config-bb-module-loader/model.xml","webpack:///./config-bb-module-loader/scripts/index.js"],"names":["bundleDefinition","readEnvUrlFlag","key","enableKey","disableKey","hasFlag","window","location","search","match","RegExp","flag","undefined","getStorage","localStorage","getItem","e","setStorage","value","setItem","getEnvFlag","defaultVal","envVal","storedVal","mocksEnabled","bundlesEnabled","getV5","b$","portal","contextRoot","config","resourceRoot","portalName","pageName","getV6","cxpFeature","portalClient","getFeature","get","DEFAULT_CONFIG","portalConfig","BB","PROTOCOL_REGEX","hasProtocol","test","str","nameToPath","name","i","indexOf","hasInternalPath","isAbsolutePath","console","log","itemType","moduleName","slice","internalPath","bundles","map","length","bundle","page","bundleName","bundlePath","path","dependencies","forEach","dep","systemNormalize","System","normalize","systemTranslate","translate","parentName","isPlugin","call","load","source","args"],"mappings":"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","file":"config-bb-module-loader/scripts/config-bb-module-loader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"config-bb-module-loader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"config-bb-module-loader\"] = factory();\n\telse\n\t\troot[\"config-bb-module-loader\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ae8dfb8780f1a537e6f0","module.exports = require(\"./scripts/index.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config-bb-module-loader/model.xml\n// module id = 0\n// module chunks = 1","/* global System window */\n/**\n * @module config-bb-module-loader\n *\n * @description\n * Configuration module for the SystemJS module loader\n *\n * This configuration module is intended to be replaced and overwritten per project. It is used\n * to customize the SystemJS Module loader, which can be used to both lazy-load modules demand and\n * to locate modules within optimized bundles.\n *\n * The full power of SystemJS is available and the documentation on its configuration can be found\n * on the project's page, specifically\n * https://github.com/systemjs/systemjs/blob/0.19.38/docs/config-api.md\n *\n * The default implementation in this module lazy-loads all modules based on the naming convention\n * that is compatible with other tooling (`bb-package`) and the default CXP file structure.\n *\n * E.g.\n * Loading `lib-bb-i18n-ng`\n * -> `<RESOURCE_ROOT>/statics/features/[BBHOST]/lib-bb-i18n-ng/scripts/lib-bb-i18n-ng.js`\n *\n * Loading `widget-bb-sample-ng`\n * -> `<RESOURCE_ROOT>/statics/widgets/[BBHOST]/widget-bb-example-ng/scripts/widget-bb-sample-ng.js`\n *\n * Loading `config-bb-locale/assets/custom-locale.json`\n * -> `<RESOURCE_ROOT>/statics/features/[BBHOST]/config-bb-locale/assets/custom-locale.json`\n *\n * Where `RESOURCE_ROOT` is configured on the portal server\n *\n * The default implementation is generated by the [@bb-cli/bb-bundle](http://npmjs.com/package/@bb-cli/bb-bundle)\n * tool. It's recommended that you also use this tool to generate your own config as it will\n * allow you to create concatted and minified JS bundles.\n */\n\n// eslint-disable-next-line\nlet bundleDefinition = [];\n\n\nconst readEnvUrlFlag = (key) => {\n  const enableKey = `enable-${key}`;\n  const disableKey = `disable-${key}`;\n  const hasFlag = flag => !!window.location.search.match(new RegExp(`[?&]${flag}(&|$)`));\n  if (hasFlag(enableKey)) {\n    return true;\n  } else if (hasFlag(disableKey)) {\n    return false;\n  }\n  return undefined;\n};\n\nconst getStorage = (key) => {\n  try {\n    return window.localStorage.getItem(key);\n  } catch (e) {\n    return null;\n  }\n};\n\nconst setStorage = (key, value) => {\n  try {\n    window.localStorage.setItem(key, value);\n  } catch (e) {\n    return;\n  }\n};\n\nconst getEnvFlag = (key, defaultVal = false) => {\n  let envVal = readEnvUrlFlag(key);\n  if (envVal !== undefined) {\n    setStorage(key, envVal ? '1' : '0');\n  } else {\n    const storedVal = getStorage(key);\n    envVal = (storedVal === null) ? defaultVal : storedVal === '1';\n  }\n  return envVal;\n};\n\n// Load ENV\nconst mocksEnabled = getEnvFlag('mocks');\nconst bundlesEnabled = getEnvFlag('bundles', true);\n\nif (!bundlesEnabled) {\n  bundleDefinition = [];\n}\n\n\nconst getV5 = () => window.b$ &&\n    window.b$.portal && {\n      contextRoot: window.b$.portal.config.resourceRoot,\n      portalName: window.b$.portal.portalName,\n      pageName: window.b$.portal.pageName,\n    };\n\nconst getV6 = () => {\n  const cxpFeature = window.portalClient &&\n        window.portalClient.getFeature &&\n        window.portalClient.getFeature('cxp');\n  return cxpFeature && {\n    contextRoot: cxpFeature.config.get('contextRoot'),\n    portalName: cxpFeature.config.get('portalName'),\n    pageName: cxpFeature.config.get('pageName'),\n  };\n};\n\nconst DEFAULT_CONFIG = {\n  contextRoot: '/portalserver',\n  portalName: '',\n  pageName: '',\n};\n\nconst portalConfig = (window.BB && window.BB.config) ||\n    getV6() ||\n    getV5() ||\n    DEFAULT_CONFIG;\n\nconst PROTOCOL_REGEX = /^[A-z][A-z0-9+.-]+:\\/\\//;\nconst hasProtocol = str => (PROTOCOL_REGEX.test(str));\n\nconst nameToPath = (name, contextRoot) => {\n  const i = name.indexOf('/');\n  const hasInternalPath = (i !== -1);\n  const isAbsolutePath = (i === 0) || hasProtocol(name);\n\n  if (isAbsolutePath) {\n    return name;\n  }\n\n\n  if (mocksEnabled && name.indexOf('data-') === 0) {\n    name = `mock.${name}`;\n    console.log('load mock', name);\n  }\n\n\n  const itemType = name.indexOf('widget-') === 0 ? 'widgets' : 'features';\n  const moduleName = hasInternalPath ? name.slice(0, i) : name;\n  const internalPath = hasInternalPath ? name.slice(i + 1) : `scripts/${name}.js`;\n\n  return `${contextRoot}/static/${itemType}/[BBHOST]/${moduleName}/${internalPath}`;\n};\n\n// Get bundls that are relevant for the current page.\nconst bundles = {};\nconst map = {};\nfor (let i = 0; i < bundleDefinition.length; i++) {\n  const bundle = bundleDefinition[i];\n  if (bundle.portal) {\n    if (portalConfig.portalName !== bundle.portal) continue;\n    if (bundle.page && portalConfig.pageName !== bundle.page) continue;\n  }\n  const bundleName = `bundle${i}`;\n  const bundlePath = nameToPath(bundle.path, portalConfig.contextRoot);\n  bundles[bundlePath] = bundle.dependencies;\n  map[bundleName] = bundlePath;\n  bundle.dependencies.forEach(dep => (map[dep] = nameToPath(dep, portalConfig.contextRoot)));\n}\n\nconst systemNormalize = System.normalize;\nconst systemTranslate = System.translate;\nSystem.config({\n  bundles,\n  map,\n  normalize(name, parentName, isPlugin) {\n    return systemNormalize.call(this,\n      nameToPath(name, portalConfig.contextRoot), parentName, isPlugin);\n  },\n  translate(load, ...args) {\n    if (load.name.indexOf('.json') === load.name.length - 5) {\n      return `module.exports = ${load.source};`;\n    }\n    return systemTranslate.call(this, load, ...args);\n  },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./config-bb-module-loader/scripts/index.js"],"sourceRoot":""}